@using System.Web.Optimization
@using banhang24.Hellper;
@using banhang24.AppCache
@{
    ViewBag.Title = "Open24.vn - Khách hàng";
    Layout = null;
}
<link href="~/Content/Doitac.css" rel="stylesheet" />
@Html.Hidden("pageID", (int)commonEnum.CheckBoxColum.listKhachHang, new { @id = "pageID" })
<style>
    .custometimemodal-time-wrap span {
        margin-right: 12px;
    }

    .custometimemodal-time-wrap input {
        width: 228px;
    }

    @@media (max-width: 768px) {
        .custometimemodal-time-wrap:first-child {
            margin-bottom: 12px;
        }

        .custometimemodal-time-wrap span {
            min-width: 38px;
        }
    }
</style>
@Html.Hidden("shopCookies", (string)ViewBag.shopCookies, new { @id = "shopCookies" })
<div class="op-container" id="formCustomer">
    <div class="container-fluid nopadding">
        <input id="txtUserLogin" value="@ViewBag.Userlogin" style="display:none" title="User " />
        <input id="txtUserID" value="@ViewBag.UserID" style="display:none" title="ID người dùng" />
        <div class="col-left">
            <div class=" op-filter">
                <section class="op-filter-body ">
                    <article class="boxLeft ">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="/Content/images/icon/loaithuchi.png">  Chi nhánh
                        </h3>
                        <aside class="op-filter-container">
                            <div class="dropdown op-tag-picker">
                                <div class=" " data-toggle="dropdown" aria-expanded="false" id="divChiNhanhChosed">
                                    <ul data-bind="foreach: ChiNhanhChosed">
                                        <li>
                                            <span data-bind="text: TenDonVi">
                                            </span>&nbsp;
                                            <span data-bind="click: $parent.CloseChiNhanh">
                                                <i class="fa fa-times"></i>
                                            </span>
                                        </li>
                                    </ul>
                                    <input type="text" class="dropdown form-control" placeholder="Chọn chi nhánh">
                                </div>
                                <ul class="dropdown-menu" id="divAllChiNhanh" data-bind="foreach: ChiNhanhs">
                                    <li>
                                        <a data-bind="text: TenDonVi,attr:{id: ID}, event:{click: $parent.SelectedChiNhanh}"></a>
                                    </li>
                                </ul>
                            </div>
                        </aside>
                    </article>
                    <article class="boxLeft ">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <i class="fa fa-user"></i> NV phụ trách
                        </h3>
                        <aside class="op-filter-container">

                            <div class="dropdown op-tag-picker">
                                <div data-toggle="dropdown" aria-expanded="false" id="divManagerChosed"
                                     data-bind="click: ResetSearchManager">
                                    <ul data-bind="foreach: ManagerChosed">
                                        <li>
                                            <span data-bind="text: TenNhanVien">
                                            </span>
                                            <span data-bind="click: $parent.CloseManager">
                                                <i class="fa fa-times"></i>
                                            </span>
                                        </li>
                                    </ul>
                                    <input type="text" placeholder="Chọn quản lí" id="txtSearchManager" autocomplete="off"
                                           data-bind="valueUpdate: 'afterkeydown', value: searchManager">
                                </div>
                                <ul class=" dropdown-menu " id="divAllManager" data-bind="foreach: FilterManager">
                                    <li>
                                        <a data-bind="text: TenNhanVien, attr:{id: ID}, event:{click: $parent.ChoseManager}"></a>
                                    </li>
                                </ul>
                            </div>

                        </aside>
                    </article>
                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/expire/icon-04.png" height="14" />
                            Sinh nhật
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuCheckbox">
                                <div class="form-group floatleft">
                                    <div class="radio-menu">
                                        <input type="radio" value="0" data-bind="checked: customerBirthday">
                                    </div>
                                    <div class="conten-choose">
                                        <div class=" choose-date ">
                                            <div data-toggle="dropdown" aria-expanded="true">
                                                <input type="text" class="dropdown form-control choose-date-show" placeholder="Toàn thời gian"
                                                       value="Toàn thời gian" id="txtCusBirthDay" autocomplete="off">
                                            </div>
                                            <div class="dropdown-menu choseNgaySinh">
                                                <div class="col-md-4 col-sm-4">
                                                    <h3>Theo ngày và tuần</h3>
                                                    <ul>
                                                        <li value="1"><a href="javascript:void(0);">Hôm nay</a></li>
                                                        <li value="2"><a href="javascript:void(0);">Hôm qua</a></li>
                                                        <li value="11"><a href="javascript:void(0);">Ngày mai</a></li>
                                                        <li value="3"><a href="javascript:void(0);">Tuần này</a></li>
                                                        <li value="4"><a href="javascript:void(0);">Tuần trước</a></li>
                                                        <li value="12"><a href="javascript:void(0);">Tuần tới</a></li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-4 col-sm-4">
                                                    <h3>Theo tháng và quý</h3>
                                                    <ul>
                                                        <li value="5"><a href="javascript:void(0);">Tháng này</a></li>
                                                        <li value="6"><a href="javascript:void(0);">Tháng trước</a></li>
                                                        <li value="13"><a href="javascript:void(0);">Tháng tới</a></li>
                                                        <li value="7"><a href="javascript:void(0);">Quý này</a></li>
                                                        <li value="8"><a href="javascript:void(0);">Quý trước</a></li>
                                                        <li value="14"><a href="javascript:void(0);">Quý tới</a></li>
                                                    </ul>
                                                </div><div class="col-md-4 col-sm-4">
                                                    <h3>Theo năm</h3>
                                                    <ul>
                                                        <li value="0"><a href="javascript:void(0);">Toàn thời gian</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group floatleft">
                                    <div class="radio-menu">
                                        <input type="radio" value="1" data-bind="checked: customerBirthday" />
                                    </div>
                                    <div class="conten-choose">
                                        <div class="floatleft form-wrap ">
                                            <input type='text' class="form-control daterange" id="txtCusBirthDay_Input"
                                                   placeholder="Lựa chọn khác" name="daterange"
                                                   data-bind="value: customerBirthday_Input, enable: customerBirthday() !=='0'" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </article>
                    <article class="boxLeft sortTime">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/nhomkhachhang.png" height="15" /> Nhóm khách hàng
                        </h3>
                        <!--ko if: $root.RoleInsert_CusGroup()-->
                        <a class="op-filter-add" data-bind="click: ShowModalAddNhomKH"
                           title="Thêm nhóm khách">
                            <i class="fa fa-plus">
                            </i>
                        </a>
                        <!--/ko-->
                        <aside class="op-filter-container">
                            <div class="input-group">
                                <select class="form-control" id="ddlNhom" data-bind="options: NhomDoiTuongs,
                                                optionsText: 'TenNhomDoiTuong', optionsValue: 'ID', optionsCaption: 'Chọn',
                                                value: selectNhomDT"></select>
                                <div class="input-group-btn">
                                    <button type="button" class="btn btn-default" data-bind="click: editNhomDTuong, enable: selectNhomDT">
                                        <span class="fa fa-pencil-square-o"></span>
                                    </button>
                                </div>
                            </div>
                        </aside>
                    </article>
                    @*<article class="boxLeft supplier">
                            <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                                <img src="~/Content/images/icon/tongban.png" />
                                Tổng bán
                            </h3>
                            <aside class="op-filter-container">
                                <div class="menuCheckbox">
                                    <div class="form-group floatleft">
                                        <div class="radio-menu"><label class="css-form-label">Từ</label></div>
                                        <div class="conten-choose">
                                            <input type="text" class="form-control" placeholder="0" id="txtTongBanFrom" autocomplete="off"
                                                   onkeyup="return formatNumberObj(this)">
                                        </div>
                                    </div>
                                    <div class="form-group floatleft">
                                        <div class="radio-menu"><label class="css-form-label">Tới</label></div>
                                        <div class="conten-choose">
                                            <input type="text" class="form-control" placeholder="Giá trị" id="txtTongBanTo" autocomplete="off"
                                                   onkeyup="return formatNumberObj(this)">
                                        </div>
                                    </div>
                                    <div class="form-group floatleft">
                                        <div class="radio-menu">
                                            <input type="radio" data-bind="checked: filterTongBan" value="0">
                                        </div>
                                        <div class="conten-choose">
                                            <div class=" choose-date ">
                                                <div data-toggle="dropdown" aria-expanded="true">
                                                    <input type="text" class="dropdown form-control choose-date-show" placeholder="Toàn thời gian"
                                                           id="txtTongBan" value="Toàn thời gian">
                                                </div>
                                                <div class="dropdown-menu choseTongBan">
                                                    <div class="col-md-4 col-sm-4">
                                                        <h3>Theo ngày và tuần</h3>
                                                        <ul>
                                                            <li value="1"><a href="javascript:void(0);">Hôm nay</a></li>
                                                            <li value="2"><a href="javascript:void(0);">Hôm qua</a></li>
                                                            <li value="3"><a href="javascript:void(0);">Tuần này</a></li>
                                                            <li value="4"><a href="javascript:void(0);">Tuần trước</a></li>
                                                        </ul>
                                                    </div>
                                                    <div class="col-md-4 col-sm-4">
                                                        <h3>Theo tháng và quý</h3>
                                                        <ul>
                                                            <li value="5"><a href="javascript:void(0);">Tháng này</a></li>
                                                            <li value="6"><a href="javascript:void(0);">Tháng trước</a></li>
                                                            <li value="7"><a href="javascript:void(0);">Quý này</a></li>
                                                            <li value="8"><a href="javascript:void(0);">Quý trước</a></li>
                                                        </ul>
                                                    </div><div class="col-md-4 col-sm-4">
                                                        <h3>Theo năm</h3>
                                                        <ul>
                                                            <li value="9"><a href="javascript:void(0);">Năm này</a></li>
                                                            <li value="10"><a href="javascript:void(0);">Năm trước</a></li>
                                                            <li value="0"><a href="javascript:void(0);">Toàn thời gian</a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group floatleft">
                                        <div class="radio-menu">
                                            <input type="radio" data-bind="checked: filterTongBan" value="1" />
                                        </div>
                                        <div class="conten-choose">
                                            <div class="floatleft form-wrap ">
                                                <input type='text' class="form-control daterange" placeholder="Lựa chọn khác" id="txtTongBanInput" name="daterange"
                                                       data-bind="value: filterDateTongBan_Input, enable: filterTongBan() !=='0'" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </aside>
                        </article>*@

                    <article class="boxLeft supplier">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/tongban.png" />
                            Tổng thanh toán
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuCheckbox">
                                <div class="form-group floatleft">
                                    <div class="radio-menu"><label class="css-form-label">Từ</label></div>
                                    <div class="conten-choose">
                                        <input type="text" class="form-control" placeholder="0" id="txtTongThanhToanFrom" autocomplete="off"
                                               data-bind="value: tongThanhToanFrom, valueUpdate:'afterkeydown'"
                                               onkeyup="return formatNumberObj(this)">
                                    </div>
                                </div>
                                <div class="form-group floatleft">
                                    <div class="radio-menu"><label class="css-form-label">Đến</label></div>
                                    <div class="conten-choose">
                                        <input type="text" class="form-control" placeholder="Giá trị" id="txtTongThanhToanTo" autocomplete="off"
                                               data-bind="value: tongThanhToanTo, valueUpdate:'afterkeydown'"
                                               onkeyup="return formatNumberObj(this)">
                                    </div>
                                </div>
                                @*<div class="form-group floatleft">
                                        <div class="radio-menu">
                                            <input type="radio" data-bind="checked: filterTongBan" value="0">
                                        </div>
                                        <div class="conten-choose">
                                            <div class=" choose-date ">
                                                <div data-toggle="dropdown" aria-expanded="true">
                                                    <input type="text" class="dropdown form-control choose-date-show" placeholder="Toàn thời gian"
                                                           id="txtTongBan" value="Toàn thời gian">
                                                </div>
                                                <div class="dropdown-menu choseTongBan">
                                                    <div class="col-md-4 col-sm-4">
                                                        <h3>Theo ngày và tuần</h3>
                                                        <ul>
                                                            <li value="1"><a href="javascript:void(0);">Hôm nay</a></li>
                                                            <li value="2"><a href="javascript:void(0);">Hôm qua</a></li>
                                                            <li value="3"><a href="javascript:void(0);">Tuần này</a></li>
                                                            <li value="4"><a href="javascript:void(0);">Tuần trước</a></li>
                                                        </ul>
                                                    </div>
                                                    <div class="col-md-4 col-sm-4">
                                                        <h3>Theo tháng và quý</h3>
                                                        <ul>
                                                            <li value="5"><a href="javascript:void(0);">Tháng này</a></li>
                                                            <li value="6"><a href="javascript:void(0);">Tháng trước</a></li>
                                                            <li value="7"><a href="javascript:void(0);">Quý này</a></li>
                                                            <li value="8"><a href="javascript:void(0);">Quý trước</a></li>
                                                        </ul>
                                                    </div><div class="col-md-4 col-sm-4">
                                                        <h3>Theo năm</h3>
                                                        <ul>
                                                            <li value="9"><a href="javascript:void(0);">Năm này</a></li>
                                                            <li value="10"><a href="javascript:void(0);">Năm trước</a></li>
                                                            <li value="0"><a href="javascript:void(0);">Toàn thời gian</a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group floatleft">
                                        <div class="radio-menu">
                                            <input type="radio" data-bind="checked: filterTongBan" value="1" />
                                        </div>
                                        <div class="conten-choose">
                                            <div class="floatleft form-wrap ">
                                                <input type='text' class="form-control daterange" placeholder="Lựa chọn khác" id="txtTongBanInput" name="daterange"
                                                       data-bind="value: filterDateTongBan_Input, enable: filterTongBan() !=='0'" />
                                            </div>
                                        </div>
                                    </div>*@
                            </div>
                        </aside>
                    </article>
                    <article class="boxLeft supplier">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/tongban.png" />
                            Tổng sử dụng
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuCheckbox">
                                <div class="form-group floatleft">
                                    <div class="radio-menu"><label class="css-form-label">Từ</label></div>
                                    <div class="conten-choose">
                                        <input type="text" class="form-control" placeholder="0" id="txtTongSuDungFrom" autocomplete="off"
                                               data-bind="value: tongSuDungFrom, valueUpdate:'afterkeydown'"
                                               onkeyup="return formatNumberObj(this)">
                                    </div>
                                </div>
                                <div class="form-group floatleft">
                                    <div class="radio-menu"><label class="css-form-label">Đến</label></div>
                                    <div class="conten-choose">
                                        <input type="text" class="form-control" placeholder="Giá trị" id="txtTongSuDungTo" autocomplete="off"
                                               data-bind="value: tongSuDungTo, valueUpdate:'afterkeydown'"
                                               onkeyup="return formatNumberObj(this)">
                                    </div>
                                </div>
                                <div class="form-group floatleft">
                                    <div class="radio-menu">
                                        <input type="radio" data-bind="checked: filterTongBan" value="0">
                                    </div>
                                    <div class="conten-choose">
                                        <div class=" choose-date ">
                                            <div data-toggle="dropdown" aria-expanded="true">
                                                <input type="text" class="dropdown form-control choose-date-show" placeholder="Toàn thời gian"
                                                       id="txtTongBan" value="Toàn thời gian">
                                            </div>
                                            <div class="dropdown-menu choseTongBan">
                                                <div class="col-md-4 col-sm-4">
                                                    <h3>Theo ngày và tuần</h3>
                                                    <ul>
                                                        <li value="1"><a href="javascript:void(0);">Hôm nay</a></li>
                                                        <li value="2"><a href="javascript:void(0);">Hôm qua</a></li>
                                                        <li value="3"><a href="javascript:void(0);">Tuần này</a></li>
                                                        <li value="4"><a href="javascript:void(0);">Tuần trước</a></li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-4 col-sm-4">
                                                    <h3>Theo tháng và quý</h3>
                                                    <ul>
                                                        <li value="5"><a href="javascript:void(0);">Tháng này</a></li>
                                                        <li value="6"><a href="javascript:void(0);">Tháng trước</a></li>
                                                        <li value="7"><a href="javascript:void(0);">Quý này</a></li>
                                                        <li value="8"><a href="javascript:void(0);">Quý trước</a></li>
                                                    </ul>
                                                </div><div class="col-md-4 col-sm-4">
                                                    <h3>Theo năm</h3>
                                                    <ul>
                                                        <li value="9"><a href="javascript:void(0);">Năm này</a></li>
                                                        <li value="10"><a href="javascript:void(0);">Năm trước</a></li>
                                                        <li value="0"><a href="javascript:void(0);">Toàn thời gian</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group floatleft">
                                    <div class="radio-menu">
                                        <input type="radio" data-bind="checked: filterTongBan" value="1" />
                                    </div>
                                    <div class="conten-choose">
                                        <div class="floatleft form-wrap ">
                                            <input type='text' class="form-control daterange" placeholder="Lựa chọn khác" id="txtTongBanInput" name="daterange"
                                                   data-bind="value: filterDateTongBan_Input, enable: filterTongBan() !=='0'" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </article>

                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/ngaytao.png" />
                            Ngày tạo
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuCheckbox">
                                <div class="form-group floatleft">
                                    <div class="radio-menu">
                                        <input type="radio" data-bind="checked: filterNgayTao" value="0">
                                    </div>
                                    <div class="conten-choose">
                                        <div class=" choose-date ">
                                            <div data-toggle="dropdown" aria-expanded="true">
                                                <input type="text" class="dropdown form-control choose-date-show" placeholder="Toàn thời gian"
                                                       value="Toàn thời gian"
                                                       id="txtNgayTao" autocomplete="off">
                                            </div>
                                            <div class="dropdown-menu choseNgayTao">
                                                <div class="col-md-4 col-sm-4">
                                                    <h3>Theo ngày và tuần</h3>
                                                    <ul>
                                                        <li value="1"><a href="javascript:void(0);">Hôm nay</a></li>
                                                        <li value="2"><a href="javascript:void(0);">Hôm qua</a></li>
                                                        <li value="3"><a href="javascript:void(0);">Tuần này</a></li>
                                                        <li value="4"><a href="javascript:void(0);">Tuần trước</a></li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-4 col-sm-4">
                                                    <h3>Theo tháng và quý</h3>
                                                    <ul>
                                                        <li value="5"><a href="javascript:void(0);">Tháng này</a></li>
                                                        <li value="6"><a href="javascript:void(0);">Tháng trước</a></li>
                                                        <li value="7"><a href="javascript:void(0);">Quý này</a></li>
                                                        <li value="8"><a href="javascript:void(0);">Quý trước</a></li>
                                                    </ul>
                                                </div><div class="col-md-4 col-sm-4">
                                                    <h3>Theo năm</h3>
                                                    <ul>
                                                        <li value="9"><a href="javascript:void(0);">Năm này</a></li>
                                                        <li value="10"><a href="javascript:void(0);">Năm trước</a></li>
                                                        <li value="0"><a href="javascript:void(0);">Toàn thời gian</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group floatleft">
                                    <div class="radio-menu">
                                        <input type="radio" data-bind="checked: filterNgayTao" value="1" />
                                    </div>
                                    <div class="conten-choose">
                                        <div class="floatleft form-wrap ">
                                            <input type='text' class="form-control daterange" placeholder="Lựa chọn khác" name="daterange"
                                                   id="txtNgayTaoInput" data-bind="value: filterNgayTao_Input, enable: filterNgayTao() !=='0'" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </article>
                    @*<article class="boxLeft sortTime">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/nhomkhachhang.png" height="15" /> Trạng thái khách
                        </h3>
                        <a class="op-filter-add iconAddGroup" title="Thêm trạng thái khách" data-bind="click: ShowModal_AddTrangThaiKH">
                            <i class="fa fa-plus">
                            </i>
                        </a>
                        <aside class="op-filter-container">
                            <div class="input-group">
                                <select class="form-control" id="ddlTrangThaiKH" data-bind="options: TrangThaiKhachHang,
                                                optionsText: 'Name', optionsValue: 'ID', optionsCaption: 'Chọn',
                                                value: TrangThaiKH_chosed"></select>
                                <div class="input-group-btn">
                                    <button type="button" class="btn btn-default" data-bind="enable: TrangThaiKH_chosed, click: ShowModal_UpdateTrangThaiKH">
                                        <span class="fa fa-pencil-square-o"></span>
                                    </button>
                                </div>
                            </div>
                        </aside>
                    </article>*@
                    <article class="boxLeft sortTime">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/expire/icon-01.png" height="14" />        Nguồn khách
                        </h3>
                        <!--ko if: $root.RoleNguonKhach_ThemMoi()-->
                        <a class="op-filter-add iconAddGroup" title="Thêm nguồn khách" data-bind="click: ShowModal_InsertNguon">
                            <i class="fa fa-plus">
                            </i>
                        </a>
                        <!--/ko-->
                        <aside class="op-filter-container">
                            <div class="input-group">
                                <select class="form-control" data-bind="options: NguonKhachs,
                                                optionsText: 'TenNguonKhach', optionsValue: 'ID', optionsCaption: 'Chọn',
                                                 value: selectedNguonKhach"></select>
                                <div class="input-group-btn">
                                    <button type="button" class="btn btn-default"
                                            data-bind="click: ShowModal_UpdateNguon, enable: selectedNguonKhach && $root.RoleNguonKhach_CapNhat">
                                        <span class="fa fa-pencil-square-o"></span>
                                    </button>
                                </div>
                            </div>
                        </aside>
                    </article>
                    @*<article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/expire/icon-02.png" height="14" />        Loại khách
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuRadio">
                                <div class="form-group">
                                    <label class="css-form-label"><input type="radio" value="0" data-bind="checked: customerType">  Tất cả</label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label"><input type="radio" value="1" data-bind="checked: customerType">  Cá nhân</label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label"><input type="radio" value="2" data-bind="checked: customerType">  Công ty</label>
                                </div>
                            </div>
                        </aside>
                    </article>*@
                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/expire/icon-03.png" height="14" />        Giới tính
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuRadio">
                                <div class="form-group">
                                    <label class="css-form-label"><input type="radio" value="0" data-bind="checked: customerSex">  Tất cả</label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label"><input type="radio" value="1" data-bind="checked: customerSex">  Nam </label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label"><input type="radio" value="2" data-bind="checked: customerSex">  Nữ</label>
                                </div>
                            </div>
                        </aside>
                    </article>
                    <article class="boxLeft ">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <i class="fas fa-map-marker-alt"></i> Tỉnh thành
                        </h3>
                        <aside class="op-filter-container">
                            <div class="outselect">
                                <div class="outselect outselectDV">
                                    <div class="choose-person floatleft " data-toggle="dropdown" aria-expanded="false" id="divProvinceChosed">
                                        <ul data-bind="foreach: ProvinceChosed">
                                            <li class="li-input-span">
                                                <span data-bind="text: TenTinhThanh">
                                                </span>&nbsp;
                                                <span data-bind="click: $parent.CloseProvince">
                                                    <i class="fa fa-times"></i>
                                                </span>
                                            </li>
                                        </ul>
                                        <input type="text" placeholder="Chọn tỉnh thành" id="txtSearchProvince" autocomplete="off"
                                               data-bind="valueUpdate: 'afterkeydown', value: searchProvince ">
                                    </div>
                                    <div class="selec-person dropdown-menu floatleft" id="divAllProvince">
                                        <ul data-bind="foreach: FilterProvince">
                                            <li data-bind="text: TenTinhThanh, attr:{id: ID}, event:{click: $parent.ChoseProvince}">
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </article>
                    <article class="boxLeft supplier">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/nohientai.png" />          Nợ hiện tại
                        </h3>
                        <aside class="op-filter-container ">
                            <div class="in-debt">
                                <div class="form-group">
                                    <label class="css-form-label"><input type="radio" value="0" data-bind="checked: customerDebit">  Tất cả</label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label"><input type="radio" value="1" data-bind="checked: customerDebit">  Còn nợ</label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label"><input type="radio" value="2" data-bind="checked: customerDebit">  Hết nợ</label>
                                </div>
                            </div>
                            <div class="menuCheckbox" id="divDebitValue">
                                <div class="form-group floatleft">
                                    <div class="radio-menu"><label class="css-form-label">Từ</label></div>
                                    <div class="conten-choose">
                                        <input type="text" class="form-control" placeholder="0" id="txtNoHienTaiFrom" autocomplete="off"
                                               onkeyup="return formatNumberObj(this)" />
                                    </div>
                                </div>
                                <div class="form-group floatleft">
                                    <div class="radio-menu"><label class="css-form-label">Tới</label></div>
                                    <div class="conten-choose">
                                        <input type="text" class="form-control" placeholder="Giá trị" id="txtNoHienTaiTo" autocomplete="off"
                                               onkeyup="return formatNumberObj(this)" />
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </article>

                    <article class="boxLeft supplier">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <i class="fas fa-toggle-off"></i> Trạng thái hoạt động
                        </h3>
                        <aside class="op-filter-container ">
                            <div class="in-debt">
                                <div class="form-group">
                                    <label class="css-form-label">
                                        <input type="radio" value="2" data-bind="checked: $root.CusStatus"> Tất cả
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label">
                                        <input type="radio" value="0" data-bind="checked: $root.CusStatus"> Đang hoạt động
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label">
                                        <input type="radio" value="1" data-bind="checked: $root.CusStatus">  Đã xóa
                                    </label>
                                </div>
                            </div>
                        </aside>
                    </article>
                </section>
                <div class="op-filter-footer">
                    <button type="button" class="btn btn-link" style="color:red" onclick="closeFilter()">Hủy</button>
                    <button type="button" class="btn btn-link" onclick="collapseSubFilter(this)">
                        <span>Thu gọn</span>
                    </button>
                    <button type="button" class="btn btn-link" style="display:none" onclick="expandSubFilter(this)">
                        <span>Mở rộng</span>
                    </button>
                    <button type="button" class="btn btn-main kv2Btn" onclick="closeFilter()">Hoàn tất</button>
                </div>
            </div>
        </div>
        <div class="col-right">
            <div class="op-header">
                <div class="op-header-title">
                    <h2 class="pull-left title">@banhang24.Resources.ResourceTexts.Partner / Khách hàng</h2>
                </div>
                <div class="flex flex-between">
                    <div class="op-header-button">
                        <!--ko if: $root.RoleInsert_Cus()-->
                        <button type="button" class="btn btn-main add-new dropdown-toggle btn-main mr-5px" data-bind="click: showPopupAddKH" aria-haspopup="true" title="Thêm mới khách hàng" aria-expanded="false">
                            <i class="fa fa-plus"></i><font>Thêm mới</font>
                        </button>
                        <!--/ko-->
                        <!--ko if: $root.RoleImport_Cus()-->
                        <button class=" btn btn-main mr-5px" type="submit" data-toggle="modal" data-target="#myModalinport">
                            <i class="fa fa-download"></i> @banhang24.Resources.ResourceTexts.ImportFile
                        </button>
                        <!--/ko-->
                        <!--ko if: $root.RoleExport_Cus()-->
                        <button class=" btn btn-main mr-5px" data-bind="click: ExportExcel_KhachHang">
                            <span class="glyphicon glyphicon-export"></span>Xuất file
                        </button>
                        <!--/ko-->
                        <div class="flex flex-end">
                            <button type="button" class="btn btn-main mr-5px" onclick="showCollumnFilter(this)" aria-haspopup="true" aria-expanded="false" id="btnDropdownView" hidden>
                                <i class="fa fa-angle-double-down"></i>
                            </button>
                            <div class="dropdown-list dropdown-list-two" id="myList" style="display:none; right:0">
                                <div class="col-sm-6 dropdown-left">
                                    <ul data-bind="foreach: ListCheckBox">
                                        <!--ko if: $index() < $root.NumberColum_Div2()-->
                                        <li>
                                            <div class="checkbox">
                                                <label class="css-form-label">
                                                    <input type="checkbox" class="checkbox" checked="checked" data-bind="value: Key">
                                                    <span></span>
                                                    <label class="nopadding" data-bind="text: Value"></label>
                                                </label>
                                            </div>
                                        </li>
                                        <!--/ko-->
                                    </ul>
                                </div>
                                <div class="col-sm-6 dropdown-left">
                                    <ul data-bind="foreach: ListCheckBox">
                                        <!--ko if: $index() >= $root.NumberColum_Div2()-->
                                        <li>
                                            <div class="checkbox">
                                                <label class="css-form-label">
                                                    <input type="checkbox" class="checkbox" checked="checked" data-bind="value: Key">
                                                    <span></span>
                                                    <label class="nopadding" data-bind="text: Value"></label>
                                                </label>
                                            </div>
                                        </li>
                                        <!--/ko-->
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <button href="javascript:void(0)" class="btn btn-main pull-right showfiltercolumn img-filter-nang-cao" title="Tìm kiếm nâng cao"
                                data-bind="click: ResetColumnSearch">
                            <i class="fa fa-filter" style="font-size:15px;"></i>
                        </button>
                    </div>
                    <div class="flex ">
                        <div class="op-search">
                            <input type="text" class="form-control" placeholder="Theo mã, tên, điện thoại, email" id="txtMaDoiTuong"
                                   data-bind="value: filter" autocomplete="off">
                            <button type="button" class=" op-search-button" data-bind="click: Click_IconSearch">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                        <button class="btn btn-main op-filter-toggle" onclick="showFilter()" title="Hiển thị bộ lọc">
                            <i class="material-icons">sort</i>
                        </button>
                    </div>
                </div>
                <div class="  choose-commodity ">
                    <div class="btn-group operation" id="divThaoTac" style="display:inline-block;">
                        <button type="button" class="btn btn-main" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-bars"></i><font>Thao tác</font> <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu ">
                            <li>
                                <a href="javascript:void(0);" data-bind="click: ShowModalMoveGroup" id="btnMoveGroup">
                                    <i class="fa fa-external-link-square"></i>&nbsp;Chuyển nhóm
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0);" data-bind="click: DeleteManyDoiTuong" id="btnDeleteMultiple">
                                    <i class="fa fa-trash"></i>&nbsp;Xóa khách hàng
                                </a>
                            </li>
                        </ul>
                        <div style="display:inline-block; margin:7px;">
                            Có&nbsp;
                            <span>
                                <a href="javascript:void(0)"
                                   data-bind="click:">
                                    <span id="count"></span>&nbsp; khách hàng
                                </a>
                            </span>được chọn <span onclick="RemoveAllCheck()">
                                <a href="javascript:void(0)">
                                    &nbsp;&nbsp;&nbsp;&nbsp; <i class="fa fa-times icon-del">
                                    </i>Bỏ chọn tất cả
                                </a>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="content-table " id="myScrollspy">
                <div class=" bangchung table-reponsive table-frame">
                    <table class="table-hover tblList table-new table-hover-news" id="tblList" hidden>
                        <thead class="thead-boder">
                            <tr>
                                <th class="check-group check-group-main">
                                    <input type="checkbox" onclick="SetCheckAll(this)" class="ckHeader">
                                </th>
                                @foreach (var item in commonEnum.ListKhachHang)
                                {
                                    <th class="@item.Key" id="@item.Key">
                                        <a href="javascript:void(0)">@item.Value</a>
                                    </th>
                                }
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="tr-filter-head">
                                <td>
                                    <i class="fa fa-search" aria-hidden="true" data-bind="click: $root.Click_IconSearch"></i>
                                    @{
                                        var keycode = (int)commonEnum.ColumnKhachHang.madoituong;
                                        var keyname = (int)commonEnum.ColumnKhachHang.tendoituong;
                                        var keyphone = (int)commonEnum.ColumnKhachHang.dienthoai;
                                        var keygroup = (int)commonEnum.ColumnKhachHang.nhomkhach;
                                        var keygender = (int)commonEnum.ColumnKhachHang.gioitinh;
                                        var keyaddr = (int)commonEnum.ColumnKhachHang.diachi;
                                        var keyemail = (int)commonEnum.ColumnKhachHang.email;
                                        var keyprv = (int)commonEnum.ColumnKhachHang.tinhthanh;
                                        var keydistr = (int)commonEnum.ColumnKhachHang.quanhuyen;
                                        var keysource = (int)commonEnum.ColumnKhachHang.nguonkhach;
                                        var keyintroduction = (int)commonEnum.ColumnKhachHang.nguoigioithieu;
                                        var keycreater = (int)commonEnum.ColumnKhachHang.nguoitao;
                                        var keystatus = (int)commonEnum.ColumnKhachHang.trangthaikhachhang;
                                        var keynote = (int)commonEnum.ColumnKhachHang.ghichu;
                                        var keydebit = (int)commonEnum.ColumnKhachHang.nohientai;
                                        var keysale = (int)commonEnum.ColumnKhachHang.tongban;
                                        var keysalereturn = (int)commonEnum.ColumnKhachHang.tongbantrutrahang;
                                        var keyTongThuKhach = (int)commonEnum.ColumnKhachHang.tongthuKhach;
                                        var keyTongChiKhach = (int)commonEnum.ColumnKhachHang.tongChiKhach;
                                        var keyGtriSuDung = (int)commonEnum.ColumnKhachHang.gtriDVSuDung;
                                        var keyGtriDVKhachTra = (int)commonEnum.ColumnKhachHang.gtriDVKhachTra;
                                        var keypoint = (int)commonEnum.ColumnKhachHang.tongtichdiem;
                                        //var keypoint = (int)commonEnum.ColumnKhachHang.tongtichdiem;
                                        //var keypoint = (int)commonEnum.ColumnKhachHang.tongtichdiem;
                                    }
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.madoituong">
                                    <input type="text" class="form-control search-grid" data-id="@keycode" onclick="this.select()">
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.tendoituong">
                                    <input type="text" class="form-control search-grid" data-id="@keyname" onclick="this.select()">
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.dienthoai">
                                    <input type="text" class="form-control search-grid" data-id="@keyphone" onclick="this.select()">
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.nhomkhach">
                                    <select class="form-control" data-bind="options: NhomDoiTuongs,
                                                optionsText: 'TenNhomDoiTuong', optionsValue: 'ID', optionsCaption: 'Chọn',
                                                value: selectNhomDT"></select>
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.gioitinh">
                                    <select class="form-control" data-id="@keygender">
                                        <option value="0">...</option>
                                        <option value="1">Nam</option>
                                        <option value='2'>nữ</option>
                                    </select>
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.ngaysinh"></td>
                                @*<td class="@commonEnum.ColumnKhachHang.email">
                                    <input type="text" class="form-control search-grid" data-id="@keyemail" onclick="this.select()">
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.masothue"></td>
                                <td class="@commonEnum.ColumnKhachHang.sotaikhoan"></td>*@
                                <td class="@commonEnum.ColumnKhachHang.diachi">
                                    <input type="text" class="form-control search-grid" data-id="@keyaddr" onclick="this.select()">
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.tinhthanh"></td>
                                <td class="@commonEnum.ColumnKhachHang.quanhuyen">
                                    <div id="divSearchDistr">
                                        <nav>
                                            <input type="text" class="form-control search-grid" id="txtSearchDistr" data-id="@keydistr"
                                                   v-model="query" v-on:keyup="submit"
                                                   onfocusout="HideLostFocust()" placeholder="Tìm kiếm" onclick="this.select()">
                                        </nav>
                                        <div id="showsearch_Distr" hidden>
                                            <ul>
                                                <li v-for="item of searchResult" v-on:click="click(item)">
                                                    <a>
                                                        <b> <span> {{ item.TenQuanHuyen }} </span> </b>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.nguonkhach">
                                    <select class="form-control" data-bind="options: NguonKhachs,
                                                optionsText: 'TenNguonKhach', optionsValue: 'ID', optionsCaption: 'Chọn',
                                                 value: selectedNguonKhach"></select>
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.nguoigioithieu">
                                    <input type="text" id="txtSearchNguoiGT" data-id="@keyintroduction" data-bind="jqAutoCustomer: { source: ListAllDoiTuong, value: searchNguoiGT,
                                                         inputProp: 'NguoiNopTien', labelProp: 'NguoiNopTien', valueProp: 'ID', template: 'rowChiTiet'}"
                                           placeholder="Tìm kiếm" class="form-control" onclick="this.select()">
                                    <script id="rowChiTiet" type="text/html">
                                        @Html.Partial("~/Views/Component/_ko-ListSearchNguoiNopTien.cshtml")
                                    </script>
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.nvphutrach"></td>
                                <td class="@commonEnum.ColumnKhachHang.nguoitao">
                                    <input type="text" class="form-control search-grid" data-id="@keycreater" onclick="this.select()">
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.ngaytao"></td>
                                <td class="@commonEnum.ColumnKhachHang.nohientai h-filter-column">
                                    <div class="hl-filter-column">
                                        <div class="row inport-kv fl kv1">
                                            <span>=</span>
                                        </div>
                                        <div class="list-kv fl" style="display: none;">
                                            <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare(@keydebit,Key) }">     </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="hr-filter-column">
                                        <input type="text" class="form-control  number-search" data-id="@keydebit" onclick="this.select()">
                                    </div>
                                </td>
                                @*<td class="@commonEnum.ColumnKhachHang.tongban h-filter-column">
                                    <div class="hl-filter-column">
                                        <div class="row inport-kv fl kv1">
                                            <span>=</span>
                                        </div>
                                        <div class="list-kv fl" style="display: none;">
                                            <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare(@keysale,Key) }">     </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="hr-filter-column">
                                        <input type="text" class="form-control  number-search" data-id="@keysale" onclick="this.select()">
                                    </div>
                                </td>*@
                                <td class="@commonEnum.ColumnKhachHang.tongbantrutrahang h-filter-column">
                                    <div class="hl-filter-column">
                                        <div class="row inport-kv fl kv1">
                                            <span>=</span>
                                        </div>
                                        <div class="list-kv fl" style="display: none;">
                                            <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare(@keysalereturn,Key) }">     </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="hr-filter-column">
                                        <input type="text" class="form-control  number-search" data-id="@keysalereturn" onclick="this.select()">
                                    </div>
                                </td>

                                <td class="@commonEnum.ColumnKhachHang.tongthuKhach h-filter-column">
                                    <div class="hl-filter-column">
                                        <div class="row inport-kv fl kv1">
                                            <span>=</span>
                                        </div>
                                        <div class="list-kv fl" style="display: none;">
                                            <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare(@keyTongThuKhach,Key) }">     </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="hr-filter-column">
                                        <input type="text" class="form-control  number-search" data-id="@keyTongThuKhach" onclick="this.select()">
                                    </div>
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.tongChiKhach h-filter-column">
                                    <div class="hl-filter-column">
                                        <div class="row inport-kv fl kv1">
                                            <span>=</span>
                                        </div>
                                        <div class="list-kv fl" style="display: none;">
                                            <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare(@keyTongChiKhach,Key) }">     </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="hr-filter-column">
                                        <input type="text" class="form-control  number-search" data-id="@keyTongChiKhach" onclick="this.select()">
                                    </div>
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.gtriDVSuDung h-filter-column">
                                    <div class="hl-filter-column">
                                        <div class="row inport-kv fl kv1">
                                            <span>=</span>
                                        </div>
                                        <div class="list-kv fl" style="display: none;">
                                            <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare(@keyGtriSuDung,Key) }">     </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="hr-filter-column">
                                        <input type="text" class="form-control  number-search" data-id="@keyGtriSuDung" onclick="this.select()">
                                    </div>
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.gtriDVKhachTra h-filter-column">
                                    <div class="hl-filter-column">
                                        <div class="row inport-kv fl kv1">
                                            <span>=</span>
                                        </div>
                                        <div class="list-kv fl" style="display: none;">
                                            <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare(@keyGtriDVKhachTra,Key) }">     </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="hr-filter-column">
                                        <input type="text" class="form-control  number-search" data-id="@keyGtriDVKhachTra" onclick="this.select()">
                                    </div>
                                </td>
                                @*<td class="@commonEnum.ColumnKhachHang.tongtichdiem h-filter-column">
                                    <div class="hl-filter-column">
                                        <div class="row inport-kv fl kv1">
                                            <span>=</span>
                                        </div>
                                        <div class="list-kv fl" style="display: none;">
                                            <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare(@keypoint,Key) }">     </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="hr-filter-column">
                                        <input type="text" class="form-control  number-search" data-id="@keypoint" onclick="this.select()">
                                    </div>
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.ngaygiaodichgannhat"></td>
                                <td class="@commonEnum.ColumnKhachHang.trangthaikhachhang">
                                    <select class="form-control" data-bind="options: TrangThaiKhachHang,
                                                optionsText: 'Name', optionsValue: 'ID', optionsCaption: 'Chọn',
                                                value: TrangThaiKH_chosed"></select>
                                </td>*@
                                <td class="@commonEnum.ColumnKhachHang.ghichu">
                                    <input type="text" class="form-control search-grid" data-id="@keynote" onclick="this.select()">
                                </td>
                            </tr>
                            <!--ko foreach: DoiTuongs -->
                            <tr class="prev-tr-hide" data-bind="css:{bggray : $index()%2 == 1}">
                                <td class="check-group">
                                    <input type="checkbox" data-bind="attr:{id: ID}" onclick="ChoseDoiTuong(this)" />
                                </td>
                                <td class="@commonEnum.ColumnKhachHang.madoituong td-click" data-bind="text: MaDoiTuong, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.tendoituong td-click" data-bind="text: TenDoiTuong, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.dienthoai td-click" data-bind="text: DienThoai, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.nhomkhach td-click" data-bind="html: Remove_LastComma(TenNhomDT), click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.gioitinh td-click" data-bind="text: (GioiTinhNam==true?'Nam':'Nữ')"></td>
                                <td class="@commonEnum.ColumnKhachHang.ngaysinh td-click">
                                    <span data-bind="text: moment(NgaySinh_NgayTLap).format('DD/MM/YYYY')!='Invalid date'? moment(NgaySinh_NgayTLap).format('DD/MM/YYYY'):'',
                                              click: $parent.GetLichSuBanTraHang,"></span>
                                </td>
                                @*<td class="@commonEnum.ColumnKhachHang.email td-click" data-bind="text: Email, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.masothue td-click" data-bind="text: MaSoThue, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.sotaikhoan td-click" data-bind="text: TaiKhoanNganHang, click: $parent.GetLichSuBanTraHang,"></td>*@
                                <td class="@commonEnum.ColumnKhachHang.diachi td-click" data-bind="text: DiaChi, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.tinhthanh td-click" data-bind="text: KhuVuc, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.quanhuyen td-click" data-bind="text: PhuongXa, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.nguonkhach td-click" data-bind="text: TenNguonKhach, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.nguoigioithieu td-click" data-bind="text: NguoiGioiThieu, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.nvphutrach td-click" data-bind="text: TenNhanVienPhuTrach, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.nguoitao td-click" data-bind="text: NguoiTao, click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.ngaytao td-click"
                                    data-bind="text: moment(NgayTao).format('DD/MM/YYYY HH:mm'), click: $parent.GetLichSuBanTraHang,"></td>
                                <td class="@commonEnum.ColumnKhachHang.nohientai td-click text-right" data-bind="style: {color: NoHienTai > 0 ? 'red' : 'black' },
                                        text: formatNumber3Digit(NoHienTai), click: $parent.GetLichSuBanTraHang,"></td>
                                @*<td class="@commonEnum.ColumnKhachHang.tongban td-click text-right" data-bind="text:formatNumber3Digit(TongBan), click: $parent.GetLichSuBanTraHang, "></td>*@
                                <td class="@commonEnum.ColumnKhachHang.tongbantrutrahang td-click text-right" data-bind="text:formatNumber3Digit(TongBanTruTraHang), click: $parent.GetLichSuBanTraHang, "></td>
                                <td class="@commonEnum.ColumnKhachHang.tongthuKhach td-click text-right" data-bind="text:formatNumber3Digit(TongThuKhachHang), click: $parent.GetLichSuBanTraHang, "></td>
                                <td class="@commonEnum.ColumnKhachHang.tongChiKhach td-click text-right" data-bind="text:formatNumber3Digit(TongChiKhachHang), click: $parent.GetLichSuBanTraHang, "></td>
                                <td class="@commonEnum.ColumnKhachHang.gtriDVSuDung td-click text-right" data-bind="text:formatNumber3Digit(GiaTriDVSuDung), click: $parent.GetLichSuBanTraHang, "></td>
                                <td class="@commonEnum.ColumnKhachHang.gtriDVKhachTra td-click text-right" data-bind="text:formatNumber3Digit(GiaTriDVHoanTra), click: $parent.GetLichSuBanTraHang, "></td>
                                @*<td class="@commonEnum.ColumnKhachHang.tongtichdiem td-click text-right" data-bind="text:formatNumber3Digit(TongTichDiem), click: $parent.GetLichSuBanTraHang, "></td>
                                <td class="@commonEnum.ColumnKhachHang.ngaygiaodichgannhat text-center" data-bind="text: NgayGiaoDichGanNhat?moment(NgayGiaoDichGanNhat).format('DD/MM/YYYY HH:mm'):'', click: $parent.GetLichSuBanTraHang"></td>*@
                               @* <td class="@commonEnum.ColumnKhachHang.trangthaikhachhang td-click text-right" data-bind="click: $parent.GetLichSuBanTraHang, text: TrangThaiKhachHang "></td>*@
                                <td class="@commonEnum.ColumnKhachHang.ghichu td-click text-right" data-bind="text:GhiChu, click: $parent.GetLichSuBanTraHang, "></td>
                                <td class="check-group btn-hover-edit " colspan="1">
                                    <div class=" text-right">
                                        <a href="javascript:void(0)" title="Sửa khách hàng" data-bind="click: $parent.editKH">
                                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                        </a>
                                        <a href="javascript:void(0)" title="Xóa khách hàng" data-bind="click: $parent.modalDelete">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr class="op-js-tr-hide">
                                <td colspan="19">
                                    <div class="op-object-detail">
                                        <ul class="nav nav-tabs">
                                            <li class="active" onclick="LoadGetHeight()"><a data-toggle="tab" data-bind=" attr: { href: '#home'+ ID }">Thông tin</a></li>
                                            <!--ko if: $parent.VisibleHisSale -->
                                            <li onclick="LoadGetHeight()"><a data-toggle="tab" data-bind=" attr: { href: '#info'+ ID }">Nhật ký bán / đổi trả hàng</a></li>
                                            <!--/ko-->
                                            <!--ko if: $parent.VisibleHisOrder -->
                                            <li onclick="LoadGetHeight()"><a data-toggle="tab" data-bind=" attr: { href: '#hisDH'+ ID }">Nhật ký Đặt hàng</a></li>
                                            <!--/ko-->
                                            <!--ko if: $parent.VisibleListDebit -->
                                            <li onclick="LoadGetHeight()"><a data-toggle="tab" data-bind=" attr: { href: '#contact'+ ID }, click: $root.LoadTab_CongNo">Công nợ khách hàng</a></li>
                                            <!--/ko-->
                                            <li onclick="LoadGetHeight()"><a data-toggle="tab" data-bind=" attr: { href: '#point_'+ ID }, visible: $parent.ThietLap_TichDiem() != null && $parent.ThietLap_TichDiem().length > 0">Nhật ký tích điểm</a></li>

                                            <li onclick="LoadGetHeight()">
                                                <a data-toggle="tab"
                                                   data-bind=" attr: { href: '#DiaryWork_'+ ID }, click: $root.LoadTab_CongViec">Nhật ký công việc</a>
                                            </li>
                                            <li onclick="LoadGetHeight()">
                                                <a data-toggle="tab"
                                                   data-bind=" attr: { href: '#naptien'+ ID }, click: $root.clickTheGiaTri">Thẻ giá trị</a>
                                            </li>
                                            <!--ko if: $root.IsGara()-->
                                            <li onclick="LoadGetHeight()">
                                                <a data-toggle="tab"
                                                   data-bind=" attr: { href: '#tiencoc_'+ ID }, click: $root.LoadTabTienCoc">Nhật ký sử dụng tiền cọc</a>
                                            </li>
                                            <!--/ko-->
                                            <!-- ko if: !$root.IsGara() && $root.RoleUpdateImg_Invoice() -->
                                            <li onclick="LoadGetHeight()">
                                                <a data-toggle="tab"
                                                   data-bind=" attr: { href: '#anhlieutrinh_'+ ID }, click: $root.LoadAnhLieuTrinh">Ảnh liệu trình</a>
                                            </li>
                                            <!--/ko-->
                                        </ul>
                                        <div class="tab-content tab-content-next">
                                            <div class="tab-pane active" data-bind="attr: { id: 'home'+ ID }">
                                                <div class="flex flex-column ">
                                                    <div class="container-fluid row">
                                                        <div class="col-md-3 col-sm-6 col-xs-12">
                                                            <div class="img-product img-product-border">
                                                                <!--  ko if: $parent.HaveImage() == false -->
                                                                <a>
                                                                    <img src="~/Content/images/photo.png" />
                                                                </a>
                                                                <!-- /ko -->
                                                                <!-- ko foreach: $parent.AnhDaiDien-->
                                                                <a>
                                                                    <img alt="" data-bind="attr: {src: Open24FileManager.hostUrl + URLAnh},click: $root.ZoomImage" />
                                                                </a>
                                                                <!-- /ko -->
                                                            </div>
                                                            <!-- ko if: $root.FileImgs().length>1-->
                                                            <ul class="bxslider img-list-product">
                                                                <!-- ko foreach: $root.FileImgs-->
                                                                <!-- ko if: $index() != 0-->
                                                                <li class="slide">
                                                                    <a href="javascript:void(0)">
                                                                        <img data-bind="attr: {src: Open24FileManager.hostUrl + URLAnh}, click :$root.ChangeImage" />
                                                                    </a>
                                                                </li>
                                                                <!-- /ko -->
                                                                <!-- /ko -->
                                                            </ul>
                                                            <!-- /ko -->
                                                            <!-- div zoom image-->
                                                        </div>
                                                        <div class="col-md-3 col-sm-6 col-xs-12">
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label">Mã khách hàng:</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: MaDoiTuong"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label">Tên khách hàng:</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: TenDoiTuong"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label">Ngày sinh :</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: moment(NgaySinh_NgayTLap).format('DD/MM/YYYY')!='Invalid date'? moment(NgaySinh_NgayTLap).format('DD/MM/YYYY'):''"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label">Nhóm KH :</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="html: Remove_LastComma(TenNhomDT)"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft ">
                                                                <label class="css-form-label">Mã số thuế :</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: MaSoThue"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft ">
                                                                <label class="css-form-label">Số tài khoản :</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: TaiKhoanNganHang"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-6 col-xs-12">
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label">Email:</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: Email"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label">Điện thoại:</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: DienThoai"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label">Địa chỉ :</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: DiaChi"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label">Tỉnh thành :</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: KhuVuc"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label">Quận/ Huyện :</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: PhuongXa"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-6 col-xs-12">
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label ">Trạng thái khách: </label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: TrangThaiKhachHang"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label ">Người tạo: </label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: NguoiTao"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label ">Ngày tạo: </label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: moment(NgayTao).format('DD/MM/YYYY')!='Invalid date'? moment(NgayTao).format('DD/MM/YYYY'):''"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label ">NV phụ trách:</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: TenNhanVienPhuTrach"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group floatleft">
                                                                <label class="css-form-label ">Ghi chú:</label>
                                                                <div class="css-form-detail">
                                                                    <span data-bind="text: GhiChu"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="op-object-detail-function">
                                                        <!--ko if: $root.RoleUpdate_Cus() && !TheoDoi-->
                                                        <button class="btn btn-main" data-bind="click: $parent.editKH">
                                                            <i class="fa fa-check-square"></i> Sửa đổi
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.RoleDelete_Cus() && !TheoDoi -->
                                                        <button class="btn btn-cancel" data-bind="click: $parent.modalDelete">
                                                            <i class="fa fa-trash"></i> Xóa
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.RoleDelete_Cus() && TheoDoi  -->
                                                        <button class="btn btn-main" data-bind="click: $root.RestoreCus"
                                                                style="background: rgb(255, 114, 8); color: white;">
                                                            <i class="fa fa-recycle"></i> Khôi phục
                                                        </button>
                                                        <!--/ko-->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" data-bind="attr: { id: 'info'+ ID }">
                                                <div class="flex flex-column ">
                                                    <div class="table-res">
                                                        <table class='table'>
                                                            <tr>
                                                                <th>Mã hóa đơn</th>
                                                                <th>Thời gian</th>
                                                                <th>Người bán</th>
                                                                <th>Tổng cộng</th>
                                                            </tr>
                                                            <tbody data-bind="foreach: $parent.PageResult_LichSuBanHang">
                                                                <tr>
                                                                    <td>
                                                                        <a href="javascript:void(0)" data-bind="text: MaHoaDon, click: $root.ShowPopup_InforHD"></a>
                                                                    </td>
                                                                    <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss'):''"></td>
                                                                    <td data-bind="text: TenNhanVien"></td>
                                                                    <td data-bind="text: formatNumber3Digit(PhaiThanhToan)"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="page">
                                                        <div class="flex flex-end">
                                                            <a href="javascript:void(0)" data-bind="click: $root.StartPageHis, visible: $parent.VisibleStartPageHis "><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                            <a href="javascript:void(0)" data-bind="click: $root.BackPageHis, visible:  $parent.VisibleStartPageHis "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                            <ul data-bind="foreach:  $parent.PageListHistory">
                                                                <li>
                                                                    <a href="javascript:void(0)" data-bind="text: pageNumber, click: $root.GoToPageHis, css: $root.GetClassHis($data)"></a>
                                                                </li>
                                                            </ul>
                                                            <a href="javascript:void(0)" data-bind="click: $root.GoToNextPageHis, visible:  $parent.VisibleEndPageHis"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                            <a href="javascript:void(0)" data-bind="click: $root.EndPageHis, visible:  $parent.VisibleEndPageHis"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                            <div class="total-recos">
                                                                Hiển thị <span data-bind="text:  $parent.fromitemHis"></span> - <span data-bind="text:  $parent.toitemHis"></span> trên tổng số
                                                                <span data-bind="text:  $parent.TotalRecordHis"></span> bản ghi
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class=" op-object-detail-function" hidden>
                                                        <button class="btn btn-main btnExportDetail" data-bind="click: $parent.Export_HisAllTab">
                                                            <span class="glyphicon glyphicon-export"></span>Xuất file
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" data-bind="attr: { id: 'hisDH'+ ID }">
                                                <div class="flex flex-column ">
                                                    <div class="table-res">
                                                        <table class='table'>
                                                            <tr>
                                                                <th>Mã đặt hàng</th>
                                                                <th>Thời gian</th>
                                                                <th>Người bán</th>
                                                                <th>Tổng cộng</th>
                                                            </tr>
                                                            <tbody data-bind="foreach: $parent.PageResult_LichSuDatHang">
                                                                <tr>
                                                                    <td>
                                                                        <a href="javascript:void(0)" data-bind="text: MaHoaDon, click: $root.ShowPopup_InforHD"></a>
                                                                    </td>
                                                                    <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss'):''"></td>
                                                                    <td data-bind="text: TenNhanVien"></td>
                                                                    <td data-bind="text: formatNumber3Digit(PhaiThanhToan)"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="page">
                                                        <div class="flex flex-end">
                                                            <a href="javascript:void(0)" data-bind="click: $root.StartPageHisDH, visible: $parent.VisibleStartPageHisDH "><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                            <a href="javascript:void(0)" data-bind="click: $root.BackPageHisDH, visible:  $parent.VisibleStartPageHisDH "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                            <ul data-bind="foreach:  $parent.PageListHistoryDH">
                                                                <li>
                                                                    <a href="javascript:void(0)" data-bind="text: pageNumber, click: $root.GoToPageHisDH, css: $root.GetClassHisDH($data)"></a>
                                                                </li>
                                                            </ul>
                                                            <a href="javascript:void(0)" data-bind="click: $root.GoToNextPageHisDH, visible:  $parent.VisibleEndPageHisDH"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                            <a href="javascript:void(0)" data-bind="click: $root.EndPageHisDH, visible:  $parent.VisibleEndPageHisDH"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                            <div class="total-recos">
                                                                Hiển thị <span data-bind="text:  $parent.fromitemHisDH"></span> - <span data-bind="text:  $parent.toitemHisDH"></span> trên tổng số
                                                                <span data-bind="text:  $parent.TotalRecordHisDH"></span> bản ghi
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class=" op-object-detail-function" hidden>
                                                        <button class="btn btn-main" data-bind="click: $parent.Export_HisAllTab">
                                                            <span class="glyphicon glyphicon-export"></span>Xuất file
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" data-bind="attr: { id: 'contact'+ ID }">
                                                <div class="flex flex-column ">
                                                    <div class="op-object-detail-function">
                                                        <!--ko if: $root.Show_BtnDieuChinhNo()-->
                                                        <button class="btn btn-main btnDieuChinhNo" data-toggle="modal" data-bind="click: $parent.ClickDieuChinh">
                                                            <i class="fa fa-refresh"></i> Điều chỉnh
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.Show_BtnThanhToanCongNo() && NoHienTai > 0-->
                                                        <button class="btn btn-main btnThanhToanNo" data-toggle="modal" data-bind="click: $parent.showPopThanhToan">
                                                            <i class="fa fa-calculator"></i> Thanh toán
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.RoleExport_Cus()-->
                                                        <button class="btn btn-main btnExportDetail" data-bind="click: $parent.Export_HisAllTab">
                                                            <span class="glyphicon glyphicon-export"></span>Xuất file
                                                        </button>
                                                        <!--/ko-->
                                                    </div>
                                                    <div class="table-res">
                                                        <table class="table">
                                                            <tr>
                                                                <th>Mã phiếu</th>
                                                                <th>Thời gian</th>
                                                                <th>Loại</th>
                                                                <th>Giá trị</th>
                                                                <th>Dư nợ khách hàng</th>
                                                            </tr>
                                                            <tbody data-bind="foreach: $parent.PageResult_CongNoKhachHang">
                                                                <tr>
                                                                    <td>
                                                                        <a href="javascript:void(0)" data-bind="text: MaHoaDon, click: $root.ShowPopup_InforHD_PhieuThu"></a>
                                                                    </td>
                                                                    <td data-bind="text:  moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss'):''"></td>
                                                                    <td data-bind="text: strLoaiHoaDon"></td>
                                                                    <td data-bind="text: formatNumber3Digit(PhaiThanhToan)"></td>
                                                                    <td data-bind="text: formatNumber3Digit(DuNoKH)"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="page">
                                                        <div class="flex flex-end">
                                                            <a href="javascript:void(0)" data-bind="click: $root.StartPageNoKH, visible: $parent.VisibleStartPageNoKH "><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                            <a href="javascript:void(0)" data-bind="click: $root.BackPageNoKH, visible: $parent.VisibleStartPageNoKH "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                            <ul data-bind="foreach: $parent.PageListNoKH">
                                                                <li>
                                                                    <a href="javascript:void(0)" data-bind="text: pageNumber, click: $root.GoToPageNoKH, css: $root.GetClassNoKH($data)"></a>
                                                                </li>
                                                            </ul>
                                                            <a href="javascript:void(0)" data-bind="click: $root.GoToNextPageNoKH, visible: $parent.VisibleEndPageNoKH"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                            <a href="javascript:void(0)" data-bind="click: $root.EndPageNoKH, visible: $parent.VisibleEndPageNoKH"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                            <div class="total-recos">
                                                                Hiển thị <span data-bind="text: $parent.fromitemNoKH"></span> - <span data-bind="text: $parent.toitemNoKH"></span> trên tổng số
                                                                <span data-bind="text: $parent.TotalRecordNoKH"></span> bản ghi
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="tab-pane" data-bind="attr: { id: 'point_'+ ID }">
                                                <div class="flex flex-column ">
                                                    <div class="op-object-detail-function">
                                                        <!--ko if: $root.Show_BtnDieuChinhDiem()-->
                                                        <button class="btn btn-main btnDieuChinhDiem" data-toggle="modal" data-bind="click: $parent.DieuChinhDiem">
                                                            <i class="fa fa-refresh"></i> Điều chỉnh
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.RoleExport_Cus()-->
                                                        <button class="btn btn-main btnExportDetail" data-bind="click: $parent.Export_HisAllTab">
                                                            <span class="glyphicon glyphicon-export"></span>Xuất file
                                                        </button>
                                                        <!--/ko-->
                                                    </div>
                                                    <div class="table-res">
                                                        <table class="table" data-bind="visible: $root.LichSuTichDiem().length > 0">
                                                            <tr>
                                                                <th>Mã phiếu</th>
                                                                <th>Thời gian</th>
                                                                <th>Loại</th>
                                                                <th>Giá trị</th>
                                                                <th>Điểm GD</th>
                                                                <th>Điểm sau GD</th>
                                                            </tr>
                                                            <tbody data-bind="foreach: $parent.PageResult_LichSuTichDiem">
                                                                <tr>
                                                                    <td>
                                                                        <a href="javascript:void(0)" data-bind="text: MaHoaDon, click: $root.ShowPopup_InforHD_PhieuThu"></a>
                                                                    </td>
                                                                    <td data-bind="text:  moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss'):''"></td>
                                                                    <td data-bind="text: MaHoaDon.indexOf('CB')> -1?'Điều chỉnh điểm':strLoaiHoaDon"></td>
                                                                    <td data-bind="text: formatNumber3Digit(PhaiThanhToan)"></td>
                                                                    <td data-bind="text: formatNumber3Digit(DiemGiaoDich)"></td>
                                                                    <td data-bind="text: formatNumber3Digit(DiemSauGD)"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="page" data-bind="visible: $root.LichSuTichDiem().length > 0">
                                                        <div class="flex flex-end">
                                                            <a href="javascript:void(0)" data-bind="click: $root.StartPageHisTD, visible: $parent.VisibleStartPageHisTD "><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                            <a href="javascript:void(0)" data-bind="click: $root.BackPageHisTD, visible:  $parent.VisibleStartPageHisTD "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                            <ul data-bind="foreach:  $parent.PageListHistoryTD">
                                                                <li>
                                                                    <a href="javascript:void(0)" data-bind="text: pageNumber, click: $root.GoToPageHisTD, css: $root.GetClassHisTD($data)"></a>
                                                                </li>
                                                            </ul>
                                                            <a href="javascript:void(0)" data-bind="click: $root.GoToNextPageHisTD, visible:  $parent.VisibleEndPageHisTD"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                            <a href="javascript:void(0)" data-bind="click: $root.EndPageHisTD, visible:  $parent.VisibleEndPageHisTD"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                            <div class="total-recos">
                                                                Hiển thị <span data-bind="text:  $parent.fromitemHisTD"></span> - <span data-bind="text:  $parent.toitemHisTD"></span> trên tổng số
                                                                <span data-bind="text:  $parent.TotalRecordHisTD"></span> bản ghi
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="padding-10 bg-warning text-center" data-bind="visible: $root.LichSuTichDiem().length <= 0">
                                                        <i>Không có nhật ký tích điểm</i>
                                                    </div>

                                                </div>
                                            </div>

                                            <div class="tab-pane" data-bind="attr: { id: 'DiaryWork_'+ ID }">
                                                <div class="flex flex-column">
                                                    <div class="flex flex-between">
                                                        <div class="flex flex-row" style="justify-content:flex-start">
                                                            <button class="btn-tab active" data-bind="click: function(){$root.ChangeTab_CongViec($data,0)}">Đang thực hiện</button>
                                                            <button class="btn-tab" data-bind="click: function(){$root.ChangeTab_CongViec($data,1)}"> Chưa thực hiện</button>
                                                            <button class="btn-tab" data-bind="click: function(){$root.ChangeTab_CongViec($data,2)}">Đã hoàn thành</button>
                                                        </div>
                                                        <!--ko if: $root.Show_BtnAddWork()-->
                                                        <div class=" op-object-detail-function flex-between">
                                                            <button type="button" class="btn btn-main btnAddWork"
                                                                    aria-haspopup="true" title="Thêm mới công việc" data-bind="click: $root.ShowPopup_AddWork">
                                                                <i class="fa fa-plus"></i><font>Thêm mới</font>
                                                            </button>
                                                        </div>
                                                        <!--/ko-->
                                                    </div>
                                                    <div class="table-res">
                                                        <table class=" table table-hover table-new op-table" data-bind="attr: { id: 'table_congviec'+ ID }, visible: $root.PageResult_Schedule().length>0">
                                                            <thead>
                                                                <tr>
                                                                    <th class="text-center tencongviec">Tên công việc</th>
                                                                    <th class="text-center mucdouutien">Mức độ ưu tiên</th>
                                                                    <th class="text-center mucdouutien">Loại công việc</th>
                                                                    <th class="text-center thoigianbatdau" data-bind="text: $root.TabCongViec_Status()==2?'Thời gian bắt đầu':'Ngày hẹn'"></th>
                                                                    <th class="text-center thoigianketthuc" data-bind="visible: $root.TabCongViec_Status()==2 ">Thời gian kết thúc</th>
                                                                    <th class="text-center nhanvienphutrach">Nhân viên phụ trách</th>
                                                                    <th class="text-center trangthai">Trạng thái</th>
                                                                    <th class="text-center ghichucongviec">Ghi chú</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody data-bind="foreach: $root.PageResult_Schedule">
                                                                <tr class="op-tr-show tr-conttact-show">
                                                                    <td class="text-left tencongviec" data-bind="text: Ma_TieuDe"></td>
                                                                    <td class="text-left mucdouutien" data-bind="text: MucDoUuTien === 3 ? 'Thấp' : (MucDoUuTien === 2 ? 'Trung bình' : 'Cao')"></td>
                                                                    <td class="text-left mucdouutien" data-bind="text: TenLoaiTuVanLichHen"></td>
                                                                    <td class="text-center thoigianbatdau" data-bind="text: moment(NgayGio).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayGio).format('DD/MM/YYYY HH:mm'):'',
                                                                visible: $root.TabCongViec_Status()==2"></td>
                                                                    <td class="text-center thoigianketthuc" data-bind="text: moment(NgayGioKetThuc).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayGioKetThuc).format('DD/MM/YYYY HH:mm'):''"></td>
                                                                    <td class="text-left nhanvienphutrach" data-bind="text: TenNhanVien"></td>
                                                                    <td class="text-left trangthai" data-bind="text: TrangThai === '1' ? 'Đang xử lý' : (TrangThai === '2'? 'Hoàn thành' : 'Hủy')"></td>
                                                                    <td class="text-left ghichucongviec" data-bind="text: GhiChu"></td>
                                                                </tr>
                                                                <tr class="op-tr-hide tr-conttact-hide" hidden>
                                                                    <td colspan="16">
                                                                        <div class="flex flex-column">
                                                                            <ul class="nav nav-tabs">
                                                                                <li class="active" value="1"><a data-toggle="tab" href="#lhthongtin">Thông tin</a></li>
                                                                            </ul>
                                                                            <div class="tab-content">
                                                                                <div class="tab-pane active" id="lhthongtin">
                                                                                    <div class='floatleft'>
                                                                                        <div class="col-md-12 nopadding list-tab-detail-optin magin-top-30 detail-content ">
                                                                                            <div class="col-md-4 col-xs-12">
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Tên công việc:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text:Ma_TieuDe"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Loại công việc:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text:TenLoaiTuVanLichHen"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Mức độ ưu tiên:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <div class="form-chi-tiet-cv filter-muc-do">
                                                                                                            <!--ko if: MucDoUuTien == 1-->
                                                                                                            <a href="javascript:void(0)"><div class="uu-tien-cao"></div> <span>Cao</span></a>
                                                                                                            <!--/ko-->
                                                                                                            <!--ko if: MucDoUuTien == 2-->
                                                                                                            <a href="javascript:void(0)"><div class="uu-tien-tb"></div> <span>Trung bình</span></a>
                                                                                                            <!--/ko-->
                                                                                                            <!--ko if: MucDoUuTien == 3-->
                                                                                                            <a href="javascript:void(0)"><div class="uu-tien-thap"></div> <span>Thấp</span></a>
                                                                                                            <!--/ko-->
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Thời gian bắt đầu:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text:moment(NgayGio).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayGio).format('DD/MM/YYYY HH:mm'):''"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft" data-bind="visible: $root.TabCongViec_Status()==2">
                                                                                                    <label class="css-form-label">Thời gian kết thúc:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text: moment(NgayGioKetThuc).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayGioKetThuc).format('DD/MM/YYYY HH:mm'):''"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-md-4 col-xs-12">
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Nhắc nhở:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text:NhacNho"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Khách hàng:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text:TenDoiTuong"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Nhân viên phụ trách:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text:TenNhanVien"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft ">
                                                                                                    <label class="css-form-label">Trạng thái:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text: TrangThai === '1' ? 'Đang xử lý' : (TrangThai === '2'? 'Hoàn thành' : 'Hủy')"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Ngày hoàn thành:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text: moment(NgayHoanThanh).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayHoanThanh).format('DD/MM/YYYY HH:mm'):''"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-md-4 col-xs-12">
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Kết quả:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text:KetQua"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Người tạo:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text:NguoiTao"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft">
                                                                                                    <label class="css-form-label">Ngày tạo:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text: moment(NgayTao).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayTao).format('DD/MM/YYYY HH:mm'):''"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-group floatleft not-border">
                                                                                                    <label class="css-form-label">Ghi chú:</label>
                                                                                                    <div class="css-form-detail">
                                                                                                        <span data-bind="text:GhiChu"></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="group-btn floatleft text-right">
                                                                                            <a href="javascript:void(0)" class="btn btn-main " data-bind="click: function(){$root.Update_Work($parent, $data)} ">
                                                                                                <i class="fa fa-check-square"></i>Sửa đổi
                                                                                            </a>
                                                                                            <a href="javascript:void(0)" class="btn btn-cancel " data-bind="click: $root.Delete_Work">
                                                                                                <i class="fa fa-trash"></i> Xóa
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="page flex flex-end" data-bind="visible: $root.PageResult_Schedule().length>0">
                                                        <a href="javascript:void(0)" data-bind="click: $root.StartPageSchedule, visible: $parent.VisibleStartPageSchedule "><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                        <a href="javascript:void(0)" data-bind="click: $root.BackPageSchedule, visible: $parent.VisibleStartPageSchedule "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                        <ul data-bind="foreach: $parent.PageListSchedule">
                                                            <li>
                                                                <a href="javascript:void(0)" data-bind="text: pageNumber, click: $root.GoToPageSchedule, css: $root.GetClassSchedule($data)"></a>
                                                            </li>
                                                        </ul>
                                                        <a href="javascript:void(0)" data-bind="click: $root.GoToNextPageSchedule, visible: $parent.VisibleEndPageSchedule"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                        <a href="javascript:void(0)" data-bind="click: $root.EndPageSchedule, visible: $parent.VisibleEndPageSchedule"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                        <div class="total-recos">
                                                            Hiển thị <span data-bind="text: $parent.fromitemSchedule"></span> - <span data-bind="text: $parent.toitemSchedule"></span> trên tổng số
                                                            <span data-bind="text: $parent.TotalRecordSchedule"></span> bản ghi
                                                        </div>
                                                    </div>
                                                    <div class="text-center bg-warning padding-10" data-bind="visible: $root.PageResult_Schedule().length<=0">
                                                        <i>
                                                            Không có công việc nào
                                                        </i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" data-bind="attr: { id: 'naptien'+ ID }">
                                                <div class="flex flex-column ">
                                                    <ul class="nav nav-pills  ">
                                                        <li class="active" data-bind="click: function(){$root.clickTheGiaTri($data)}">
                                                            <a data-toggle="tab" class="text-center"
                                                               data-bind="attr: { href: '#tab_b1'+ ID }" aria-expanded="true"><label class="css-form-label">Nhật ký sử dụng</label></a>
                                                        </li>
                                                        <li data-bind="click: function(){$root.clickLichSuNap($data)} ">
                                                            <a data-toggle="tab" data-bind="attr: { href: '#tab_b2'+ ID }" class="text-center" aria-expanded="false"><label class="css-form-label">Lịch sử nạp/ hoàn trả</label></a>
                                                        </li>
                                                        <li style="padding-left: 20px">
                                                            <div class="flex" style="line-height:24px; padding:3px">
                                                                <div class="flex" style="margin-right:5px">
                                                                    <span class="bold">
                                                                        <span> Số dư hiện tại:</span>
                                                                        <span data-bind="text: formatNumber3Digit($root.SoDuTheGiaTri())"></span>
                                                                    </span> &nbsp;
                                                                    <span style="display:none">
                                                                        <span> Trạng thái:</span> &nbsp;
                                                                        <span data-bind="text: $root.TrangThai_TheGiaTri() === 1 ? 'Đang hoạt động' : 'Ngừng hoạt động'"></span>
                                                                    </span>
                                                                </div>

                                                            </div>
                                                        </li>
                                                    </ul>
                                                    <div class="tab-content " style="padding-top: 0; border: 1px solid #ccc; padding: 5px; margin-bottom: 5px;">
                                                        <div class="tab-pane active " data-bind="attr: { id: 'tab_b1'+ ID }">
                                                            <div class="flex flex-row flex-between" style="padding:5px 0">
                                                                <div class="flex flex-row">
                                                                    <!-- ko if: $root.RoleDieuChinhSoDuThe-->
                                                                    <button type="button" class="btn btn-main pull-left " data-toggle="modal" data-bind="click: $root.DieuChinhSoDu">
                                                                        Điều chỉnh số dư
                                                                    </button>
                                                                    <!--/ko-->

                                                                </div>
                                                                <div class="dropdown" style="   display: inline-block;   right:0; float: right; margin-right:5px">
                                                                    <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="border:1px solid var(--color-primary); background:var(--color-main); color:white ">
                                                                        Toàn thời gian
                                                                    </button>
                                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="width:100%; left:unset; right:0">
                                                                        <button type="button" class="form-control  btn-link" id="alltime" data-bind="click: function(){ $root.TheGiaTri_GetTimeSearch(0)}">
                                                                            Toàn thời gian
                                                                        </button>
                                                                        <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                        <button type="button" class="form-control  btn-link" id="today" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(1) }">
                                                                            Hôm nay
                                                                        </button>
                                                                        <button type="button" class="form-control  btn-link" id="yesterday" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(2)}">
                                                                            Hôm qua
                                                                        </button>
                                                                        <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                        <button type="button" class="form-control  btn-link" id="thisweek" data-bind="click: function(){ $root.TheGiaTri_GetTimeSearch(3)}">
                                                                            Tuần này
                                                                        </button>
                                                                        <button type="button" class="form-control  btn-link" id="lastweek" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(4)}">
                                                                            Tuần trước
                                                                        </button>
                                                                        <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                        <button type="button" class="form-control btn-link" id="txt30ngaynt" data-bind="click: function() { $root.TheGiaTri_GetTimeSearch(5)}">
                                                                            Tháng này
                                                                        </button>
                                                                        <button type="button" class="form-control  btn-link" id="lastmonth" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(6)}">
                                                                            Tháng trước
                                                                        </button>
                                                                        <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                        <button type="button" class="form-control  btn-link" id="customtime" data-bind="click: function(){}" data-toggle="modal" data-target="#custometimemodal">
                                                                            Tùy chỉnh thời gian
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="table-res">
                                                                <table class="table">
                                                                    <!--ko if: $root.RoleXemDSTheGiaTri()-->
                                                                    <tr>
                                                                        <th>Ngày </th>
                                                                        <th>Hoạt động</th>
                                                                        <th>
                                                                            Phát sinh tăng
                                                                        </th>
                                                                        <th>
                                                                            Phát sinh giảm
                                                                        </th>
                                                                        <th>Hóa đơn</th>
                                                                        <th>Phiếu sử dụng</th>
                                                                        <th>Ghi chú</th>
                                                                    </tr>
                                                                    <tbody data-bind="foreach: $root.ListNhatKyThe">
                                                                        <tr>
                                                                            <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss'):''"></td>
                                                                            <td data-bind="text: SLoaiHoaDon">HH000001</td>
                                                                            <td data-bind="text: LoaiHoaDonSQ === 12 ? formatNumber3Digit(TienThe): 0"></td>
                                                                            <td data-bind="text: LoaiHoaDonSQ === 11 ? formatNumber3Digit(TienThe): 0"></td>
                                                                            <td data-bind="text: MaHoaDon"><a href="javascript:void(0)"></a></td>
                                                                            <td data-bind="text: MaHoaDonSQ"><a href="javascript:void(0)">H000001</a></td>
                                                                            <td data-bind="text: DienGiai"></td>
                                                                        </tr>
                                                                    </tbody>
                                                                    <tfoot class="bg12 tfoot-tong">
                                                                        <tr>
                                                                            <td colspan="2">Tổng</td>
                                                                            <td><span data-bind="text: formatNumber3Digit($root.TongTienTang())">100,000</span> </td>
                                                                            <td><span data-bind="text: formatNumber3Digit($root.TongTienGiam())">100,000</span></td>
                                                                            <td colspan="4"></td>
                                                                        </tr>
                                                                    </tfoot>
                                                                    <!--/ko-->
                                                                    <!--ko if: !$root.RoleXemDSTheGiaTri()-->
                                                                    <tfoot class="Report_Empty text-center">
                                                                        <tr>
                                                                            <td colspan="8">
                                                                                <i>
                                                                                    Bạn không có quyền xem
                                                                                </i>
                                                                            </td>
                                                                        </tr>
                                                                    </tfoot>
                                                                    <!--/ko-->
                                                                </table>
                                                            </div>
                                                            <div class="page" style="background:none">

                                                                <div class="flex flex-end">
                                                                    <a href="javascript:void(0)" data-bind="click: $root.StartPageNKThe, visible: $root.VisibleStartPageNKThe"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                    <a href="javascript:void(0)" data-bind="click: $root.BackPageNKThe, visible: $root.VisibleStartPageNKThe"><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                    <ul data-bind="foreach: $root.PageList_DisplayNKThe">
                                                                        <li>
                                                                            <a href="javascript:void(0)" data-bind="text: pageNumberNKThe, click: $root.GoToPageHDNKThe, css: $root.GetClassHDNKThe($data)"></a>
                                                                        </li>
                                                                    </ul>
                                                                    <a href="javascript:void(0)" data-bind="click: $root.GoToNextPageNKThe, visible: $root.VisibleEndPageNKThe"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                    <a href="javascript:void(0)" data-bind="click: $root.EndPageNKThe, visible: $root.VisibleEndPageNKThe"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                    <div class="total-recos">Hiển thị <span data-bind="text: $root.fromitemNKThe"></span> - <span data-bind="text: $root.toitemNKThe"></span> trên tổng số <span data-bind="text: $root.TotalRecordNKThe"></span> hóa đơn.</div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <div class="tab-pane" data-bind="attr: { id: 'tab_b2'+ ID }">
                                                            <div class="flex flex-row flex-between" style="padding:5px 0">
                                                                <div class="flex flex-row flex-between">
                                                                    <div class="flex flex-between" ">
                                                                        <!--ko if: $root.RoleThemMoiTheGiaTri-->
                                                                        <button type="button" class="btn btn-main add-new dropdown-toggle btn-main pull-left"
                                                                                style="margin-right:5px !important; float:left" aria-haspopup="true" aria-expanded="false" data-bind="click: $root.showpopupNapTien">
                                                                            <i class="fa fa-plus"></i><font>Nạp tiền</font>
                                                                        </button>
                                                                        <!--/ko-->
                                                                        <!--ko if: $root.RoleDieuChinhSoDuThe-->
                                                                        <button type="button" class="btn btn-main pull-left" data-toggle="modal" data-bind="click: $root.DieuChinhSoDu">
                                                                            Điều chỉnh số dư
                                                                        </button>
                                                                        <!--/ko-->
                                                                    </div>

                                                                </div>
                                                                <div class="dropdown" style="   display: inline-block;    float: right; margin-right:5px">
                                                                    <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="border:1px solid var(--color-primary); background:var(--color-main); color:white">
                                                                        Toàn thời gian
                                                                    </button>
                                                                    <div class="dropdown-menu" style="width:100%; left:unset;right:0">
                                                                        <button type="button" class="form-control  btn-link" id="alltime" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(0) }">
                                                                            Toàn thời gian
                                                                        </button>
                                                                        <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                        <button type="button" class="form-control  btn-link" id="today" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(1) }">
                                                                            Hôm nay
                                                                        </button>
                                                                        <button type="button" class="form-control  btn-link" id="yesterday" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(2)}">
                                                                            Hôm qua
                                                                        </button>
                                                                        <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                        <button type="button" class="form-control  btn-link" id="thisweek" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(3) }">
                                                                            Tuần này
                                                                        </button>
                                                                        <button type="button" class="form-control  btn-link" id="lastweek" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(4)}">
                                                                            Tuần trước
                                                                        </button>
                                                                        <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                        <button type="button" class="form-control btn-link" id="txt30ngaynt" data-bind="click: function() { $root.TheGiaTri_GetTimeSearch(5)}">
                                                                            Tháng này
                                                                        </button>
                                                                        <button type="button" class="form-control  btn-link" id="lastmonth" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(6)}">
                                                                            Tháng trước
                                                                        </button>
                                                                        <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                        <button type="button" class="form-control  btn-link" id="customtime" data-bind="click: function(){}" data-toggle="modal" data-target="#custometimemodal">
                                                                            Tùy chỉnh thời gian
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="table-res">
                                                                <table class="table">
                                                                    <!--ko if: $root.RoleXemDSTheGiaTri()-->
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Mã phiếu </th>
                                                                            <th>Loại phiếu </th>
                                                                            <th>Ngày lập</th>
                                                                            <th>Phát sinh tăng</th>
                                                                            <th>Phát sinh giảm</th>
                                                                            <th>Ghi chú</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody data-bind="foreach: $root.ListLSNapThe">
                                                                        <tr class="tr-show">
                                                                            <td>
                                                                                <a data-bind="text: MaHoaDon, click: $root.DieuChinhThe_showUpdate" href="javascript:void(0)">
                                                                                </a>
                                                                            </td>
                                                                            <td data-bind="text: SLoaiHoaDon"></td>
                                                                            <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss'):''"></td>
                                                                            <td data-bind="text: formatNumber3Digit(PhatSinhTang)"></td>
                                                                            <td data-bind="text: formatNumber3Digit(PhatSinhGiam)"></td>
                                                                            <td data-bind="text: DienGiai"></td>
                                                                        </tr>
                                                                    </tbody>
                                                                    <tfoot>
                                                                        <tr class="bold bg12">
                                                                            <td colspan="3">Tổng cộng</td>
                                                                            <td data-bind="text: formatNumber3Digit($root.TongTienTang())">
                                                                            </td>
                                                                            <td data-bind="text: formatNumber3Digit($root.TongTienGiam())">
                                                                            </td>
                                                                            <td></td>
                                                                        </tr>
                                                                    </tfoot>
                                                                    <!--/ko-->
                                                                    <!--ko if: !$root.RoleXemDSTheGiaTri()-->
                                                                    <tfoot class="Report_Empty text-center">
                                                                        <tr>
                                                                            <td colspan="12"><i> Bạn không có quyền xem</i></td>
                                                                        </tr>
                                                                    </tfoot>
                                                                    <!--/ko-->
                                                                </table>
                                                            </div>
                                                            <div class="page">

                                                                <div class="flex flex-end">
                                                                    <a href="javascript:void(0)" data-bind="click: $root.StartPageNT, visible: $root.VisibleStartPageNT"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                    <a href="javascript:void(0)" data-bind="click: $root.BackPageNT, visible: $root.VisibleStartPageNT"><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                    <ul data-bind="foreach: $root.PageList_DisplayNT">
                                                                        <li>
                                                                            <a href="javascript:void(0)" data-bind="text: pageNumberNT, click: $root.GoToPageHDNT, css: $root.GetClassHDNT($data)"></a>
                                                                        </li>
                                                                    </ul>
                                                                    <a href="javascript:void(0)" data-bind="click: $root.GoToNextPageNT, visible: $root.VisibleEndPageNT"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                    <a href="javascript:void(0)" data-bind="click: $root.EndPageNT, visible: $root.VisibleEndPageNT"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                    <div class="total-recos">Hiển thị <span data-bind="text: $root.fromitemNT"></span> - <span data-bind="text: $root.toitemNT"></span> trên tổng số <span data-bind="text: $root.TotalRecordNT"></span> hóa đơn.</div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" data-bind="attr: { id: 'tiencoc_'+ ID }">
                                                <div class="flex flex-column ">
                                                    <div class="flex flex-between padding-10">
                                                        <div class="list-title" style="float:left">
                                                            <div class=" form-group">
                                                                <label class="css-form-label"> Số dư hiện tại:</label>
                                                                <div class="css-form-detail">
                                                                    <span class="_so-tien" data-bind="text: formatNumber3Digit($root.SoDuDatCoc())">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="dropdown" style="   display: inline-block;    float: right; margin-right:5px">
                                                            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
                                                                    aria-expanded="false" style="border:1px solid var(--color-primary); background:var(--color-main); color:white ">
                                                                Toàn thời gian
                                                            </button>
                                                            <div class="dropdown-menu" style="width:100%; left:unset;right:0">
                                                                <button type="button" class="form-control  btn-link" data-bind="click: function(){ $root.TheGiaTri_GetTimeSearch(0,'tiencoc')}">
                                                                    Toàn thời gian
                                                                </button>
                                                                <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                <button type="button" class="form-control  btn-link" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(1,'tiencoc') }">
                                                                    Hôm nay
                                                                </button>
                                                                <button type="button" class="form-control  btn-link" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(2,'tiencoc')}">
                                                                    Hôm qua
                                                                </button>
                                                                <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                <button type="button" class="form-control  btn-link" data-bind="click: function(){ $root.TheGiaTri_GetTimeSearch(3,'tiencoc')}">
                                                                    Tuần này
                                                                </button>
                                                                <button type="button" class="form-control  btn-link" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(4,'tiencoc')}">
                                                                    Tuần trước
                                                                </button>
                                                                <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                <button type="button" class="form-control btn-link" data-bind="click: function() { $root.TheGiaTri_GetTimeSearch(5,'tiencoc')}">
                                                                    Tháng này
                                                                </button>
                                                                <button type="button" class="form-control  btn-link" data-bind="click: function(){$root.TheGiaTri_GetTimeSearch(6,'tiencoc')}">
                                                                    Tháng trước
                                                                </button>
                                                                <div style="border-bottom:1px dashed #ccc; margin: 0 5px"></div>
                                                                <button type="button" class="form-control  btn-link" data-bind="click: function(){}" data-toggle="modal" data-target="#custometimemodal">
                                                                    Tùy chỉnh thời gian
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="table-res">
                                                        <table class="table">
                                                            <tr>
                                                                <th>Mã phiếu </th>
                                                                <th>Thời gian</th>
                                                                <th>
                                                                    Mã hóa đơn
                                                                </th>
                                                                <th>Loại</th>
                                                                <th>
                                                                    Giá trị
                                                                </th>
                                                                <th>Số dư</th>
                                                            </tr>
                                                            <tbody data-bind="foreach: $root.ListNhatKyTienCoc">
                                                                <tr>
                                                                    <td>
                                                                        <a href="javascript:void(0)" data-bind="text: MaPhieuChi, click: $root.ShowPopup_InforHD_PhieuThu"></a>
                                                                    </td>
                                                                    <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss')"></td>
                                                                    <td>
                                                                        <a href="javascript:void(0)" data-bind="text: MaHoaDon, click: $root.NKyCoc_ShowPopupInforHD"></a>
                                                                    </td>
                                                                    <td data-bind="text: strLoaiHoaDon"></td>
                                                                    <td data-bind="text: formatNumber3Digit(PhaiThanhToan)"></td>
                                                                    <td data-bind="text: formatNumber3Digit(DuNoKH)"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="page">
                                                        <div class="flex flex-end">
                                                            <a href="javascript:void(0)" data-bind="visible: $root.Coc_PageList().length > 1">
                                                                <i class="fa fa-step-backward" aria-hidden="true"></i>
                                                            </a>
                                                            <a href="javascript:void(0)" data-bind="visible: $root.Coc_PageList().length > 1">
                                                                <i class="fa fa-caret-left" aria-hidden="true"></i>
                                                            </a>
                                                            <ul data-bind="foreach: $root.Coc_PageList, visible: $root.Coc_PageList().length > 1">
                                                                <li>
                                                                    <a href="javascript:void(0)"
                                                                       data-bind="text: $data,
                                                                               click: $root.Coc_GotoPage,
                                                                               css: {click: $data == $root.Coc_Currentpage()}
                                                                              "></a>
                                                                </li>
                                                            </ul>
                                                            <a href="javascript:void(0)" data-bind="visible: $root.Coc_PageList().length > 1">
                                                                <i class="fa fa-caret-right" aria-hidden="true"></i>
                                                            </a>
                                                            <a href="javascript:void(0)" data-bind="visible: $root.Coc_PageList().length > 1">
                                                                <i class="fa fa-step-forward" aria-hidden="true"></i>
                                                            </a>
                                                            <div class="total-recos">
                                                                <span data-bind="text: $root.Coc_PageView"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="tab-pane" data-bind="attr: { id: 'anhlieutrinh_'+ ID }">
                                                <div class="flex flex-column ">
                                                    <div class="table-res">
                                                        <table class="table">
                                                            <tr>
                                                                <th>Ngày lập hóa đơn</th>
                                                                <th>Mã gói dịch vụ</th>
                                                                <th>
                                                                    Mã hóa đơn
                                                                </th>
                                                                <th>Ghi chú</th>
                                                                <th class="text-center">Ảnh</th>
                                                            </tr>
                                                            <tbody data-bind="foreach: $root.ListAnhLieuTrinh">
                                                                <tr>
                                                                    <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm:ss')"></td>
                                                                    <td>
                                                                        <a href="javascript:void(0)" data-bind="text: MaPhieuThu"></a>
                                                                    </td>
                                                                    <td>
                                                                        <a href="javascript:void(0)" data-bind="text: MaHoaDon, click: $root.AnhLieuTrinh_ShowHoaDon"></a>
                                                                    </td>
                                                                    <td data-bind="text: GhiChu"></td>
                                                                    <td class="text-center">
                                                                        <a href="javascript:void(0)"
                                                                           title="Click để xem ảnh"
                                                                           data-bind="click: $root.AnhLieuTrinh_ShowImg">
                                                                            <i class="fa fa-image"></i>
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="page">
                                                        <div class="flex flex-end">
                                                            <a href="javascript:void(0)"
                                                               data-bind="visible: $root.AnhLieuTrinh_totalPage() > 1 && $root.AnhLieuTrinh_CurrentPage() > 1,
                                                               click: $root.AnhLieuTrinh_Prev,">
                                                                <i class="fa fa-caret-left" aria-hidden="true"></i>
                                                            </a>
                                                            <ul data-bind="foreach: $root.AnhLieuTrinh_PageList, visible: $root.AnhLieuTrinh_totalPage() > 1">
                                                                <li>
                                                                    <a href="javascript:void(0)"
                                                                       data-bind="text: $data,
                                                                               click: $root.AnhLieuTrinh_GotoPage,
                                                                               css: {click: $data == $root.AnhLieuTrinh_CurrentPage()}
                                                                              "></a>
                                                                </li>
                                                            </ul>
                                                            <a href="javascript:void(0)"
                                                               data-bind="visible: $root.AnhLieuTrinh_totalPage() > 1 && $root.AnhLieuTrinh_CurrentPage() < $root.AnhLieuTrinh_totalPage(),
                                                               click: $root.AnhLieuTrinh_Next,">
                                                                <i class="fa fa-caret-right" aria-hidden="true"></i>
                                                            </a>
                                                            <div class="total-recos">
                                                                <span data-bind="text: $root.AnhLieuTrinh_PageView"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <!--/ko-->
                        </tbody>
                        <!--ko if: $root.RoleXemTongDoanhThu() -->
                        <tfoot data-bind="visible: DoiTuongs().length > 0">
                            <tr class="border-bottom bold bg12">
                                <td></td>
                                <td class=" @commonEnum.ColumnKhachHang.madoituong ">Tổng cộng</td>
                                <td class=" @commonEnum.ColumnKhachHang.tendoituong "></td>
                                <td class=" @commonEnum.ColumnKhachHang.dienthoai "></td>
                                <td class=" @commonEnum.ColumnKhachHang.nhomkhach "></td>
                                <td class=" @commonEnum.ColumnKhachHang.gioitinh "></td>
                                <td class=" @commonEnum.ColumnKhachHang.ngaysinh "></td>
                                @*<td class=" @commonEnum.ColumnKhachHang.email "></td>
                                <td class=" @commonEnum.ColumnKhachHang.masothue "></td>
                                <td class=" @commonEnum.ColumnKhachHang.sotaikhoan "></td>*@
                                <td class=" @commonEnum.ColumnKhachHang.diachi "></td>
                                <td class=" @commonEnum.ColumnKhachHang.tinhthanh "></td>
                                <td class=" @commonEnum.ColumnKhachHang.quanhuyen "></td>
                                <td class=" @commonEnum.ColumnKhachHang.nguonkhach "></td>
                                <td class=" @commonEnum.ColumnKhachHang.nguoigioithieu "></td>
                                <td class=" @commonEnum.ColumnKhachHang.nvphutrach "></td>
                                <td class=" @commonEnum.ColumnKhachHang.nguoitao  text-right"></td>
                                <td class=" @commonEnum.ColumnKhachHang.ngaytao  text-right"></td>
                                <td class=" @commonEnum.ColumnKhachHang.nohientai  text-right" data-bind="text: formatNumber3Digit(NoHienTaiAll())"></td>
                                @*<td class=" @commonEnum.ColumnKhachHang.tongban  text-right" data-bind="text: formatNumber3Digit(TongBanAll())"></td>*@
                                <td class=" @commonEnum.ColumnKhachHang.tongbantrutrahang  text-right" data-bind="text: formatNumber3Digit(TongBanTruTraHangAll())"></td>
                                <td class=" @commonEnum.ColumnKhachHang.tongthuKhach   text-right" data-bind="text: formatNumber3Digit(SumTongThuKhachHang())"></td>
                                <td class=" @commonEnum.ColumnKhachHang.tongChiKhach  text-right" data-bind="text: formatNumber3Digit(SumTongChiKhachHang())"></td>
                                <td class=" @commonEnum.ColumnKhachHang.gtriDVSuDung  text-right" data-bind="text: formatNumber3Digit(SumGiaTriDVSuDung())"></td>
                                <td class=" @commonEnum.ColumnKhachHang.gtriDVKhachTra  text-right" data-bind="text: formatNumber3Digit(SumGiaTriDVHoanTra())"></td>
                                @*<td class=" @commonEnum.ColumnKhachHang.tongtichdiem  text-right" data-bind="text: formatNumber3Digit(TongTichDiemAll())"></td>
                                <td class=" @commonEnum.ColumnKhachHang.ngaygiaodichgannhat"></td>
                                <td class=" @commonEnum.ColumnKhachHang.trangthaikhachhang  text-right"></td>*@
                                <td class=" @commonEnum.ColumnKhachHang.ghichu  text-right"></td>
                            </tr>
                        </tfoot>
                        <!--/ko-->
                        <tfoot class="Report_Empty" data-bind="visible: DoiTuongs().length === 0">
                            <tr class="text-center">
                                <td colspan="20"><i>Không có dữ liệu </i></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="page flex flex-between" id="divPaging">
                    <div class="flex flex-row">
                        <label class="css-form-label">Số bản ghi:</label>
                        <select id="SelecttedPage" class="form-control seleted-page" data-bind="value: pageSize,
                                                options: pageSizes, event: {change: ResetCurrentPage}"></select>
                    </div>
                    <div class="flex flex-end">
                        <a href="javascript:void(0)" data-bind="click: $root.StartPage, visible: VisibleStartPage "><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                        <a href="javascript:void(0)" data-bind="click: $root.BackPage, visible: VisibleStartPage "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                        <ul data-bind="foreach: PageList">
                            <li>
                                <a href="javascript:void(0)" data-bind="text: pageNumber, click: $root.GoToPage, css: $root.GetClass($data)"></a>
                            </li>
                        </ul>
                        <a href="javascript:void(0)" data-bind="click: $root.GoToNextPage, visible: VisibleEndPage"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                        <a href="javascript:void(0)" data-bind="click: $root.EndPage, visible: VisibleEndPage"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                        <div class="total-recos">
                            Hiển thị <span data-bind="text: fromitem"></span> - <span data-bind="text: toitem"></span> trên tổng số
                            <span data-bind="text: TotalRecord"></span> khách hàng
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="model-images">
            <div class="model-imagesinner" data-bind="foreach: $root.ImageIsZoom">
                <img data-bind="attr: {src: Open24FileManager.hostUrl + URLAnh}" />
            </div>
            <a href="javascript:void(0)" class="deletelistimg" data-bind="click: $root.CloseZoom"><i class="fa fa-close"></i></a>
        </div>
        <!-- Modal -->
    </div>
    <div id="myModalinport" class="modal fade">
        <div id="modalContainer_NhomHHDV" class="modal-dialog draggable modal-lg">
            <div class="modal-content ">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
                    <h4 class="modal-title">Nhập khách hàng từ File dữ liệu</h4>
                </div>
                <div class="modal-body">
                    <div class=" printinport">
                        <div class=" excel-file flex flex-column" id="importNhapHang">
                            <div data-bind="visible: visibleImport ">
                                <h5 class="no-magrin">Nhập khách hàng từ file Excel - <a href="#" class="link-text" style="float:none;"> Hướng dẫn </a></h5>
                                <div class="title-inport "> Tải về File mẫu <span class="blue " data-bind="click: DownloadFileTeamplateXLS"> Excel 2003</span>  hoặc<span class="blue" data-bind="click: DownloadFileTeamplateXLSX"> bản cao hơn</span></div>
                            </div>
                            <div class="choose-file">
                                <span class="btn btn-import ClickSelectFile btn-file form-control no-magrin" data-bind="visible: visibleImport ">
                                    Chọn file dữ liệu
                                    <input type='file' id="imageUploadFormKH" name="image" data-bind="event:{ change: SelectedFileImport }"
                                           accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" />
                                </span>
                                <div class="list-file flex flex-row" style="margin-bottom:15px">
                                    <div class="flex flex-row filterFileSelect">
                                        <span data-bind="text: fileNameExcel"></span>
                                        <div class="delete-file" data-bind="click: refreshFileSelect">
                                            <i class="fa fa-close"></i>
                                        </div>
                                    </div>
                                    <button class="btn btn-main height-30 imgUploadClick" alt="Upload" data-bind="visible:notvisibleImport">
                                        <i class="material-icons">folder</i>
                                    </button>
                                </div>
                                <div class="flex flex-center">
                                    <button class="btn btn-main btnImportExcel" id="saveImageFolder" data-bind="click: insertArticleNews" style="display: none;"><i class="fa fa-floppy-o"></i> Thực hiện</button>
                                </div>
                            </div>
                        </div>
                        <div class="bg-warning padding-10 text-center NoteImport">
                            <h5 class="title-alert"><i class="fa fa-warning"></i> Lưu ý</h5>
                            <div>Bạn vui lòng nhập đúng định dạng hàng cột theo file Excel mẫu .</div>
                            <div>Hệ thống cho phép nhập tối đa 6000 khách hàng mỗi lần từ file Excel 2003 hoặc bản cao hơn .</div>
                            <div>Click vào checkbook "đồng ý..." nếu bạn muốn tiếp tục import dữ liệu bằng cách bỏ qua dữ liệu sai.</div>
                        </div>
                    </div>
                    <div class="BangBaoLoi">
                        <div class="error-data">
                            <h2 class="pull-left title">Bảng thông báo lỗi</h2>
                        </div>
                        <div class="table-reponsive table_price table_error">
                            <table class="table table-striped table-hover table-wh table_h3">
                                <thead>
                                    <tr>
                                        <th>Tên trường dữ liệu</th>
                                        <th>Vị trí</th>
                                        <th>Thuộc tính</th>
                                        <th>Diễn giải<span class="pull-right red " data-bind="click: ShowandHide"><i class="fa fa-refresh fa-lg" aria-hidden="true"></i></span></th>
                                    </tr>
                                </thead>
                                <tbody data-bind="foreach: loiExcel">
                                    <tr>
                                        <td data-bind="text: TenTruongDuLieu"></td>
                                        <td data-bind="text: ViTri"></td>
                                        <td data-bind="text: ThuocTinh"></td>
                                        <td data-bind="text: DienGiai"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="flex flex-between file-all">
                            <label class="form-group pull-left continue-hh choseContinue">
                                <input type="checkbox" data-bind="checked: ContinueImport" value="0" />  Đồng ý bỏ qua lỗi và tiếp tục
                            </label>
                            <button type="button" class="btn btn-main pull-right startImport" id="btnLuuHangHoa" data-bind="click: DoneWithError">
                                <i class="fa fa-save"></i>&nbsp; Tiếp tục
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @*modal chuyển nhóm *@
    <div class="modal fade" id="modalMoveGroup">
        <div class="modal-dialog draggable modal-md ui-draggable">
            @Html.Action("_ChuyenNhom", new { area = "", Controller = "DoiTac" })
        </div>
    </div>

    <div class="modal fade in" id="modal_DieuChinhDiem">
        <div class="modal-dialog draggable modal-md">
            <div class="modal-content  ">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
                    <h4 class="modal-title" id="myModalLabel">
                        Điều chỉnh
                    </h4>
                </div>
                <div class="modal-body ">

                    <div class="form-group floatleft">
                        <label class="css-form-label ">
                            Điểm hiện tại
                        </label>
                        <div class="css-form-detail" data-bind="text: formatNumber3Digit(PageKH_KHDoing().TongTichDiem)"></div>
                    </div>
                    <div class="form-group floatleft">
                        <label class="css-form-label ">Ngày điều chỉnh</label>
                        <div class="css-form-detail">
                            <input type="text" class="form-control" data-provide="datepicker" data-date-format="dd/mm/yyyy" disabled="disabled"
                                   data-bind="value: NgayDieuChinh">

                            <i class="fa fa-calendar" style="position:absolute; right:7px; top:3px"></i>
                        </div>
                    </div>
                    <div class="form-group floatleft">
                        <label class="css-form-label ">Điểm mới </label>
                        <div class="css-form-detail">
                            <input type="text" autofocus class="form-control" onkeyup="return formatNumberObj(this)" onkeypress="return keypressNumberSign(event)"
                                   data-bind="value: DiemDieuChinh">
                        </div>
                    </div>
                    <div class="form-group floatleft">
                        <label class="css-form-label ">Mô tả</label>
                        <div class="css-form-detail">
                            <textarea placeholder="Mô tả" data-bind="value: GhiChuQuyHD"></textarea>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-main" id="btnDieuChinh" data-bind="click: InsertQuyHoaDon_TichDiem">
                        <i class="fa fa-check-square"></i> Cập nhật
                    </button>
                    <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i> Bỏ qua</button>

                </div>
            </div>
        </div>
    </div>

    @*thẻ giá trị*@
    <div class="modal fade op-js-modal" id="modalPopup_thegiatri">
        <div class="modal-dialog draggable">
            <div class="modal-content  ">
                <div class="modal-header ">
                    <button class="close close-modal" type="button" data-dismiss="modal"><i class="material-icons">close</i></button>
                    <h4 class="modal-title">Điều chỉnh thẻ giá trị</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group" data-bind="visible: $root.TGT_ID() == null ">
                        <label class="css-form-label">Số dư hiện tại:</label>
                        <div class="form-news">
                            <input type="text" id="txtSoDuPopup" autofocus onkeyup="return formatNumberObj(this)" class="form-control">
                        </div>
                    </div>
                    <!-- ko if: $root.TGT_ID() !== null-->
                    <div class="form-group">
                        <label class="css-form-label">Mã phiếu:</label>
                        <div class="form-news">
                            <input type="text" class="form-control" readonly data-bind="value: $root.MaDieuChinh()">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="css-form-label">Giá trị điều chỉnh:</label>
                        <div class="form-news">
                            <input type="text" class="form-control" readonly data-bind="value: formatNumber3Digit($root.GiaTriDieuChinh())">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="css-form-label">Ngày điều chỉnh:</label>
                        <div class="form-news">
                            <input type="text" class="form-control" readonly data-bind="value: $root.NgayDieuChinh()">
                        </div>
                    </div>
                    <!--/ko-->
                    <div class="form-group" data-bind="visible: $root.TGT_ID() == null ">
                        <label class="css-form-label">Trạng thái:</label>
                        <div class="form-news">
                            <select class="form-control" id="ddltrangthaithe" data-bind="options: TrangThaiTheGT,
                                                optionsText: 'TrangThai', optionsValue: 'value',
                                                value: $root.TrangThaiTheGiaTriChoose"></select>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-cancel" data-dismiss="modal">
                        <i class="fa fa-ban"></i>Bỏ qua
                    </button>
                    <button type="button" class="btn btn-cancel" data-bind="click: $root.TGT_HuyPhieuDieuChinh, visible: $root.TGT_ID() != null">
                        <i class="fa fa-times"></i>Xóa
                    </button>
                    <button type="button" class="btn btn-save" data-bind="click: $root.LuuTrangThaiThe, visible: $root.TGT_ID() == null">
                        <i class="fa fa-save" aria-hidden="true"></i> Lưu
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="custometimemodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog draggable" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Tùy chọn thời gian</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
                </div>
                <div class="modal-body">
                    <div class="flex flex-between">
                        <div class="flex align-items-center custometimemodal-time-wrap">
                            <span>Từ &nbsp;</span>
                            <input class="form-control datepicker" data-bind="value: DateRangeThe_From">
                        </div>
                        <div class="flex align-items-center custometimemodal-time-wrap">
                            <span>&nbsp; đến &nbsp;</span>
                            <input class="form-control datepicker" data-bind="value: DateRangeThe_To">
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-save" data-bind="click: SearchTheGiaTri">Xong</button>
                    <button type="button" class="btn btn-cancel" data-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modalPopuplg_Contact">
    <div class="modal-dialog draggable modal-lg">
        @Html.Partial("_ThemMoiLienHe")
    </div>
</div>
<div id="modalWork">
    <div class="modal fade" id="modalPopuplg_Work">
        <div class="modal-dialog draggable modal-lg">
            @Html.Partial("~/Views/Marketing/_CongViec_LichHen.cshtml")
        </div>
    </div>
    <div class="modal fade" id="modalTypeWork">
        <div class="modal-dialog modal-md">
            @Html.Partial("_ModalTypeWork")
        </div>
    </div>
    <div class="modal fade" id="modal_QuestionUpdateEvent">
        <div class="modal-dialog draggable modal-sm">
            @Html.Partial("~/Views/Marketing/_QuestionUpdateEvent.cshtml")
        </div>
    </div>
</div>
<script src="~/Scripts/Components/Input.js"></script>
<script src="~/Scripts/Components/NhanVien_KhachHang.js"></script>
@Html.Partial("~/Views/Gara/HoaDon/_ThuTienHoaDon.cshtml")
@Html.Partial("~/Views/Gara/HoaDon/_ThongTinHoaDon.cshtml")
@Html.Partial("~/Views/Gara/HoaDon/_EditHoaHongHD.cshtml")
@Html.Partial("~/Views/Gara/KhachHang/_ThemNhomKhachHang.cshtml")
@Html.Partial("~/Views/Gara/KhachHang/_ThemMoiKhachHang.cshtml")
@Html.Partial("~/Views/Gara/KhachHang/_vmTrangThai_NguonKhach.cshtml")
@Html.Partial("~/Views/GiaoDich/_HoaDonNapThePartial.cshtml")
@Html.Partial("~/Views/Gara/_ThongTinThanhToanKH.cshtml")
@Html.Partial("~/Views/Gara/KhachHang/_DieuChinhCongNo.cshtml")
@Html.Partial("~/Views/Gara/_NapTienDatCoc.cshtml")
@Html.Partial("~/Views/SoQuy/_ThemKhoanThuChi.cshtml")
@Html.Partial("~/Views/SoQuy/_ThemPhieuThuChi.cshtml")
@Html.Partial("~/Views/DoiTac/_UpAnhHoaDon.cshtml")
@Html.Partial("~/Views/Gara/_ThanhPhanDinhLuong.cshtml")
@Html.Partial("~/Views/Gara/HoaDon/_TatToanTheGiaTri.cshtml")

<div class="modal " id="modalPopuplgDelete">
    <div class="modal-dialog modal-md draggable ui-draggable">
        @Html.Action("_modalDelete", new { area = "", Controller = "GiaoDich" })
    </div>
</div>
<script>
    $('#tatcanhh').on('click', function () {
        $('.ss-li').removeClass('yellow');
        if (!$(this).hasClass('yellow')) {
            $(this).addClass('yellow');
        }
    })
    $('.treeview').on('click', 'li', function () {
        $('.ss-li').removeClass('yellow');
        $('#tatcanhh').removeClass('yellow');
        $(this).addClass('yellow');
    })
    $(".c-goods").click(function () {
        $(this).prev(".add-goods").show();
        $(this).hide();
        $(this).parent(".close-goods").prev("ul,.op-filter-container").removeClass("scoll-r")
    });
    $(".add-goods").click(function () {
        $(this).next(".c-goods").show();
        $(this).hide();
        $(this).parent(".close-goods").prev("ul,.op-filter-container").addClass("scoll-r")
    });
    //$('#modalNapTaiKhoan').modal('show')
    var funcName = '@RoleKey.KhachHang';
    var heigth = 0;
    var heightold = 0;
    var setTop = 0;
    function SetHeightShowDetail($this) {
        setTop = 35 + parseInt($this.parent('tr').height() * ($this.parent('tr').index() / 2));
        $("#tblList").toggleClass("table_re");
        $(".prev-tr-hide td").not($this.parent("tr").find("td")).removeClass("bg-gray");
        $(".check-group").not($this.parent("tr").find(".check-group")).removeClass("bor-right");
        $this.parent("tr").find(".check-group").toggleClass("bor-right");
        $this.parent().children('td').toggleClass("bg-gray");
        $this.parent().children('td').toggleClass("bor");
        var t = $this.parent().next(".op-js-tr-hide").css("display");
        if (t == "none") {
            if (parseInt($('#SelecttedPage').val()) >= 20) {
                $(".table-reponsive").removeClass('height470');
            }
            $(".op-js-tr-hide").removeClass("ac");
            $this.parent().next(".op-js-tr-hide").addClass("ac");
            heightold = $this.parent('tr').next(".op-js-tr-hide").height();
            heigth = parseInt($this.parent('tr').height()) + heightold;
            $('.line-right').height(heigth).css("margin-top", setTop + "px");
        }
        else if (t == "block") {
            if (parseInt($('#SelecttedPage').val()) >= 20) {
                $(".table-reponsive").addClass('height470');
            }
            $this.parent().next(".op-js-tr-hide").removeClass("ac");
            $('.line-right').height(0).css("margin-top", "0px");
        }
        else {
            if (parseInt($('#SelecttedPage').val()) >= 20) {
                $(".table-reponsive").addClass('height470');
            }
            $(".op-js-tr-hide").removeClass("ac");
            $('.line-right').height(0).css("margin-top", "0px");
        }
    }
    function LoadGetHeight() {
        sleep(100).then(() => { setHeight(); });
        $('.datetime-ranger').daterangepicker({
            locale: {
                "format": 'DD/MM/YYYY',
                "separator": " - ",
                "applyLabel": "Áp dụng",
                "cancelLabel": "Hủy",
                "fromLabel": "Từ",
                "toLabel": "Đến",
                "customRangeLabel": "Custom",
                "daysOfWeek": [
                    "CN",
                    "T2",
                    "T3",
                    "T4",
                    "T5",
                    "T6",
                    "T7"
                ],
                "monthNames": [
                    "Tháng 1",
                    "Tháng 2",
                    "Tháng 3",
                    "Tháng 4",
                    "Tháng 5",
                    "Tháng 6",
                    "Tháng 7",
                    "Tháng 8",
                    "Tháng 9",
                    "Tháng 10",
                    "Tháng 11",
                    "Tháng 12"
                ],
                "firstDay": 1
            }
        });
    };
    function setHeight() {
        heigth = heigth - heightold;
        $('#tblList tr').each(function () {
            if ($(this).hasClass('ac')) {
                heightold = $(this).height();
            }
        });
        heigth += heightold;
        $('.line-right').css("margin-top", setTop + "px").height(heigth);
    }
    $("#tblList").delegate("tbody .prev-tr-hide .td-click", "click", function () {
        sleep(200).then(() => { SetHeightShowDetail($(this)); });
    });
    $('#tblList').on('click', '.tr-conttact-show', function () {
        var display = $(this).next().css('display');
        $('.tr-conttact-hide').hide().removeClass('active-border');
        if (display === 'none') {
            $(this).next().addClass('active-border').show();
        }
    });
    $('.table-hover-news').on('click', '.list-button button', function () {
        if (!$(this).hasClass('btn-main')) {
            $(this).closest('.list-button').find('.datetime-ranger').removeClass('active');
            $(this).closest('.list-button').find('button').each(function () {
                $(this).removeClass('active');
            });
            $(this).addClass('active');
        }
    });
    $(function () {
        $('.table-hover-news').on('click', '.datetime-ranger', function () {
            $(this).closest('.list-button').find('button').each(function () {
                $(this).removeClass('active');
            });
            $(this).addClass('active');
        })
    });
    $.datetimepicker.setLocale('vi');
    $('.input-khach-hang').on('click', function () {
        //$('.drop-list-khach-hang').toggle();
        $(".drop-list-khach-hang").mouseup(function () {
            return false;
        });
        $('.input-khach-hang').mouseup(function () {
            return false;
        });
        $(document).mouseup(function () {
            $(".drop-list-khach-hang").hide();
        });
    })
</script>
<script>
    $('#tblList').on('click', ".op-js-tr-hide .tab-pane .tab-mr-header-r .tr-show", function () {
        var css = $(this).next(".tr-hide").css('display');
        $(".tr-hide").hide();
        $(".tr-show").removeClass('tr-active-1');
        if (css === 'none') {
            $(this).addClass('tr-active-1');
            $(this).next(".tr-hide").toggle();
        }
        else {
        }
        var height1 = $(this).closest('tbody').closest('table').closest('.table-res ').closest('.tab-content').closest('.tab-mr-header-r').closest('.op-js-tr-hide').height();
        $('.line-right').height(height1 + 30);
    });

    var loaiDoiTuong = 1;
    $(document).ready(function () {
        $(".toggle").not('.js-toogle').on("click", function () {

            $(this).toggleClass("active-re");
        })
    })
    var $remaining = $('#remaining'),
        $messages = $remaining.next();
    $('#txtNoiDungTin').keyup(function () {
        !(/^[A-z&#209;&#241;!-9-\s]*$/i).test(this.value) ? this.value = this.value.replace(/[^A-z&#209;&#241;!-9-\s]/ig, '') : null;
        var chars = this.value.length,
            messages = Math.ceil(chars / 140),
            remaining = messages > 1 ? (messages - 1) * 140 + (chars % ((messages - 1) * 140) || (messages - 1) * 140) : (messages - 1) * 140 + (chars % (messages * 140) || messages * 140);
        var totalmes = messages * 140;
        if (messages !== 0) {
            $remaining.text(remaining + '/' + totalmes);
            $messages.text(' (' + messages + ' tin nhắn)');
        }
        else {
            $remaining.text("");
            $messages.text("");
        }
    });
</script>
<script src="@Html.WriteRenderFile(Scripts.Url("~/bundles/DoiTac"))" type="text/javascript"></script>
<script>
    expand_sts = window.localStorage;
    $("#shownhapxuat").click(function () {
        if ($((".btnExport")).hasClass("forcehide")) {
            expand_import();
        } else {
            hide_import();
        }
    });
    if (localStorage.getItem("expand_sts") == "open") {
        expand_import();
    } else {
        hide_import();
    }
    function expand_import() {
        if ($("html").width() > 425) {
            $(".btnImport").removeClass("forcehide");
            $((".btnExport")).removeClass("forcehide");
            localStorage.setItem("expand_sts", "open");
        }
    };
    function hide_import() {
        if ($("html").width() > 425) {
            $(".btnImport").addClass("forcehide");
            $((".btnExport")).addClass("forcehide");
            localStorage.setItem("expand_sts", "close");
        }
    };
    $(function () {
        $('.datepicker').datetimepicker(
            {
                format: "d/m/Y",
                mask: true,
            });
    })
</script>
<script>
    $(document).ready(function () {
        $('.modal-dialog').draggable({
            handle: ".modal-header"
        });
    })
</script>