@using System.Web.Optimization
@using Model
@using banhang24.Hellper;
@{
    ViewBag.Title = "Open24.vn - Hàng hóa";
    Layout = null;
}
<script>
    $(document).ready(function () {
        var lc_CTQuyen = JSON.parse(localStorage.getItem('lc_CTQuyen'));
        if ($.inArray('HangHoa_ThemMoi', lc_CTQuyen) > -1) {
            $('.addHHH').css('display', 'block');
        }
        if ($.inArray('HangHoa_XuatFile', lc_CTQuyen) > -1) {
            $('.btnExport').show();
        }
        if ($.inArray('HangHoa_Import', lc_CTQuyen) > -1 && $.inArray('HangHoa_ThemMoi', lc_CTQuyen) > -1 && $.inArray('HangHoa_CapNhat', lc_CTQuyen) > -1) {
            $('.btnImport').show();
        }
        $(".dshh1 a").click(function () {
            $('#txtTenHangHoa1').focus();
        });
        $(".dshh2 a").click(function () {
            $('.fvy1').focus();
        });
        $(window.document).on('shown.bs.modal', '.modal', function () {
            window.setTimeout(function () {
                $('[autofocus]', this).focus();
                $('[autofocus]').select();
            }.bind(this), 100);
        });
    });
</script>
<style>
    jqauto-car ._jsInput {
        font-weight: 600 !important;
    }

    .bx-viewport {
        overflow-x: scroll;
        overflow-y: hidden;
    }

    .detail-panel {
        overflow: scroll;
        overflow-x: hidden;
        background-color: white;
        position: fixed;
        top: 127px;
        z-index: 999999999;
        left: 0;
        width: calc(100vw - 250px);
        height: calc(100vh - 150px);
        display: none;
    }

    .product-check {
    }

    .btn btn-main {
        margin-bottom: 0
    }

    .ui-menu .ui-menu-item a {
        padding: 13px 0 10px 10px !important;
    }

    #myTable th .col-md-3 {
        padding-right: 0px;
    }

    #myTable th .col-md-9 {
        padding-right: 0px;
        padding-left: 0px;
    }

    .tr-hide-detailsolo {
        border: 1px solid #d1d2d9;
    }

    .inport-kv {
        border-width: 1px;
        float: right;
        background-color: #fff;
        border-color: #e1e1e1;
        width: 20px;
        height: 30px;
        border-top: 1px solid #cccccc;
        border-bottom: 1px solid #cccccc;
        border-left: 1px solid #cccccc;
        margin-left: -5px;
    }

        .inport-kv span {
            margin: 0px 0px 0px 7px;
            line-height: 30px;
        }

    .number-search {
        text-align: right;
        border-radius: 0px;
    }

    .tr-show td .col-md-9 {
        padding: 0px;
    }

    .list-kv {
        position: absolute;
        top: 30px;
        left: 10px;
        width: 160px;
        max-width: 160px;
        border: 1px solid #ccc;
        padding: 10px;
        border-top: none;
        max-height: 180px;
        overflow: scroll;
        overflow-x: hidden;
        display: none;
        background: #fff;
        z-index: 99;
    }

        .list-kv ul li {
            padding: 6px;
            font: 400 14px menu;
        }

            .list-kv ul li a {
                color: black;
            }

        .list-kv li:hover {
            background-color: #32b7b3 !important;
            color: white !important;
        }


    #baoduong_HH th, #baoduong_HH td,
    #baoduong_DV th, #baoduong_DV td {
        padding: 6px;
    }

    #baoduong_HH th,
    #baoduong_DV th {
        background-color: var(--color-main);
        color: white;
    }

    .text-underline {
        text-decoration: underline !important;
        margin-left: 5px !important;
    }

    .input-label {
        margin-left: 0 !important;
    }
</style>
@Html.Hidden("nganhkinhdoanh", @CookieStore.GetCookieAes("shop"), new { @id = "nganhkinhdoanh" })
<div class="op-container">
    <div class="container-fluid nopadding">
        <div class="col-left">
            <div class="op-filter">
                <section class="op-filter-body">
                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/Iconbanhanggg-02.png" />
                            <span>  Nhóm hàng</span>
                        </h3>
                        <button class="op-filter-add" title="Thêm nhóm hàng"
                                data-bind="visible: $root.role_InsertProduct(), click: $root.showModalNhomHang">
                            <i class="fa fa-plus" style="font-size:15px"></i>
                        </button>
                        <aside class="op-filter-container">
                            <div class="seach-nhomhang">
                                <i class="fa fa-search" style="display:inline-block"></i>
                                <input type="text" class="seach-nhomhang" data-bind="event: {keyup: NoteNhomHang}" autocomplete="off" id="SeachNhomHang" placeholder="  Tìm kiếm nhóm hàng" style="display:inline-block; width: calc(100% - 15px)" />
                            </div>
                            <div id="tatcanhh" class="treename" data-bind="click: getAllDMHangHoas">
                                <i class="fa fa-angle-right" aria-hidden="true"></i> Tất cả
                                <a class="op-js-themmoinhomhang" href="javascript:void(0)"><i class="fa fa-pencil-square-o"></i></a>
                            </div>
                            <ul class="treeview floatleft li-more-level" id="treeviewnhomhang" data-bind="foreach: NhomHangHoas">
                                <li class="ss-li">
                                    <div class="li-top li-oo" data-bind="attr:{id: ID}">
                                        <span class="treename" data-bind="text: TenNhomHangHoa, click: $parent.changeddlNhomHangHoa"></span>
                                        <a href="#" data-bind="click: $parent.editNhomHangHoa, visible: ID !== '00000000-0000-0000-0000-000000000001' && ID !== '00000000-0000-0000-0000-000000000000'" class="square"><i class="fa fa-pencil-square-o"></i></a>
                                        <style>
                                            .treename {
                                                line-height: 30px;
                                                width: 100%;
                                                float: left;
                                            }
                                        </style>
                                    </div>
                                    <span class="close-ul parent-node" onclick="ShowNhom($(this))" data-bind="visible: Childs.length >0 "><i class="fa fa-caret-right" aria-hidden="true"></i></span>
                                    <ul data-bind="foreach: Childs">
                                        <li>
                                            <div class="li-top li-oo" data-bind="attr:{id: ID}">
                                                <span data-bind="text: TenNhomHangHoa, click: $root.changeddlNhomHangHoa" class="li-top li-pp"></span>
                                                <a href="#" data-bind="click: $root.editNhomHangHoa"><i class="fa fa-pencil-square-o"></i></a>
                                            </div>
                                            <span class="close-ul parent-node" onclick="ShowNhom($(this))" data-bind="visible: Child2s.length >0 "><i class="fa fa-caret-right" aria-hidden="true"></i></span>
                                            <ul data-bind="foreach: Child2s">
                                                <li>
                                                    <div class="li-top li-oo" data-bind="attr:{id: ID}">
                                                        <span data-bind="text: TenNhomHangHoa, click: $root.changeddlNhomHangHoa" class="li-top li-pp"></span>
                                                        <a href="#" data-bind="click: $root.editNhomHangHoa"><i class="fa fa-pencil-square-o"></i></a>
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>

                        </aside>
                    </article>

                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <i class="far fa-ball-pile"></i>
                            <span> Nhóm hỗ trợ</span>
                        </h3>
                        <aside class="op-filter-container">
                            <div id="filterNhomHoTro">
                                <treeview-nhomhang :list-all="listNhomHang"
                                                   :list-search="listNhomHang"
                                                   :form-type="0"
                                                   :show-all="true"
                                                   :role-edit="modelHangHoa.role_NhomHangHoa_ThietLapNangCao()"
                                                   :id-chosing="null"
                                                   v-on:chose-item="ChoseItem"
                                                   v-on:edit-item="EditItem">
                                </treeview-nhomhang>
                            </div>
                        </aside>
                    </article>


                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/Iconbanhanggg-03.png" /> Loại hàng
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuCheckbox">
                                <ul>
                                    <li>
                                        <label><input type="checkbox" data-bind="checked: LoaiSP_HH" /> Hàng hóa</label>
                                    </li>
                                    <li>
                                        <label><input type="checkbox" data-bind="checked: LoaiSP_DV" /> Dịch vụ</label>
                                    </li>
                                    <li>
                                        <label><input type="checkbox" data-bind="checked: LoaiSP_CB" /> Combo</label>
                                    </li>
                                </ul>
                            </div>
                        </aside>
                    </article>
                    <article class="boxLeft" data-bind="visible: $root.arrThuocTinh().length > 0">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <i class="fa fa-list"></i>     Thuộc tính
                        </h3>
                        <aside class="op-filter-container scoll-tt" data-bind="foreach: $root.arrThuocTinh">
                            <ul>
                                <li>
                                    <div class="form-group floatleft">
                                        <div class="outselect ">
                                            <div class="choose-person floatleft " data-toggle="dropdown" data-bind="click: $root.LoadGiaTri">
                                                <ul>
                                                    <li class="li-input-span giatriload">
                                                        <span class="txtTenThuocTinh" data-bind="text: '---' + TenThuocTinh + '---', attr: {id: 'txtTenThuocTinh_' + ID}"></span>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="selec-person dropdown-menu">
                                                <ul>
                                                    <li data-bind="click: $root.hienThiGiaTri">
                                                        <span data-bind="text: '---' + TenThuocTinh + '---', attr: {id: 'txtGiaTri_' + ID}"></span>
                                                    </li>
                                                    <!--ko foreach: $root.arrGiaTriThuocTinh-->
                                                    <li data-bind="click: $root.hienThiGiaTri">
                                                        <span class="txtGiatri" data-bind="text: GiaTri, attr: {id: 'txtGiaTri_' + ID}"></span>
                                                    </li>
                                                    <!--/ko-->
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </aside>
                        @*<div class="close-goods">
                                <a class="add-goods" href="javascript:void(0)"><em>Xem thêm </em><i class="fa fa-caret-down "></i></a>
                                <a class="c-goods" href="javascript:void(0)"><em>Thu gọn</em> <i class="fa fa-caret-up "></i></a>
                            </div>*@
                    </article>
                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/Iconbanhanggg-04.png" />       Tồn kho
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuRadio">
                                <ul>
                                    <li>
                                        <label><input type="radio" name="rdTonKho" data-bind="checked: Loc_TonKho,checkedvalue: true" value="0" /> Tất cả</label>
                                    </li>
                                    <li>
                                        <label><input type="radio" name="rdTonKho" data-bind="checked: Loc_TonKho, checkedvalue: true" value="3" /> Dưới định mức tồn</label>
                                    </li>
                                    <li>
                                        <label><input type="radio" name="rdTonKho" data-bind="checked: Loc_TonKho, checkedvalue: true" value="4" /> Vượt định mức tồn</label>
                                    </li>
                                    <li>
                                        <label><input type="radio" name="rdTonKho" data-bind="checked: Loc_TonKho, checkedvalue: true" value="1" /> Còn hàng trong kho</label>
                                    </li>
                                    <li>
                                        <label><input type="radio" name="rdTonKho" data-bind="checked: Loc_TonKho" value="5" /> Hàng âm kho</label>
                                    </li>
                                    <li>
                                        <label><input type="radio" name="rdTonKho" data-bind="checked: Loc_TonKho" value="6" /> Hàng có tồn = 0</label>
                                    </li>
                                </ul>
                            </div>
                        </aside>
                    </article>
                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/Iconbanhanggg-05.png" />    Trạng thái kinh doanh
                        </h3><span></span>
                        <aside class="op-filter-container">
                            <div class="menuRadio">
                                <ul>
                                    <li>
                                        <label><input type="radio" name="rdTuyChon" data-bind="checked: Loc_TinhTrangKD, checkedvalue: true" value="0" /> Tất cả</label>
                                    </li>
                                    <li>
                                        <label><input type="radio" name="rdTuyChon" data-bind="checked: Loc_TinhTrangKD, checkedvalue: true" value="1" /> Hàng đang kinh doanh</label>
                                    </li>
                                    <li>
                                        <label><input type="radio" name="rdTuyChon" data-bind="checked: Loc_TinhTrangKD, checkedvalue: true" value="2" /> Hàng ngừng kinh doanh</label>
                                    </li>
                                </ul>
                            </div>
                        </aside>
                    </article>

                    <article class="boxLeft supplier">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <i class="fas fa-toggle-off"></i> Trạng thái hàng
                        </h3>
                        <aside class="op-filter-container ">
                            <div class="in-debt">
                                <div class="form-group">
                                    <label class="css-form-label">
                                        <input type="radio" value="2" data-bind="checked: $root.Loc_TrangThaiXoa"> Tất cả
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label">
                                        <input type="radio" value="0" data-bind="checked: $root.Loc_TrangThaiXoa"> Đang sử dụng
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="css-form-label">
                                        <input type="radio" value="1" data-bind="checked: $root.Loc_TrangThaiXoa">  Đã xóa
                                    </label>
                                </div>
                            </div>
                        </aside>
                    </article>
                </section>
                <div class="op-filter-footer">
                    <button type="button" class="btn btn-link" style="color:red" onclick="closeFilter()">Hủy</button>
                    <button type="button" class="btn btn-link" onclick="collapseSubFilter(this)">
                        <span>Thu gọn</span>
                    </button>
                    <button type="button" class="btn btn-link" style="display:none" onclick="expandSubFilter(this)">
                        <span>Mở rộng</span>
                    </button>
                    <button type="button" class="btn btn-main kv2Btn" onclick="closeFilter()">Hoàn tất</button>
                </div>
            </div>
        </div>
        <div class="col-right">
            <div class="op-header container-fluid">
                <div class="op-header-title">
                    <h2 class="pull-left title"> @banhang24.Resources.ResourceTexts.Product / Danh mục </h2>
                </div>
                <div class="flex flex-between">
                    <div class=" header-button">
                        <div class="header-button-left">
                            <button type="button" class="btn btn-main dropdown-toggle btn-main btn-tro-ve" data-bind="click:BackAdd" aria-haspopup="true" aria-expanded="false" style="display:none">
                                <i class="fa fa-arrow-left" aria-hidden="true"></i>
                                <font>Quay về</font>
                            </button>
                            <div class="dropdown" style="display:inline-block">
                                <button type="button" class="btn btn-main addHHH  btn-main" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-plus" aria-hidden="true"></i>
                                    <font>Thêm mới</font> <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu " style="width:230px">
                                    <li><a href="javascript:void(0);" data-bind="click: themmoicapnhat">Hàng hóa</a></li>
                                    <!--ko if: $root.role_InsertDichVu() -->
                                    <li><a href="javascript:void(0);" data-bind="click: function(){ themmoicapnhatdichvu(2)}">Dịch vụ</a></li>
                                    <li><a href="javascript:void(0);" data-bind="click: function(){ themmoicapnhatdichvu(3)}">Combo</a></li>
                                    <!--/ko -->
                                </ul>
                            </div>
                            <div class="dropdown " style="display:inline-block; float:left; margin-right:5px">
                                <button class=" btn btn-main btn-group btnImport " type="submit" data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="true">
                                    <i class="fa fa-download"></i><font> @banhang24.Resources.ResourceTexts.ImportFile</font>
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu ">
                                    <li data-bind="click: $root.clickImportHangHoas" data-toggle="modal" data-target="#myModalinport">
                                        <a href="javascript:void(0);">Danh mục hàng hóa</a>
                                    </li>
                                    <li data-bind="click: function(){$root.showModalImport(1)}" data-toggle="modal">
                                        <a href="javascript:void(0);">Thành phần định lượng</a>
                                    </li>
                                </ul>
                            </div>
                            @*<button class="btn btn-main btn-group btnImport" style="display:none ;" type="submit" data-bind="click: clickImportHangHoas" data-toggle="modal" data-target="#myModalinport">
                                    <i class="fa fa-download"></i><font> @banhang24.Resources.ResourceTexts.ImportFile</font>
                                </button>*@
                            <button class="btn btn-main btn-group btnExport" id="btnExport" name="btnExport" style="display:none" data-bind="click: ExportDMHHtoExcel">
                                <i class="fa fa-file-excel-o"></i><font> Xuất file</font>
                            </button>
                            <button href="javascript:void(0)" class="btn btn-main showfiltercolumn img-filter-nang-cao" title="Tìm kiếm nâng cao">
                                <i class="glyphicon glyphicon-filter"></i>
                            </button>
                            <div class="collumn-filter" id="button-filter">
                                <button type="button" class="btn btn-main" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" onclick="showCollumnFilter(this)">
                                    <i class="fa fa-angle-double-down"></i>
                                </button>
                                <div class="dropdown-list">
                                    <ul>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox" id="cbmahang" checked="checked" value="0" /><span></span>Mã hàng hóa</label>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox cbtenhang" id="cbtenhang" checked="checked" value="1" /><span></span>Tên hàng</label>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox cbdvt" id="cbdvt" checked="checked" value="2" /><span></span>Đvt</label>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox" id="cbnhomhang" checked="checked" value="3" /><span></span>Nhóm hàng</label>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox" id="cbloaihang" checked="checked" value="4" /><span></span>Loại hàng</label>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox" id="cbgiaban" checked="checked" value="5" /><span></span>Giá bán</label>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox" id="cbgiavon" checked="checked" value="6" /><span></span>Giá vốn</label>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox" id="cbtonkho" checked="checked" value="7" /><span></span>Tồn kho</label>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox" id="cbghichu" checked="checked" value="8" /><span></span>Ghi chú</label>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="checkbox">
                                                <label><input type="checkbox" class="checkbox" id="cbtrangthai" checked="checked" value="9" /><span></span>Trạng thái</label>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex">
                        <div class="op-search">
                            <input type="text" placeholder="Tìm kiếm theo mã, tên hàng, ghi chú" autocomplete="off" id="txtSearchHH"
                                   data-bind="value: filter, valueUpdate: 'afterkeydown'" />
                            <button type="button" class="op-search-button" data-bind="click: $root.clickiconSearchHH">
                                <i class="fa fa-search op-search-icon"></i>
                            </button>
                        </div>
                        <button class="btn btn-main op-filter-toggle" onclick="showFilter()" title="Hiển thị bộ lọc">
                            <i class="material-icons">sort</i>
                        </button>
                    </div>
                </div>
                <div class="header-button-check choose-commodity ">
                    <div class="operation" style="display:inline-block">
                        <button type="button" class="btn btn-main no-magrin " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-bars"></i><font>Thao tác</font> <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu ">
                            <li data-bind="visible: $root.role_UpdateProduct()">
                                <a href="javascript:void(0)" data-bind="click: showChuyenNhomhang" data-toggle="modal">
                                    <i class="fa fa-external-link-square"></i> Chuyển nhóm hàng
                                </a>
                            </li>
                            <li data-bind="visible: $root.role_UpdateProduct()">
                                <a href="javascript:void(0)" data-bind="click: $root.chuyenNhomHoTro" data-toggle="modal">
                                    <i class="fa fa-sign-out"></i> Chuyển nhóm hỗ trợ
                                </a>
                            </li>
                            <li>
                                <a href="#" data-bind="click: getListChooseHH" data-toggle="modal" data-target="#mymodaltableprint">
                                    <i class="fa fa-barcode"></i> In mã vạch
                                </a>
                            </li>
                            <!--ko if: $root.role_UpdateProduct()-->
                            <li id="chokinhdoanh">
                                <a href="#" data-toggle="modal" data-target="#modalpopup_ChoKinhDoanh">
                                    <i class="fas fa-unlock"></i> Cho phép kinh doanh
                                </a>
                            </li>
                            <li id="ngungkinhdoanh">
                                <a href="#" data-toggle="modal" data-target="#modalpopup_NgungKinhDoanh">
                                    <i class="fa fa-lock"></i> Ngừng kinh doanh
                                </a>
                            </li>
                            <!--/ko-->
                            <!--ko if: $root.role_DeleteProduct()-->
                            <li class="xoaHH" style="display:none">
                                <a href="#" data-toggle="modal" data-target="#modalpopup_deleteTTHH">
                                    <i class="fas fa-trash"></i>    Xóa hàng hóa
                                </a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </div>
                    <div style="display:inline-block;line-height:24px; padding:3px 7px ; height:30px;">
                        Có <span><a href="#" data-toggle="modal" data-target="#mymodallist" data-bind="click: getListChooseHH"><span id="count"></span> mã hàng hóa</a> </span>được chọn <span onclick="RemoveCheckHH()"><a href="javascript:void(0)">&nbsp;&nbsp; - &nbsp;&nbsp; <i class="fa fa-times icon-del"></i>Bỏ chọn tất cả</a></span>
                    </div>
                </div>
            </div>
            <div class="content-table " id="myScrollspy">
                <div class="Content-add-hang-hoa" id="modalPopuplg_HHNew" style="max-height: calc(100vh - 150px);overflow: auto;" hidden>
                    @Html.Partial("_themmoihanghoaPartial")
                </div>
                <div class="Content-add-dich-vu" id="modalPopuplg_DVNew" style="max-height: calc(100vh - 150px);overflow: auto;" hidden>
                    @Html.Partial("_themmoidichvuPatial")
                </div>
                <div class="Content-table-hang-hoa" id="danhsachhanghoa">
                    <div class="table-reponsive table-HH banghh table-frame" id="table-reponsive">
                        <table class=" table-hover" id="myTable">
                            <thead class="thead-boder">
                                <tr>
                                    <th class="check-group check-group-main" data-type="number">
                                        <input class="checkboxsetHH" type="checkbox" onclick="SetCheckAllHH(this)" />
                                    </th>
                                    <!--ko if: ColumnsExcel().indexOf('0') < 0-->
                                    <th class="mahang" id="txtMaHang">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Mã hàng hóa</a>
                                    </th>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('1') < 0-->
                                    <th class="tenhang" id="txttenhang" data-bind="style: { display: ColumnsExcel().indexOf('1') > -1 ? 'none' : 'table-cell' }">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Tên hàng</a>
                                    </th>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('2') < 0-->
                                    <th class="tendvt" id="txttendonvitinh">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Đvt</a>
                                    </th>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('3') < 0-->
                                    <th class="nhomhang" id="txtnhomhang" data-bind="style: { display: ColumnsExcel().indexOf('3') > -1 ? 'none' : 'table-cell' }">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Nhóm hàng</a>
                                    </th>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('4') < 0-->
                                    <th class="loaihang" id="txtloaiHang" data-bind="style: { display: ColumnsExcel().indexOf('4') > -1 ? 'none' : 'table-cell' }">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Loại hàng</a>
                                    </th>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('5') < 0-->
                                    <th class="giaban op-number" id="txtgiaban" data-bind="style: { display: ColumnsExcel().indexOf('5') > -1 ? 'none' : 'table-cell' }">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Giá bán</a>
                                    </th>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('6') < 0-->
                                    <th class="giavon text-right" id="txtgiavon" data-bind="style: { display: ColumnsExcel().indexOf('6') > -1 ? 'none' : 'table-cell' }">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Giá vốn</a>
                                    </th>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('7') < 0-->
                                    <th class="tonkho text-right" id="txttonkho" data-bind="style: { display: ColumnsExcel().indexOf('7') > -1 ? 'none' : 'table-cell' }">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Tồn kho</a>
                                    </th>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('8') < 0-->
                                    <th class="ghichu" id="txtghichu" data-bind="style: { display: ColumnsExcel().indexOf('8') > -1 ? 'none' : 'table-cell' }">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Ghi chú</a>
                                    </th>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('9') < 0-->
                                    <th class="trangthai" id="txttrangthai" data-bind="style: { display: ColumnsExcel().indexOf('9') > -1 ? 'none' : 'table-cell' }">
                                        <a href="javascript:void(0)" style="color: black; text-decoration:none">Trạng thái</a>
                                    </th>
                                    <!--/ko-->
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="tr-show" hidden>
                                    <td class="text-center">
                                        <img src="/Content/images/icon/seach1.png">
                                        @{
                                            var keymahang = (int)GridHellper.ColumnHangHoa.mahanghoa;
                                            var keytenhang = (int)GridHellper.ColumnHangHoa.tenhanghoa;
                                            var keynhomhang = (int)GridHellper.ColumnHangHoa.nhomhang;
                                            var keyloaihang = (int)GridHellper.ColumnHangHoa.loaihang;
                                            var keygiaban = (int)GridHellper.ColumnHangHoa.giaban;
                                            var keygiavon = (int)GridHellper.ColumnHangHoa.giavon;
                                            var keytonkho = (int)GridHellper.ColumnHangHoa.tonkho;
                                            var keytrangthai = (int)GridHellper.ColumnHangHoa.trangthai;
                                        }
                                    </td>
                                    <!--ko if: ColumnsExcel().indexOf('0') < 0-->
                                    <td class="mahang">
                                        <input type="text" class="form-control search-grid" data-id="@keymahang">
                                    </td>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('1') < 0-->
                                    <td class="tenhang">
                                        <input type="text" class="form-control search-grid" data-id="@keytenhang">
                                    </td>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('2') < 0-->
                                    <td class="donvitinh"></td>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('3') < 0-->
                                    <td class="nhomhang">
                                        <select data-id="@keynhomhang" class="form-control" data-bind="options: NhomHangHoas,
                                                optionsText: 'TenNhomHangHoa', optionsValue: 'ID', optionsCaption: 'Chọn',
                                                value: $root.header_filterNhomHang"></select>
                                    </td>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('4') < 0-->
                                    <td class="loaihang">
                                        <select class="form-control" id="exampleFormControlSelect2" data-id="@keyloaihang">
                                            <option value="0">Tất cả</option>
                                            <option value="1">Hàng hóa</option>
                                            <option value="2">Dịch vụ</option>
                                            <option value="3">Combo</option>
                                        </select>
                                    </td>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('5') < 0-->
                                    <td class="giaban">
                                        <div class="col-md-3">
                                            <div class="inport-kv fl kv1">
                                                <span>=</span>
                                            </div>
                                            <div class="list-kv fl" style="display: none;">
                                                <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                    <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare('@keygiaban',Key) }">     </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <input type="text" class="form-control  number-search" data-id="@keygiaban">
                                        </div>
                                    </td>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('6') < 0-->
                                    <td class="giavon">
                                        <div class="col-md-3">
                                            <div class="inport-kv fl kv1">
                                                <span>=</span>
                                            </div>
                                            <div class="list-kv fl" style="display: none;">
                                                <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                    <li data-bind="text:Value,click: function(){ $parent.selecttedKeyCompare('@keygiavon',Key) }">   </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <input type="text" class="form-control  number-search" data-id="@keygiavon">
                                        </div>
                                    </td>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('7') < 0-->
                                    <td class="tonkho">
                                        <div class="col-md-3">
                                            <div class="inport-kv fl kv1">
                                                <span>=</span>
                                            </div>
                                            <div class="list-kv fl" style="display: none;">
                                                <ul data-bind="foreach:ComparisonFields" class="selec-person ">
                                                    <li data-bind="text:Value ,click: function(){ $parent.selecttedKeyCompare('@keytonkho',Key) }">   </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <input type="text" class="form-control  number-search" data-id="@keytonkho">
                                        </div>
                                    </td>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('8') < 0-->
                                    <td class="ghichu"></td>
                                    <!--/ko-->
                                    <!--ko if: ColumnsExcel().indexOf('9') < 0-->
                                    <td class="trangthai">
                                        <select class="form-control" id="exampleFormControlSelect1" data-id="@keytrangthai">
                                            <option value="">Tất cả</option>
                                            <option value="true">Đang kinh doanh</option>
                                            <option value='false'>Ngừng kinh doanh</option>
                                        </select>
                                    </td>
                                    <!--/ko-->
                                </tr>
                                <!--ko foreach: {data: HangHoas, as: 'itemHH'}  -->
                                <tr class="prev-tr-hide" data-bind="css:{bggray : $index()%2 == 1}, attr:{id: ID_HangHoaCungLoai}">
                                    <td class="check-group hideCheck chacungloai">
                                        <input id="inputGetIDHH" type="checkbox" data-bind="attr:{id: ID_DonViQuiDoi}" onclick="getIDHH(this)" />
                                    </td>
                                    <!--ko if: $root.ColumnsExcel().indexOf('0') < 0-->
                                    <td class="ch mahang cmmh" style="width:150px  !important;min-width:150px  !important"
                                        data-bind="text: commonStatisJs.SubStringContent(MaHangHoa,15), click: $parent.loadTheKho"></td>
                                    <!--/ko-->
                                    <!--ko if: $root.ColumnsExcel().indexOf('1') < 0-->
                                    <td class="ch tenhang cmth" style="width:150px  !important;min-width:355px  !important" data-bind="click: $parent.loadTheKho">
                                        <span data-bind="text: commonStatisJs.SubStringContent(TenHangHoa,60)"></span>
                                        <span data-bind="text: ThuocTinhGiaTri" style="color:#ff6a00"></span>
                                        <span data-bind="visible: ChietKhauMD_NV> 0" style="color:#ff6a00" title="Hoa hồng DV đặc biệt">
                                            <span>(</span><span data-bind="text: formatNumber3Digit(ChietKhauMD_NV)"></span>
                                            <span data-bind="visible: ChietKhauMD_NVTheoPT">%</span><span>)</span>
                                        </span>
                                    </td>
                                    <!--/ko-->
                                    <!--ko if: $root.ColumnsExcel().indexOf('2') < 0-->
                                    <td class="ch tendvt">
                                        <!--ko if: CountCungLoai == 1-->
                                        <span data-bind="if: (DonViTinh.length == 1 && DonViTinhChuan != ''&& DonViTinhChuan!= null)">
                                            <span data-bind="text: DonViTinhChuan"></span>
                                        </span>
                                        <div class="dropdown proDropdown blue notshow" data-bind="if: DonViTinh.length > 1">
                                            <button class="notshow" type="button" data-toggle="dropdown">
                                                <span class="notshow"
                                                      data-bind="text: DonViTinhChuan"></span>
                                                <i class="fa fa-angle-down notshow" aria-hidden="true"></i>
                                            </button>
                                            <ul class="dropdown-menu notshow" data-bind="foreach: DonViTinh">
                                                <li data-toggle="dropdown">
                                                    <a class="notshow" href="javascript:void(0);"
                                                       data-bind="text: TenDonViTinh, visible: TenDonViTinh!=DonViTinhChuan, click: $root.getChiTietHangHoaByID"></a>
                                                </li>
                                            </ul>
                                        </div>
                                        <!--/ko-->
                                    </td>
                                    <!--/ko-->
                                    <!--ko if: $root.ColumnsExcel().indexOf('3') < 0-->
                                    <td class="ch nhomhang cmnh w190" data-bind="text: NhomHangHoa, click: $parent.loadTheKho"></td>
                                    <!--/ko-->
                                    <!--ko if: $root.ColumnsExcel().indexOf('4') < 0-->
                                    <td class="ch loaihang cmlh" data-bind="text: sLoaiHangHoa, click: $parent.loadTheKho"></td>
                                    <!--/ko-->
                                    <!--ko if: $root.ColumnsExcel().indexOf('5') < 0-->
                                    <td class="ch giaban cmgb text-right" data-bind="text: formatNumber3Digit(GiaBan), click: $parent.loadTheKho"></td>
                                    <!--/ko-->
                                    <!--ko if: $root.ColumnsExcel().indexOf('6') < 0-->
                                    <td class="ch giavon cmgb text-right" data-bind="text: $root.HangHoa_XemGiaVon() === 'HangHoa_XemGiaVon' ? (QuanLyTheoLoHang === true ? 'Theo Lô Hàng' : formatNumber3Digit(GiaVon,2)): 0, click: $parent.loadTheKho"></td>
                                    <!--/ko-->
                                    <!--ko if: $root.ColumnsExcel().indexOf('7') < 0-->
                                    <td class="ch tonkho cmtk text-right" data-bind="text: formatNumber3Digit(TonKho), click: $parent.loadTheKho"></td>
                                    <!--/ko-->
                                    <!--ko if: $root.ColumnsExcel().indexOf('8') < 0-->
                                    <td class="ch ghichu cmtt" data-bind="text: GhiChu, click: $parent.loadTheKho"></td>
                                    <!--/ko-->
                                    <!--ko if: $root.ColumnsExcel().indexOf('9') < 0-->
                                    <td class="ch trangthai cmtt" data-bind="text: TrangThai ? 'Đang kinh doanh': 'Ngừng kinh doanh', click: $parent.loadTheKho"></td>
                                    <!--/ko-->
                                </tr>
                                <tr class="op-js-tr-hide">
                                    <td data-bind="attr: { colspan: 11- $root.ColumnsExcel().length }">
                                        <!--ko if: CountCungLoai > 1 && !QuanLyTheoLoHang-->
                                        <div class="op-object-detail same-product">
                                            <table class="table-hover " data-bind="foreach: {data: $root.HangHoaCungLoai, as:'itemCL'}, attr:{id: 'cungl'+ ID_HangHoaCungLoai}">
                                                <tr class="prev-tr-hide1">
                                                    <td class="check-group hideCheck cmcheck" style="width:35px !important;min-width:35px !important">
                                                        <input id="inputGetIDHH" type="checkbox" data-bind="attr:{id: ID_DonViQuiDoi}" onclick="getIDHHConCungLoai(this)" />
                                                    </td>
                                                    <!--ko if: $root.ColumnsExcel().indexOf('0') < 0-->
                                                    <td class="ch1 mahang cmmh1" onclick="loadshowdetail($(this))" style="width:150px  !important;min-width:150px  !important" data-bind="text: commonStatisJs.SubStringContent(MaHangHoa,15), click: $root.loadTheKhoCungLoai"></td>
                                                    <!--/ko-->
                                                    <!--ko if: $root.ColumnsExcel().indexOf('1') < 0-->
                                                    <td class="ch1 tenhang cmth" onclick="loadshowdetail($(this))" style="width:150px  !important;min-width:355px  !important" data-bind="click: $root.loadTheKhoCungLoai">
                                                        <span data-bind="text: commonStatisJs.SubStringContent(TenHangHoa,30)"></span>
                                                        <span data-bind="text: ThuocTinhGiaTri" style="color:#ff6a00"></span>
                                                    </td>
                                                    <!--/ko-->
                                                    <!--ko if: $root.ColumnsExcel().indexOf('2') < 0-->
                                                    <td style="min-width: 21px;">
                                                        <span>
                                                            <span data-bind="text: TenDonViTinh"></span>
                                                        </span>
                                                    </td>
                                                    <!--/ko-->
                                                    <!--ko if: $root.ColumnsExcel().indexOf('3') < 0-->
                                                    <td onclick="loadshowdetail($(this))" class="ch1 nhomhang cmnh w190" data-bind="text: NhomHangHoa, click: $root.loadTheKhoCungLoai"></td>
                                                    <!--/ko-->
                                                    <!--ko if: $root.ColumnsExcel().indexOf('4') < 0-->
                                                    <td onclick="loadshowdetail($(this))" class="ch1 loaihang cmlh" data-bind="text: sLoaiHangHoa, click: $root.loadTheKhoCungLoai"></td>
                                                    <!--/ko-->
                                                    <!--ko if: $root.ColumnsExcel().indexOf('5') < 0-->
                                                    <td onclick="loadshowdetail($(this))" class="ch1 giaban cmgb text-right" data-bind="text: formatNumber3Digit(GiaBan), click: $root.loadTheKhoCungLoai"></td>
                                                    <!--/ko-->
                                                    <!--ko if: $root.ColumnsExcel().indexOf('6') < 0-->
                                                    <td onclick="loadshowdetail($(this))" class="ch1 giavon cmgb text-right" data-bind="text: $root.HangHoa_XemGiaVon() === 'HangHoa_XemGiaVon' ? (QuanLyTheoLoHang === true ? 'Theo Lô Hàng' : formatNumber3Digit(GiaVon,2)): 0, click: $parent.loadTheKhoCungLoai"></td>
                                                    <!--/ko-->
                                                    <!--ko if: $root.ColumnsExcel().indexOf('7') < 0-->
                                                    <td onclick="loadshowdetail($(this))" class="ch1 tonkho cmtk text-right" data-bind="text: formatNumber3Digit(TonKho), click: $root.loadTheKhoCungLoai"></td>
                                                    <!--/ko-->
                                                    <!--ko if: $root.ColumnsExcel().indexOf('8') < 0-->
                                                    <td onclick="loadshowdetail($(this))" class="ch1 ghichu cmtt" data-bind="text: GhiChu, click: $root.loadTheKhoCungLoai"></td>
                                                    <!--/ko-->
                                                    <!--ko if: $root.ColumnsExcel().indexOf('9') < 0-->
                                                    <td onclick="loadshowdetail($(this))" class="ch1 trangthai cmtt" data-bind="text: TrangThai ? 'Đang kinh doanh': 'Ngừng kinh doanh', click: $root.loadTheKhoCungLoai"></td>
                                                    <!--/ko-->
                                                </tr>
                                                <tr class="op-js-tr-hide1">
                                                    <td colspan="12">
                                                        <div class="op-object-detail ">
                                                            <ul class="nav nav-tabs floatleft" style="width:100%;">
                                                                <li class="active" onclick="loadHeightParent()"><a data-toggle="tab" data-bind="attr:{href:'#tt' + $parent.ID +  ID}">Thông tin</a></li>
                                                                <li onclick="loadHeightParent()"><a data-toggle="tab" data-bind="attr:{href:'#tp'  + $parent.ID +  ID},text: LaHangHoa === true ? 'Định mức': 'Thành phần'"></a></li>
                                                                <li onclick="loadHeightParent()" data-bind="visible: QuanLyTheoLoHang === false"><a data-toggle="tab" data-bind="attr:{href:'#tk' + $parent.ID +  ID}">Thẻ kho</a></li>
                                                                <li onclick="loadHeightParent()"><a data-toggle="tab" data-bind="attr:{href:'#to'  + $parent.ID +  ID}">Tồn kho</a></li>
                                                                <li onclick="loadHeightParent()" data-bind="visible: QuanLyTheoLoHang === true"><a data-toggle="tab" data-bind="attr:{href:'#lohangcl'  + $parent.ID +  ID}">Số lô</a></li>
                                                                <li><a data-toggle="tab" data-bind="attr:{href:'#hoahongcl'  + $parent.ID +  ID}, click: $root.ClickTab_HoaHongNVien">Hoa hồng nhân viên</a></li>
                                                                <li data-bind="visible: QuanLyBaoDuong == 1,
                                                                        css: $root.Tab_Active() ===3?'active':'',
                                                                        click: function(){$root.ChangeTab_HangHoa(5)}">
                                                                    <a data-toggle="tab" data-bind="attr:{href:'#baoduong_' + $parent.ID +  ID}">Quản lý bảo dưỡng</a>
                                                                </li>
                                                            </ul>
                                                            <div class="tab-content ">
                                                                <div class="tab-pane active" data-bind="attr:{id:'tt'  + $parent.ID +  ID}">
                                                                    <div class="padding-10 ">
                                                                        <h3 class="title-name" data-bind="text: TenHangHoa"></h3>
                                                                        <div class="col-xs-12 col-md-12 ">
                                                                            <div class="product-immage " data-bind="attr:{id:'tt'  + $parent.ID +  ID}">
                                                                                <div class="img-product img-producthh" style="margin-left: calc(50% - 100px)">
                                                                                    <!-- ko foreach: $root.AnhDaiDien-->
                                                                                    <!-- ko if: $index() == 0-->
                                                                                    <a>
                                                                                        <img alt="" data-bind="attr: {src: Open24FileManager.hostUrl + URLAnh},click: $root.loadAnh" />
                                                                                    </a>
                                                                                    <!-- /ko -->
                                                                                    <!-- /ko -->
                                                                                </div>
                                                                                <div class="accordion-content" style="overflow:scroll">
                                                                                    <a class="fa fa-arrow-alt-circle-right"></a>
                                                                                    <ul class=" img-list-product list-inline" style="width:max-content;">
                                                                                        <!-- ko foreach: $root.DM_HangHoa_Anh-->
                                                                                        <!-- ko if: $index() != 0-->
                                                                                        <li class="slide">
                                                                                            <a href="javascript:void(0)">
                                                                                                <img data-bind="attr: {src: Open24FileManager.hostUrl + URLAnh}, click :$root.ThayAnhNho" />
                                                                                            </a>
                                                                                        </li>
                                                                                        <!-- /ko -->
                                                                                        <!-- /ko -->
                                                                                    </ul>
                                                                                    <a class="fa fa-arrow-alt-circle-right"></a>
                                                                                </div>
                                                                            </div>
                                                                            <div class="product-view-detail ">
                                                                                <div class="col-xs-12 col-sm-12 col-md-6">
                                                                                    <div class="detail-content">
                                                                                        <div class="form-group floatleft">
                                                                                            <label class="css-form-label">Mã hàng hóa:</label>
                                                                                            <div class="css-form-detail">
                                                                                                <span data-bind="text: MaHangHoa"></span>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="form-group floatleft">
                                                                                            <label class="css-form-label">Nhóm hàng:</label>
                                                                                            <div class="css-form-detail">
                                                                                                <span data-bind="text: NhomHangHoa"></span>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="form-group floatleft">
                                                                                            <label class="css-form-label">Loại hàng:</label>
                                                                                            <div class="css-form-detail">
                                                                                                <span data-bind="text: sLoaiHangHoa"></span>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="form-group floatleft">
                                                                                            <label class="css-form-label">Định mức tồn:</label>
                                                                                            <div class="css-form-label">
                                                                                                <span data-bind="text: formatNumber3Digit(TonToiThieu) + ' > '"></span>
                                                                                                <span data-bind="text: formatNumber3Digit(TonToiDa)"></span>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="form-group floatleft">
                                                                                            <label class="css-form-label">Giá bán:</label>
                                                                                            <div class="css-form-detail">
                                                                                                <span data-bind="text: formatNumber3Digit(GiaBan)"></span>
                                                                                            </div>
                                                                                        </div>

                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-xs-12 col-sm-12 col-md-6">
                                                                                    <div class="detail-content">
                                                                                        <div class="form-group floatleft">
                                                                                            <label class="css-form-label">Mô tả:</label>
                                                                                            <div class="css-form-detail">
                                                                                                <span data-bind="text:GhiChu"></span>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="form-group floatleft">
                                                                                            <div class="floatleft">
                                                                                                <div style="margin-right:10px" data-bind="visible: DuocBanTrucTiep == true">
                                                                                                    <i class="fa fa-check txtGreen"></i> Được bán trực tiếp
                                                                                                </div>
                                                                                                <div style="margin-right:10px" data-bind="visible: DuocBanTrucTiep == false">
                                                                                                    <i class="fa fa-times txtRed"></i> Không được bán
                                                                                                </div>
                                                                                                <div style="margin-right:10px" data-bind="visible: DuocTichDiem !== 1">
                                                                                                    <i class="fa fa-times txtRed"></i> Không được tích điểm
                                                                                                </div>
                                                                                                <div style="margin-right:10px" data-bind="visible: DuocTichDiem == 1">
                                                                                                    <i class="fa fa-check txtGreen"></i> Được tích điểm
                                                                                                </div>

                                                                                                <!--ko if: $root.IsGara()-->
                                                                                                <div style="margin-right:10px" data-bind="visible: QuanLyBaoDuong == 1">
                                                                                                    <i class="fa fa-check txtGreen"></i> Quản lý bảo dưỡng
                                                                                                </div>
                                                                                                <div style="margin-right:10px" data-bind="visible: QuanLyBaoDuong == 0">
                                                                                                    <i class="fa fa-times txtRed"> </i> Không quản lý bảo dưỡng
                                                                                                </div>
                                                                                                <!--/ko-->
                                                                                                <div style="margin-right:10px" data-bind="visible: !LaHangHoa && DichVuTheoGio !== 1">
                                                                                                    <i class="fa fa-times txtRed"></i> Số lượng tính theo thời gian sử dụng
                                                                                                </div>
                                                                                                <div style="margin-right:10px" data-bind="visible: !LaHangHoa && DichVuTheoGio === 1">
                                                                                                    <i class="fa fa-check txtGreen"></i> Số lượng tính theo thời gian sử dụng
                                                                                                </div>
                                                                                                <div style="margin-right:10px" data-bind="visible: HoaHongTruocChietKhau != 1">
                                                                                                    <i class="fa fa-times txtRed"></i> Tính hoa hồng trước chiết khấu
                                                                                                </div>
                                                                                                <div style="margin-right:10px" data-bind="visible: HoaHongTruocChietKhau == 1">
                                                                                                    <i class="fa fa-check txtGreen"></i> Tính hoa hồng trước chiết khấu
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-12">
                                                                            <div>
                                                                                <div class="col-xs-12 col-md-4 notify-banhang">
                                                                                </div>
                                                                            </div>
                                                                            <div>
                                                                                <div class="col-md-12 col-md-8 ">
                                                                                    <div class="group-btn text-right floatleft">
                                                                                        <!--ko if: !Xoa && ($root.role_UpdateProduct() || $root.role_CaiDatDinhLuong())  -->
                                                                                        <a href="javascript: void(0)" class="btn btn-main" data-bind="click: $root.editHH">
                                                                                            <i class="fa fa-check-square"></i> Sửa đổi
                                                                                        </a>
                                                                                        <!--/ko-->
                                                                                        <a class="btn btn-cancel" data-toggle="modal" data-bind="click: $root.modalInMaVach">
                                                                                            <i class="fa fa-barcode"></i> In Mã vạch
                                                                                        </a>
                                                                                        <!--ko if: $root.role_UpdateProduct() && !Xoa-->
                                                                                        <a href="javascript: void(0)" class="btn btn-main" data-bind="click: $root.ChoPhepKinhDoanh, visible: TrangThai ==false">
                                                                                            <i class="fa fa-check-square"></i> Cho phép kinh doanh
                                                                                        </a>
                                                                                        <a href="javascript: void(0)" class="btn btn-cancel"
                                                                                           data-bind="click: $root.NgungKinhDoanh, visible: TrangThai ==true ">
                                                                                            <i class="fa fa-lock"></i> Ngừng kinh doanh
                                                                                        </a>
                                                                                        <!--/ko-->
                                                                                        <!--ko if: $root.role_DeleteProduct() && !Xoa-->
                                                                                        <a href="javascript: void(0)" class="btn btn-cancel xoaHH" style="display:none" data-bind="click: $root.modalDelete">
                                                                                            <i class="fa fa-trash"></i> Xóa
                                                                                        </a>
                                                                                        <!--/ko-->
                                                                                        <!--ko if: $root.role_DeleteProduct() && Xoa-->
                                                                                        <a href="javascript: void(0)" class="btn btn-main"
                                                                                           style="background: rgb(255, 114, 8)" data-bind="click: $root.RestoreProduct">
                                                                                            <i class="fa fa-recycle"></i> Khôi phục
                                                                                        </a>
                                                                                        <!--/ko-->
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane" data-bind="attr:{id:'tp'  + $parent.ID +  ID}">
                                                                    <div class="padding-10 ">
                                                                        <table class="table table-js-tk ">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>Mã hàng hóa</th>
                                                                                    <th>Tên hàng hóa</th>
                                                                                    <th>Số lượng quy cách</th>
                                                                                    <th>Số lượng</th>
                                                                                    <th>Giá vốn</th>
                                                                                    <th>Tiền vốn</th>
                                                                                    <th data-bind="visible: $root.LoaiHangHoa === 3">Đơn giá</th>
                                                                                </tr>
                                                                            <tbody data-bind="foreach: $root.ListThanhPhans">
                                                                                <tr>
                                                                                    <td data-bind="text: MaHangHoa"></td>
                                                                                    <td>
                                                                                        <span data-bind="text: TenHangHoa"></span>
                                                                                        <span data-bind="visible: MaLoHang" style="color:brown">
                                                                                            (Lô: <span data-bind="text: MaLoHang"></span>)
                                                                                        </span>
                                                                                    </td>
                                                                                    <td data-bind="text: formatNumber3Digit(SoLuongQuyCach)"></td>
                                                                                    <td data-bind="text: formatNumber3Digit(SoLuong,2)"></td>
                                                                                    <td data-bind="text: formatNumber3Digit(GiaVon,2)"></td>
                                                                                    <td data-bind="text: formatNumber3Digit(ThanhTien,2)"></td>
                                                                                    <td data-bind="visible: $root.LoaiHangHoa === 3,
                                                                                        text: formatNumber3Digit(DonGia)"></td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane" data-bind="attr:{id:'tk'  + $parent.ID +  ID}">
                                                                    <div class="padding-10">

                                                                        <p data-bind="visible: DonViTinhChuan!= null && DonViTinhChuan != '' "> Lưu ý: Thẻ kho được tính trên đơn vị cơ bản, tồn cuối tương ứng với đơn vị (<b data-bind="text: DonViTinhChuan"></b>) là : <span data-bind="text: formatNumber3Digit(TonKho)"></span></p>
                                                                        <table class="table table-js-tk">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>Chứng từ</th>
                                                                                    <th>Phương thức</th>
                                                                                    <th>Thời gian</th>
                                                                                    <th>Giá vốn</th>
                                                                                    <th>Nhập</th>
                                                                                    <th>Xuất</th>
                                                                                    <th>Tồn lũy kế</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody data-bind="foreach: $root.TheKhos">
                                                                                <tr>
                                                                                    <td>
                                                                                        <a href="javascipt:void(0)" data-bind="text: MaHoaDon , event:{click: $root.showpopupTK}"></a>
                                                                                    </td>
                                                                                    <td data-bind="text: LoaiChungTu"></td>
                                                                                    <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''"></td>
                                                                                    <td data-bind="text: $root.HangHoa_XemGiaVon() === 'HangHoa_XemGiaVon' ? (QuanLyTheoLoHang === true ? 'Theo Lô Hàng' : formatNumber3Digit(GiaVon,2)): 0"></td>
                                                                                    <td data-bind="text: SoLuong > 0 ? formatNumber3Digit(SoLuong) : 0"></td>
                                                                                    <td data-bind="text: SoLuong > 0 ? 0 :formatNumber3Digit(SoLuong)"></td>
                                                                                    <td>
                                                                                        <span data-bind="text: formatNumber3Digit(TonKho),visible: $parent.LaHangHoa === true">
                                                                                        </span>
                                                                                        <span data-bind="visible: $index()===0 && $root.currentPageTK() == 0 && (LuyKeTonKho !== TonKho || TonKho.toFixed(2) !== $parent.TonKho.toFixed(2))">
                                                                                            <button class="btn btn-main"
                                                                                                    data-bind="click: function(){$root.CapNhatTonKho($parent)}">
                                                                                                Cập nhật tồn kho
                                                                                            </button>
                                                                                        </span>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <div class="bg-warning padding-10 text-center" data-bind="visible: $root.TheKhos().length<=0">
                                                                            <i class="">Không có dữ liệu</i>
                                                                        </div>
                                                                        <div class="page">
                                                                            <div class="flex flex-end">
                                                                                <a href="#" data-bind="click: $root.StartPageTheKho, visible: $root.VisibleStartPageTheKho"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                                <a href="#" data-bind="click: $root.BackPageTheKho, visible: $root.VisibleStartPageTheKho "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                                <ul data-bind="foreach: $root.PageList_Display_TheKho">
                                                                                    <li>
                                                                                        <a href="javascript:void(0)" data-bind="text: pageNumberTK, click: $root.GoToPage, css: $root.GetClass($data)"></a>
                                                                                    </li>
                                                                                </ul>
                                                                                <a href="#" data-bind="click: $root.GoToNextPageTheKho, visible: $root.VisibleEndPageTheKho "><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                                <a href="#" data-bind="click: $root.EndPageTheKho, visible: $root.VisibleEndPageTheKho "><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                                <div class="total-recos">Hiển thị <span data-bind="text: $root.fromitemtk"></span> - <span data-bind="text: $root.toitemtk"></span> trên tổng số <span data-bind="text: $root.TotalRecordTK"></span> phiếu kho.</div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane" data-bind="attr:{id:'to'  + $parent.ID +  ID}">
                                                                    <div class="padding-10">
                                                                        <table class='table'>
                                                                            <tr>
                                                                                <th>Chi nhánh</th>
                                                                                <th class="text-right w120">Tồn kho</th>
                                                                                <th class="text-right w120">Đặt hàng</th>
                                                                            </tr>
                                                                            <tbody data-bind="foreach: $root.TonKhos">
                                                                                <tr>
                                                                                    <td data-bind="text:TenDonVi"></td>
                                                                                    <td data-bind="text:formatNumber3Digit(TonKho)" class="text-right"></td>
                                                                                    <td class="text-right"></td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane" data-bind="attr:{id:'lohangcl' + $parent.ID +  ID}">
                                                                    <div class="padding-10">
                                                                        <div class="flex flex-end">
                                                                            <div class="seach-lot">
                                                                                <input type="text" class="form-control" placeholder="Tìm kiếm lô" data-bind="event: {keyup: $root.SearchLoHang}," />
                                                                                <i class="fa fa-search" aria-hidden="true"></i>
                                                                            </div>
                                                                            <div class="select-lot">
                                                                                <select class="form-control">
                                                                                    <option>Còn hàng</option>
                                                                                    <option>Hết hàng</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                        <table class='table'>
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>
                                                                                        Mã lô hàng
                                                                                    </th>
                                                                                    <th>
                                                                                        Ngày sản xuất
                                                                                    </th>
                                                                                    <th>
                                                                                        Hạn sử dụng
                                                                                    </th>
                                                                                    <th class="text-right">Số lượng</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody data-bind="foreach: $root.ListTonTheoLo">
                                                                                <tr class="solo-show" data-bind="click: $root.ClickTheKhoByLoHang">
                                                                                    <td data-bind="text:MaLoHang"></td>
                                                                                    <td data-bind="text: moment(NgaySanXuat).format('DD/MM/YYYY')!='Invalid date'? moment(NgaySanXuat).format('DD/MM/YYYY'):''"></td>
                                                                                    <td data-bind="text: moment(NgayHetHan).format('DD/MM/YYYY')!='Invalid date'? moment(NgayHetHan).format('DD/MM/YYYY'):''"></td>
                                                                                    <td class="text-right" data-bind="text: formatNumber3Digit(TonKho)">50</td>
                                                                                </tr>
                                                                                <tr class="tr-hide-detailsolo" hidden>
                                                                                    <td colspan="4">
                                                                                        <div class="col-md-12 ">
                                                                                            <h4>Thông tin chi tiết</h4>
                                                                                        </div>
                                                                                        <div class="col-md-12 table-res ">
                                                                                            <table class='table'>
                                                                                                <thead>
                                                                                                    <tr>
                                                                                                        <th>Chứng từ</th>
                                                                                                        <th>Loại chứng từ</th>
                                                                                                        <th>Thời gian</th>
                                                                                                        <th>Giá vốn</th>
                                                                                                        <th>Nhập</th>
                                                                                                        <th>Xuất</th>
                                                                                                        <th>Tồn lũy kế</th>
                                                                                                    </tr>
                                                                                                <tbody data-bind="foreach: $root.ListTheKhoByLoHang">
                                                                                                    <tr>
                                                                                                        <td>
                                                                                                            <a href="javascipt:void(0)" data-bind="text: MaHoaDon , event:{click: $root.showpopupTK}"></a>
                                                                                                        </td>
                                                                                                        <td data-bind="text: LoaiChungTu"></td>
                                                                                                        <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''"></td>
                                                                                                        <td data-bind="text: $root.HangHoa_XemGiaVon() === 'HangHoa_XemGiaVon' ? formatNumber3Digit(GiaVon,2): 0"></td>
                                                                                                        <td data-bind="text: SoLuong > 0 ? formatNumber3Digit(SoLuong) : 0"></td>
                                                                                                        <td data-bind="text: SoLuong > 0 ? 0 :formatNumber3Digit(SoLuong)"></td>
                                                                                                        <td>
                                                                                                            <span data-bind="text: formatNumber3Digit(TonKho)">
                                                                                                            </span>
                                                                                                            &nbsp; &nbsp;
                                                                                                            <span data-bind="visible: $index()===0 && $root.currentPageLH() == 0 && (LuyKeTonKho !== TonKho || TonKho.toFixed(2) !== $parent.TonKho.toFixed(2))">
                                                                                                                <button class="btn btn-main" data-bind="click: function(){$root.CapNhatTonKho($parent)}">Cập nhật tồn kho</button>
                                                                                                            </span>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                        <div class="page">
                                                                                            <div class="flex flex-end">
                                                                                                <a href="#" data-bind="click: $root.StartPageLoHang, visible: $root.VisibleStartPageLoHang"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                                                <a href="#" data-bind="click: $root.BackPageLoHang, visible: $root.VisibleStartPageLoHang "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                                                <ul data-bind="foreach: $root.PageList_Display_TheKhoLoHang">
                                                                                                    <li>
                                                                                                        <a href="javascript:void(0)" data-bind="text: pageNumberLH, click: $root.GoToPageLoHang, css: $root.GetClassLoHang($data)"></a>
                                                                                                    </li>
                                                                                                </ul>
                                                                                                <a href="#" data-bind="click: $root.GoToNextPageLoHang, visible: $root.VisibleEndPageLoHang "><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                                                <a href="#" data-bind="click: $root.EndPageLoHang, visible: $root.VisibleEndPageLoHang "><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                                                <div class="total-recos">Hiển thị <span data-bind="text: $root.fromitemlh"></span> - <span data-bind="text: $root.toitemlh"></span> trên tổng số <span data-bind="text: $root.TotalRecordLH"></span> phiếu kho.</div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane tab-chiet-khau" data-bind="attr:{id:'hoahongcl'  + $parent.ID +  ID}">
                                                                    <div class="padding-10">
                                                                        <div class="op-object-detail-function">
                                                                            <button type="button" class="btn btn-main height-30 btn-tree-check" data-bind="click: $root.ShowPop_ChoseNhanVien">
                                                                                <img src="~/Content/icon/tree-check-box-button.png" />
                                                                            </button>
                                                                            <div class="seach-lot">
                                                                                <input type="text" class="form-control" placeholder="Tìm kiếm nhân viên"
                                                                                       data-bind="value: $root.searchNVien_ChietKhau_HangHoa, valueUpdate:'afterkeydown'" />
                                                                                <i class="fa fa-search" aria-hidden="true"></i>
                                                                            </div>
                                                                        </div>
                                                                        <table style="width:100%">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>
                                                                                        Mã Nhân viên
                                                                                    </th>
                                                                                    <th>
                                                                                        Tên nhân viên
                                                                                    </th>
                                                                                    <th>
                                                                                        Hoa hồng thực hiện
                                                                                    </th>
                                                                                    <th class="text-center">
                                                                                        Hoa hồng NV hỗ trợ
                                                                                    </th>
                                                                                    <th>
                                                                                        Hoa hồng tư vấn
                                                                                    </th>
                                                                                    <th>
                                                                                        Hoa hồng bán gói dịch vụ
                                                                                    </th>
                                                                                    <th style="width:50px"></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody data-bind="foreach: $root.PageResult_ChietKhauNV">
                                                                                <tr>
                                                                                    <td data-bind="text: MaNhanVien"></td>
                                                                                    <td data-bind="text: TenNhanVien"></td>
                                                                                    <td>
                                                                                        <input type="text" class="form-control text-right newprice"
                                                                                               data-bind="value: LaPhanTram?ChietKhau +' %': formatNumber3Digit(ChietKhau) + ' đ',click: function(){$root.ShowChietKhau_NhanVien($data, 1)}">
                                                                                        <div class="callprice  w415">
                                                                                            <div class="flex  flex-between">
                                                                                                <label>
                                                                                                    Hoa hồng thực hiện =
                                                                                                </label>
                                                                                                <div class="flex _js">
                                                                                                    <input type="text" class="form-control number-price " onkeypress="return getNumber(event, this)"
                                                                                                           data-bind="event:{keyup: $root.EditChietKhau_NhanVien}">
                                                                                                    <div class="plus"
                                                                                                         data-bind="css: {gb: !LaPhanTram},click: function(){ $root.ClickChietKhau_VND ($data, $parent)}">VNĐ</div>
                                                                                                    <div class="plus gb"
                                                                                                         data-bind="css: {gb: LaPhanTram},click: function(){ $root.ClickChietKhau_Ptram ($data, $parent)}">%</div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <p class="floatleft form-check-left">
                                                                                                <input type="checkbox" value="true">
                                                                                                <label class="font-w-400 ft-italic lb-check-note-ck">
                                                                                                    Áp dụng công thức cho
                                                                                                    <strong data-bind="text: $root.CountNVien_ChietKhau"></strong>
                                                                                                    nhân viên?
                                                                                                </label>
                                                                                            </p>
                                                                                            <div class="pull-right" data-bind="click: function() {$root.AgreeApply_ChietKhau($parent, $data, 1)}">
                                                                                                <a href="javascript:void(0);" class="cantrol">Áp dụng</a>
                                                                                            </div>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text" class="form-control newprice" style="background-color:white"
                                                                                               data-bind="value: LaPhanTram_YeuCau?ChietKhau_YeuCau +' %': formatNumber3Digit(ChietKhau_YeuCau) + ' đ',click: function(){$root.ShowChietKhau_NhanVien($data, 4)}">
                                                                                        <div class="callprice  w590">
                                                                                            <p class="floatleft form-check-left no-magrin" hidden>
                                                                                                <input type="checkbox" class="_check-change-gia-ban"
                                                                                                       data-bind="value: $root.CKYeuCau_ApplyGiaBan, checked: $root.CKYeuCau_ApplyGiaBan()==true, event:{change: $root.CKYeuCau_ChangeLoaiApDung}">
                                                                                                <label class="font-w-400 lb-check-note-ck">Tính theo giá bán</label>
                                                                                            </p>
                                                                                            <div class="flex flex-between">
                                                                                                <label class="lblYeuCau"> Hoa hồng NV hỗ trợ </label>
                                                                                                <div class="callprice-right _js">
                                                                                                    <input type="text" class="form-control number-price "
                                                                                                           onkeypress="return getNumber(event,this)"
                                                                                                           data-bind="event:{keyup: $root.EditChietKhau_NhanVien}">
                                                                                                    <div class="plus"
                                                                                                         data-bind="css: {gb: !LaPhanTram_YeuCau},click: function(){ $root.ClickChietKhau_VND ($data, $parent)}">VNĐ</div>
                                                                                                    <div class="plus gb"
                                                                                                         data-bind="css: {gb: LaPhanTram_YeuCau},click: function(){ $root.ClickChietKhau_Ptram ($data, $parent)}">% Giá bán</div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <p class="floatleft form-check-left">
                                                                                                <input type="checkbox" value="true"> <label class="font-w-400 ft-italic lb-check-note-ck">
                                                                                                    Áp dụng công thức cho <strong data-bind="text: $root.CountNVien_ChietKhau"></strong> nhân viên?
                                                                                                </label>
                                                                                            </p>
                                                                                            <div class="pull-right" data-bind="click: function() {$root.AgreeApply_ChietKhau($parent, $data, 4)}">
                                                                                                <a href="javascript:void(0);" class="cantrol">Áp dụng</a>
                                                                                            </div>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text" class="form-control text-right newprice"
                                                                                               data-bind="value: LaPhanTram_TuVan?ChietKhau_TuVan +' %': formatNumber3Digit(ChietKhau_TuVan) +' đ',click: function(){$root.ShowChietKhau_NhanVien($data, 2)} ">
                                                                                        <div class="callprice  w415">
                                                                                            <div class="flex flex-between">
                                                                                                <label>
                                                                                                    Hoa hồng tư vấn =
                                                                                                </label>
                                                                                                <div class=" flex _js">
                                                                                                    <input type="text" class="form-control number-price " onkeypress="return getNumber(event, this)"
                                                                                                           data-bind="event:{keyup: $root.EditChietKhau_NhanVien}">
                                                                                                    <div class="plus"
                                                                                                         data-bind="css: {gb: !LaPhanTram_TuVan},click: function(){ $root.ClickChietKhau_VND ($data, $parent)} ">VNĐ</div>
                                                                                                    <div class="plus gb"
                                                                                                         data-bind="css: {gb: LaPhanTram_TuVan},click: function(){ $root.ClickChietKhau_Ptram ($data, $parent)}">%</div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <p class="floatleft form-check-left">
                                                                                                <input type="checkbox" value="true">
                                                                                                <label class="font-w-400 ft-italic lb-check-note-ck">
                                                                                                    Áp dụng công thức cho
                                                                                                    <strong data-bind="text: $root.CountNVien_ChietKhau"></strong>
                                                                                                    nhân viên?
                                                                                                </label>
                                                                                            </p>
                                                                                            <div class="pull-right" data-bind="click: function() {$root.AgreeApply_ChietKhau($parent, $data, 2)}">
                                                                                                <a href="javascript:void(0);" class="cantrol">Áp dụng</a>
                                                                                            </div>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text" class="form-control newprice" style="background-color:white"
                                                                                               data-bind="value: LaPhanTram_BanGoi?ChietKhau_BanGoi +' %': formatNumber3Digit(ChietKhau_BanGoi) + ' đ',click: function(){$root.ShowChietKhau_NhanVien($data, 3)}">
                                                                                        <div class="callprice  w415">
                                                                                            <div class="flex flex-between">
                                                                                                <label>
                                                                                                    Hoa hồng bán gói dịch vụ =
                                                                                                </label>
                                                                                                <div class="flex _js">
                                                                                                    <input type="text" class="form-control number-price " onkeypress="return getNumber(event, this)"
                                                                                                           data-bind="event:{keyup: $root.EditChietKhau_NhanVien}">
                                                                                                    <div class="plus"
                                                                                                         data-bind="css: {gb: !LaPhanTram_BanGoi},click: function(){ $root.ClickChietKhau_VND ($data, $parent)}">VNĐ</div>
                                                                                                    <div class="plus gb"
                                                                                                         data-bind="css: {gb: LaPhanTram_BanGoi},click: function(){ $root.ClickChietKhau_Ptram ($data, $parent)}">%</div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <p class="floatleft form-check-left">
                                                                                                <input type="checkbox" value="true">
                                                                                                <label class="font-w-400 ft-italic lb-check-note-ck">
                                                                                                    Áp dụng công thức cho
                                                                                                    <strong data-bind="text: $root.CountNVien_ChietKhau"></strong>
                                                                                                    nhân viên?
                                                                                                </label>
                                                                                            </p>
                                                                                            <div class="pull-right" data-bind="click: function() {$root.AgreeApply_ChietKhau($parent, $data, 3)}">
                                                                                                <a href="javascript:void(0);" class="cantrol">Áp dụng</a>
                                                                                            </div>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td>
                                                                                        <a href="javascript:void(0)" style="color:red" data-bind="click: function(){$root.DeleteNhanVien_fromListCK($data,$parent)} ">
                                                                                            <i class="fa fa-times" aria-hidden="true"></i>
                                                                                        </a>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <div class="page">
                                                                            <div class="flex flex-end">
                                                                                <a href="javascript:void(0)" data-bind="click: $root.StartPageListCK, visible: $parent.VisibleStartPageListCK "><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                                <a href="javascript:void(0)" data-bind="click: $root.BackPageListCK, visible:  $parent.VisibleStartPageListCK "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                                <ul data-bind="foreach:  $parent.PageListChietKhauNV">
                                                                                    <li>
                                                                                        <a href="javascript:void(0)" data-bind="text: pageNumber, click: $root.GoToPageListCK, css: $root.GetClassListCK($data)"></a>
                                                                                    </li>
                                                                                </ul>
                                                                                <a href="javascript:void(0)" data-bind="click: $root.GoToNextPageListCK, visible:  $parent.VisibleEndPageListCK"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                                <a href="javascript:void(0)" data-bind="click: $root.EndPageListCK, visible:  $parent.VisibleEndPageListCK"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                                <div class="total-recos">
                                                                                    Hiển thị <span data-bind="text:  $parent.fromitemListCK"></span> - <span data-bind="text:  $parent.toitemListCK"></span> trên tổng số
                                                                                    <span data-bind="text:  $parent.TotalRecordListCK"></span> bản ghi
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="tab-pane tab-chiet-khau" data-bind="attr:{id:'baoduong_'+ $parent.ID +  ID}"
                                                                     style="width:820px;padding: 15px 72px">
                                                                    <div class="flex flex-between" style="margin: 2px 0 6px;">
                                                                        <label>
                                                                            <input type="checkbox" name="name"
                                                                                   data-bind="checkedValue: true,
                                                                             checked: $root.QuanLyBaoDuong" /> Quản lý lịch bảo dưỡng
                                                                        </label>
                                                                    </div>
                                                                    <div class="flex flex-between" style="margin: 2px 0 6px;">
                                                                        <label>
                                                                            Loại bảo dưỡng
                                                                        </label>
                                                                        <div class="flex flex-row op-form-group ">
                                                                            <div class="dropdown" style="position: relative; width:150px">
                                                                                <div class="  floatleft " data-toggle="dropdown" aria-expanded="false">
                                                                                    <div class="form-control" style="cursor:pointer" data-bind="text: $root.BaoDuong_TypeText"></div>
                                                                                </div>
                                                                                <div class="dropdown-menu" style="width:100%; max-height:330px;">
                                                                                    <div class=" flex flex-column ">
                                                                                        <ul class="group-parent floatleft">
                                                                                            <li data-bind="foreach :  $root.BaoDuong_ListType">
                                                                                                <div class="group-p1">
                                                                                                    <a data-bind="text: Text"></a>
                                                                                                    @*<span class="pull-right"
                                                                                                        data-bind="visible: LoaiBaoDuong ==  $parent.LoaiBaoDuong"></span>*@
                                                                                                </div>
                                                                                            </li>
                                                                                        </ul>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                    <div style="position: relative; border: 1px solid #ccc;">
                                                                        <div>
                                                                            <table>
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th class="text-center width-100" style="border: 1px solid #ccc;">Lần</th>
                                                                                        <th class="text-center">Từ</th>
                                                                                        <th class="text-center" data-bind="visible: $root.BaoDuong_VisibleColumnRepeater">Lặp lại</th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody data-bind="foreach: $root.BaoDuong_ListDetail">
                                                                                    <tr>
                                                                                        <td class="text-center" data-bind="text: LanBaoDuong"></td>
                                                                                        <td>
                                                                                            <div style="position: relative;">
                                                                                                <input class="form-control text-center" type="text"
                                                                                                       onkeypress="keypressNumber_limitNumber(event, this)"
                                                                                                       data-bind="value: formatNumber3Digit(GiaTri),
                                              ">
                                                                                                <select class="form-control select-add-input"
                                                                                                        data-bind="options: $root.BaoDuong_TypeDate_Filter,
                                            optionsText: 'Text', optionsValue: 'ID',
                                            value: $data.LoaiGiaTri,
                                                "></select>

                                                                                            </div>
                                                                                        </td>
                                                                                        <td class="text-center" data-bind="visible: $root.BaoDuong_VisibleColumnRepeater">
                                                                                            <input type="checkbox"
                                                                                                   data-bind="checkedValue: true, checked: LapDinhKy,
                                                                                   visible: LapDinhKy" />
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>
                                            <div class="padding-10">
                                                <a class="btn btn-main" data-bind="click: $root.addHHCungLoai">
                                                    <i class="fa fa-plus" aria-hidden="true"></i>
                                                    <font>Thêm hàng hóa cùng loại</font>
                                                </a>
                                            </div>
                                        </div>
                                        <!--/ko-->
                                        <div class="op-object-detail js-thongtinkhicothanhphan" data-bind="visible: CountCungLoai == 1 || QuanLyTheoLoHang">
                                            <ul class="nav nav-tabs" style="width:100%;">
                                                <li class="active" onclick="LoadGetHeight()"
                                                    data-bind="click: function(){$root.ChangeTab_HangHoa(0)}"><a data-toggle="tab" data-bind="attr:{href:'#home' + ID}">Thông tin</a></li>
                                                <li onclick="LoadGetHeight()"
                                                    data-bind="click: function(){$root.ChangeTab_HangHoa(1)}">
                                                    <a data-toggle="tab" data-bind="text: LaHangHoa === true ? 'Định mức': 'Thành phần', attr:{href:'#thanhphan' + ID}">Định mức</a>
                                                </li>
                                                <li onclick="LoadGetHeight()"
                                                    data-bind="visible: QuanLyTheoLoHang === false,
                                                    click: function(){$root.ChangeTab_HangHoa(3)}"><a data-toggle="tab" data-bind="attr:{href:'#info' + ID}">Thẻ kho</a></li>
                                                <li onclick="LoadGetHeight()">
                                                    <a data-toggle="tab" data-bind="attr:{href:'#contact' + ID}">Tồn kho</a>
                                                </li>
                                                <li data-bind="visible: QuanLyTheoLoHang === true,
                                                    click: function(){$root.ChangeTab_HangHoa(3)}">
                                                    <a data-toggle="tab" data-bind="attr:{href:'#solo' + ID}">Số lô</a>
                                                </li>
                                                <li data-bind="click: function(){$root.ChangeTab_HangHoa(4)}">
                                                    <a data-toggle="tab" data-bind="attr:{href:'#hoahong' + ID}, click: $root.ClickTab_HoaHongNVien">Hoa hồng nhân viên</a>
                                                </li>
                                                <li data-bind="visible: QuanLyBaoDuong == 1,
                                                    css: $root.Tab_Active() ===3?'active':'',
                                                    click: function(){$root.ChangeTab_HangHoa(5)}">
                                                    <a data-toggle="tab" data-bind="attr:{href:'#baoduong_'+ ID}">Quản lý bảo dưỡng</a>
                                                </li>
                                            </ul>
                                            <div class="tab-content ">
                                                <div class="tab-pane active" data-bind="attr:{id:'home' + ID}">
                                                    <div class="">
                                                        <h3 class="title-name" data-bind="text: TenHangHoa"></h3>
                                                        <div class="floatleft padding-15">
                                                            <div class="product-immage">
                                                                <div class="img-product img-producthh">
                                                                    <!-- ko foreach: $root.AnhDaiDien-->
                                                                    <!-- ko if: $index() == 0-->
                                                                    <a>
                                                                        <img alt="" data-bind="attr: {src: Open24FileManager.hostUrl + URLAnh},click: $root.loadAnh" />
                                                                    </a>
                                                                    <!-- /ko -->
                                                                    <!-- /ko -->
                                                                </div>
                                                                <h2 class="accordion-toggle"><a href="#" class="trig1"></a></h2>
                                                                <div class="accordion-content" style="overflow:scroll;">
                                                                    <ul class=" img-list-product list-inline" style="width:max-content">
                                                                        <!-- ko foreach: $root.DM_HangHoa_Anh-->
                                                                        <!-- ko if: $index() != 0-->
                                                                        <li class="slide">
                                                                            <a href="javascript:void(0)">
                                                                                <img data-bind="attr: {src: Open24FileManager.hostUrl + URLAnh}, click :$root.ThayAnhNho" />
                                                                            </a>
                                                                        </li>
                                                                        <!-- /ko -->
                                                                        <!-- /ko -->
                                                                    </ul>
                                                                </div>
                                                                <div class="model-images">
                                                                    <div class="model-imagesinner" data-bind="foreach: $root.arrAnhAvt">
                                                                        <img data-bind="attr: {src: Open24FileManager.hostUrl + URLAnh}" />
                                                                    </div>
                                                                    <a href="javascript:void(0)" class="nextlistimg1"><i class="fa fa-chevron-right"></i></a>
                                                                    <a href="javascript:void(0)" class="prevlistimg2"><i class="fa fa-chevron-left"></i></a>
                                                                    <a href="javascript:void(0)" class="deletelistimg" data-bind="click: $root.closeAnh"><i class="fa fa-close"></i></a>
                                                                </div>
                                                            </div>
                                                            <div class="product-view-detail">
                                                                <div class="col-xs-12 col-sm-12 col-md-6">
                                                                    <div class="form-group floatleft">
                                                                        <label class="css-form-label">Mã hàng hóa:</label>
                                                                        <div class="css-form-detail">
                                                                            <span data-bind="text:MaHangHoa"></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group floatleft">
                                                                        <label class="css-form-label">Nhóm hàng:</label>
                                                                        <div class="css-form-detail">
                                                                            <span data-bind="text: NhomHangHoa"></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group floatleft">
                                                                        <label class="css-form-label">Loại hàng:</label>
                                                                        <div class="css-form-detail">
                                                                            <span data-bind="text:sLoaiHangHoa"></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group floatleft">
                                                                        <label class="css-form-label">Định mức tồn:</label>
                                                                        <div class="css-form-label">
                                                                            <span data-bind="text: formatNumber3Digit(TonToiThieu) + ' > '"></span>
                                                                            <span data-bind="text: formatNumber3Digit(TonToiDa)"></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group floatleft">
                                                                        <label class="css-form-label">Giá bán:</label>
                                                                        <div class="css-form-detail">
                                                                            <span data-bind="text: formatNumber3Digit(GiaBan)"></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group floatleft">
                                                                        <label class="css-form-label">Hoa hồng mặc định:</label>
                                                                        <div>
                                                                            <span data-bind="text: formatNumber3Digit(ChietKhauMD_NV)"></span>
                                                                            <!--ko if: ChietKhauMD_NVTheoPT == true-->
                                                                            <span>(%)</span>
                                                                            <!--/ko-->
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xs-12 col-sm-12 col-md-6">
                                                                    <div class="form-group floatleft">
                                                                        <label class="css-form-label">Mô tả:</label>
                                                                        <div class=" css-form-detail">
                                                                            <div class="css-form-detail" data-bind="text:GhiChu"></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="floatleft" style="margin-top:10px">
                                                                        <div class="direct" data-bind="visible: DuocBanTrucTiep == true">
                                                                            <i class="fa fa-check txtGreen"></i> Được bán trực tiếp
                                                                        </div>
                                                                        <div class="direct1" data-bind="visible: DuocBanTrucTiep == false">
                                                                            <i class="fa fa-times txtRed"></i> Không được bán
                                                                        </div>
                                                                        <div class="direct" data-bind="visible: DuocTichDiem !== 1">
                                                                            <i class="fa fa-times txtRed"></i> Không được tích điểm
                                                                        </div>
                                                                        <div class="direct" data-bind="visible: DuocTichDiem == 1">
                                                                            <i class="fa fa-check txtGreen"></i> Được tích điểm
                                                                        </div>
                                                                        <!--ko if: $root.IsGara()-->
                                                                        <div style="margin-right:10px" data-bind="visible: QuanLyBaoDuong == 1">
                                                                            <i class="fa fa-check txtGreen"></i> Quản lý bảo dưỡng
                                                                        </div>
                                                                        <div style="margin-right:10px" data-bind="visible: QuanLyBaoDuong == 0">
                                                                            <i class="fa fa-times txtRed"> </i> Không quản lý bảo dưỡng
                                                                        </div>
                                                                        <!--/ko-->
                                                                        <div class="direct" data-bind="visible: !LaHangHoa && DichVuTheoGio !== 1">
                                                                            <i class="fa fa-times txtRed"></i> Số lượng tính theo thời gian sử dụng
                                                                        </div>
                                                                        <div class="direct" data-bind="visible: !LaHangHoa && DichVuTheoGio === 1">
                                                                            <i class="fa fa-check txtGreen"></i> Số lượng tính theo thời gian sử dụng
                                                                        </div>
                                                                        <div style="margin-right:10px" data-bind="visible: HoaHongTruocChietKhau != 1">
                                                                            <i class="fa fa-times txtRed"></i> Tính hoa hồng trước chiết khấu
                                                                        </div>
                                                                        <div style="margin-right:10px" data-bind="visible: HoaHongTruocChietKhau == 1">
                                                                            <i class="fa fa-check txtGreen"></i> Tính hoa hồng trước chiết khấu
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="floatleft padding-15 flex flex-row " style="justify-content:flex-end">
                                                            <!--ko if: !Xoa && ($root.role_UpdateProduct() || $root.role_CaiDatDinhLuong())-->
                                                            <button class="btn btn-main" data-bind="click: $parent.editHH">
                                                                <i class="fa fa-check-square"></i> Sửa đổi
                                                            </button>
                                                            <!--/ko-->
                                                            <button class="btn btn-save inmavach" style="display:none" data-toggle="modal" data-bind="click: $parent.modalInMaVach">
                                                                <i class="fa fa-barcode"></i>Mã vạch
                                                            </button>
                                                            <!--ko if: $root.role_UpdateProduct() && !Xoa-->
                                                            <button class="btn btn-main" data-bind="click: $parent.ChoPhepKinhDoanh, visible: TrangThai ==false">
                                                                <i class="fa fa-check-square"></i> Cho phép kinh doanh
                                                            </button>
                                                            <button class="btn btn-cancel" data-bind="click: $parent.NgungKinhDoanh, visible: TrangThai ==true ">
                                                                <i class="fa fa-lock"></i> Ngừng kinh doanh
                                                            </button>
                                                            <!--/ko-->
                                                            <!--ko if: $root.role_DeleteProduct() && !Xoa-->
                                                            <button class="btn btn-cancel xoaHH" style="display:none" data-bind="click: $parent.modalDelete">
                                                                <i class="fa fa-trash"></i> Xóa
                                                            </button>
                                                            <!--/ko-->
                                                            <!--ko if: $root.role_DeleteProduct() && Xoa-->
                                                            <a href="javascript: void(0)" class="btn btn-main"
                                                               style="background: rgb(255, 114, 8)" data-bind="click: $root.RestoreProduct">
                                                                <i class="fa fa-recycle"></i> Khôi phục
                                                            </a>
                                                            <!--/ko-->
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="tab-pane" data-bind="attr:{id:'thanhphan' + ID}">
                                                    <div class=" ">
                                                        <table class="table table-js-tk " data-bind="visible:$root.ListThanhPhans().length >0">
                                                            <thead>
                                                                <tr>
                                                                    <th>Mã hàng hóa</th>
                                                                    <th>Tên hàng hóa</th>
                                                                    <th>Số lượng quy cách</th>
                                                                    <th>Số lượng</th>
                                                                    <th>Giá vốn</th>
                                                                    <th>Tiền vốn</th>
                                                                    <th data-bind="visible: LoaiHangHoa === 3">Đơn giá</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody data-bind="foreach: $root.ListThanhPhans">
                                                                <tr>
                                                                    <td data-bind="text: MaHangHoa"></td>
                                                                    <td>
                                                                        <span data-bind="text: TenHangHoa"></span>
                                                                        <span data-bind="visible: MaLoHang" style="color:brown">
                                                                            (Lô: <span data-bind="text: MaLoHang"></span>)
                                                                        </span>
                                                                    </td>
                                                                    <td data-bind="text: formatNumber3Digit(SoLuongQuyCach)"></td>
                                                                    <td data-bind="text: formatNumber3Digit(SoLuong,2)"></td>
                                                                    <td data-bind="text: formatNumber3Digit(GiaVon,2)"></td>
                                                                    <td data-bind="text: formatNumber3Digit(ThanhTien,2)"></td>
                                                                    <td data-bind="visible: $parent.LoaiHangHoa === 3, text: formatNumber3Digit(DonGia,2)"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                        <div class="bg-warning padding-10 text-center" data-bind="visible:$root.ListThanhPhans().length <=0">
                                                            <i>Không có hàng hóa thành phần</i>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="tab-pane" data-bind="attr:{id:'info' + ID}">
                                                    <div class=" ">
                                                        <p data-bind="visible: DonViTinhChuan!= null && DonViTinhChuan != '' ">
                                                            Lưu ý: Thẻ kho được tính trên đơn vị cơ bản, tồn cuối tương ứng với đơn vị (<b data-bind="text: DonViTinhChuan"></b>) là :
                                                            <span data-bind="text: formatNumber3Digit(TonKho)"></span>
                                                        </p>
                                                        <div class="" data-bind="visible: $root.TheKhos().length>0">
                                                            <table class="table table-js-tk ">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Chứng từ</th>
                                                                        <th>Loại chứng từ</th>
                                                                        <th>Thời gian</th>
                                                                        <th>Giá vốn</th>
                                                                        <th>Nhập</th>
                                                                        <th>Xuất</th>
                                                                        <th data-bind="visible: LaHangHoa === true">Tồn lũy kế</th>
                                                                    </tr>
                                                                <tbody data-bind="foreach: $root.TheKhos">
                                                                    <tr>
                                                                        <td>
                                                                            <a href="javascipt:void(0)" data-bind="text: MaHoaDon , event:{click: $root.showpopupTK}"></a>
                                                                        </td>
                                                                        <td data-bind="text: LoaiChungTu"></td>
                                                                        <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''"></td>
                                                                        <td data-bind="text: $root.HangHoa_XemGiaVon() === 'HangHoa_XemGiaVon' ? (QuanLyTheoLoHang === true ? 'Theo Lô Hàng' : formatNumber3Digit(GiaVon,2)): 0"></td>
                                                                        <td data-bind="text: SoLuong > 0 ? formatNumber3Digit(SoLuong) : 0"></td>
                                                                        <td data-bind="text: SoLuong > 0 ? 0 :formatNumber3Digit(SoLuong)"></td>
                                                                        <td>
                                                                            <span data-bind="text: formatNumber3Digit(TonKho),visible: $parent.LaHangHoa === true">
                                                                            </span>
                                                                            &nbsp; &nbsp;
                                                                            <span data-bind="visible: $index()===0 && $root.currentPageTK() == 0 && (LuyKeTonKho !== TonKho || TonKho.toFixed(2) !== $parent.TonKho.toFixed(2))">
                                                                                <button class="btn btn-main" data-bind="click: function(){$root.CapNhatTonKho($parent)}">Cập nhật tồn kho</button>
                                                                            </span>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="page " data-bind="style: { 'justify-content': $root.TotalRecordTK() > 20? 'space-between': 'end'}">
                                                                <div class="flex flex-row" data-bind="visible: $root.TotalRecordTK() > 20">
                                                                    <label>Số bản ghi:</label>
                                                                    <select class="form-control  seleted-page"
                                                                            data-bind="value: $root.pageSizeTK,
                                                                     options: $root.pageSizesTK(), event: {change: $root.ResetCurrentPageTheKho}"></select>
                                                                </div>
                                                                <div class="flex flex-end">
                                                                    <a href="#" data-bind="click: $root.StartPageTheKho, visible: $root.VisibleStartPageTheKho"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                    <a href="#" data-bind="click: $root.BackPageTheKho, visible: $root.VisibleStartPageTheKho "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                    <ul data-bind="foreach: $root.PageList_Display_TheKho">
                                                                        <li>
                                                                            <a href="javascript:void(0)" data-bind="text: pageNumberTK, click: $root.GoToPage, css: $root.GetClass($data)"></a>
                                                                        </li>
                                                                    </ul>
                                                                    <a href="#" data-bind="click: $root.GoToNextPageTheKho, visible: $root.VisibleEndPageTheKho "><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                    <a href="#" data-bind="click: $root.EndPageTheKho, visible: $root.VisibleEndPageTheKho "><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                    <div class="total-recos">Hiển thị <span data-bind="text: $root.fromitemtk"></span> - <span data-bind="text: $root.toitemtk"></span> trên tổng số <span data-bind="text: $root.TotalRecordTK"></span> phiếu kho.</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="bg-warning padding-10 text-center" data-bind="visible: $root.TheKhos().length<=0">
                                                            <i class="">Không có dữ liệu</i>
                                                        </div>

                                                        <div class="flex flex-end" data-bind="visible: $root.TheKhos().length > 0">
                                                            <button type="button" class="btn btn-main" data-bind="click: $root.ExportTheKhoHHtoExcel"> <i class="fa fa-file-excel-o"></i> Xuất file</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="tab-pane" data-bind="attr:{id:'contact' + ID}">
                                                    <div class="  ">
                                                        <table class='table'>
                                                            <tr>
                                                                <th>Chi nhánh</th>
                                                                <th class="text-right w120">Tồn kho</th>
                                                                <th class="text-right w120">Đặt hàng</th>
                                                            </tr>
                                                            <tbody data-bind="foreach: $root.TonKhos">
                                                                <tr>
                                                                    <td data-bind="text:TenDonVi"></td>
                                                                    <td data-bind="text:formatNumber3Digit(TonKho)" class="text-right"></td>
                                                                    <td class="text-right"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <div class="tab-pane" data-bind="attr:{id:'solo' + ID}">
                                                    <div class="">
                                                        <div class="table-responsive solo ">
                                                            <div class="flex flex-row padding-15" style="justify-content:flex-end">
                                                                <div class="op-search">
                                                                    <input type="text" class="form-control" placeholder="Tìm kiếm lô" data-bind="event: {keyup: $root.SearchLoHang}, " />
                                                                    <i class="fa fa-search op-search-icon" aria-hidden="true"></i>
                                                                </div>
                                                                <div class="select-lot">
                                                                    <select class="form-control ddlNhomNN" data-bind="options: $root.ListCheckLo ? $root.ListCheckLo : [],
                                                                    optionsText: 'name', optionsValue: 'value',
                                                                    value:  $root.CheckConHang "></select>
                                                                </div>
                                                            </div>
                                                            <table class='table'>
                                                                <thead>
                                                                    <tr>
                                                                        <th>
                                                                            Mã lô hàng
                                                                        </th>
                                                                        <th>
                                                                            Ngày sản xuất
                                                                        </th>
                                                                        <th>
                                                                            Hạn sử dụng
                                                                        </th>
                                                                        <th class="text-right">Số lượng</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody data-bind="foreach: $root.ListTonTheoLo">
                                                                    <tr class="solo-show" data-bind="click: $root.ClickTheKhoByLoHang">
                                                                        <td data-bind="text:MaLoHang"></td>
                                                                        <td data-bind="text: moment(NgaySanXuat).format('DD/MM/YYYY')!='Invalid date'? moment(NgaySanXuat).format('DD/MM/YYYY'):''"></td>
                                                                        <td data-bind="text: moment(NgayHetHan).format('DD/MM/YYYY')!='Invalid date'? moment(NgayHetHan).format('DD/MM/YYYY'):''"></td>
                                                                        <td class="text-right" data-bind="text: formatNumber3Digit(TonKho)">50</td>
                                                                    </tr>
                                                                    <tr class="tr-hide-detailsolo" hidden>
                                                                        <td colspan="4">
                                                                            <div class="col-md-12 ">
                                                                                <h4>Thông tin chi tiết</h4>
                                                                            </div>
                                                                            <div class="col-md-12 table-res ">
                                                                                <table class='table'>
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th>Chứng từ</th>
                                                                                            <th>Loại chứng từ</th>
                                                                                            <th>Thời gian</th>
                                                                                            <th>Giá vốn</th>
                                                                                            <th>Nhập</th>
                                                                                            <th>Xuất</th>
                                                                                            <th>Tồn lũy kế</th>
                                                                                        </tr>
                                                                                    <tbody data-bind="foreach: $root.ListTheKhoByLoHang">
                                                                                        <tr>
                                                                                            <td>
                                                                                                <a href="javascipt:void(0)" data-bind="text: MaHoaDon , event:{click: $root.showpopupTK}"></a>
                                                                                            </td>
                                                                                            <td data-bind="text: LoaiChungTu"></td>
                                                                                            <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''"></td>
                                                                                            <td data-bind="text: $root.HangHoa_XemGiaVon() === 'HangHoa_XemGiaVon' ? formatNumber3Digit(GiaVon,2): 0"></td>
                                                                                            <td data-bind="text: SoLuong > 0 ? formatNumber3Digit(SoLuong) : 0"></td>
                                                                                            <td data-bind="text: SoLuong > 0 ? 0 :formatNumber3Digit(SoLuong)"></td>
                                                                                            <td>
                                                                                                <span data-bind="text: formatNumber3Digit(TonKho,3)">
                                                                                                </span>
                                                                                                &nbsp; &nbsp;
                                                                                                <span data-bind="visible: $index()===0 && $root.currentPageLH() == 0  && (LuyKeTonKho !== TonKho || TonKho.toFixed(2) !== $parent.TonKho.toFixed(2) )">
                                                                                                    <button class="btn btn-main" data-bind="click: function(){$root.CapNhatTonKho($parent)}">Cập nhật tồn kho</button>
                                                                                                </span>
                                                                                            </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                            <div class="page" data-bind="style: { 'justify-content': $root.TotalRecordLH() > 20? 'space-between': 'end'}">
                                                                                <div class="flex flex-row" data-bind="visible: $root.TotalRecordLH() > 20">
                                                                                    <label>Số bản ghi:</label>
                                                                                    <select class="form-control  seleted-page"
                                                                                            data-bind="value: $root.pageSizeLH,
                                                                                         options: $root.pageSizesLH(), event: {change: $root.ResetCurrentPageTheKho}"></select>
                                                                                </div>
                                                                                <div class="flex flex-end">
                                                                                    <a href="#" data-bind="click: $root.StartPageLoHang, visible: $root.VisibleStartPageLoHang"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                                    <a href="#" data-bind="click: $root.BackPageLoHang, visible: $root.VisibleStartPageLoHang "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                                    <ul data-bind="foreach: $root.PageList_Display_TheKhoLoHang">
                                                                                        <li>
                                                                                            <a href="javascript:void(0)" data-bind="text: pageNumberLH, click: $root.GoToPageLoHang, css: $root.GetClassLoHang($data)"></a>
                                                                                        </li>
                                                                                    </ul>
                                                                                    <a href="#" data-bind="click: $root.GoToNextPageLoHang, visible: $root.VisibleEndPageLoHang "><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                                    <a href="#" data-bind="click: $root.EndPageLoHang, visible: $root.VisibleEndPageLoHang "><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                                    <div class="total-recos">Hiển thị <span data-bind="text: $root.fromitemlh"></span> - <span data-bind="text: $root.toitemlh"></span> trên tổng số <span data-bind="text: $root.TotalRecordLH"></span> phiếu kho.</div>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="tab-pane tab-chiet-khau" data-bind="attr:{id:'hoahong' + ID}">
                                                    <div class=" ">
                                                        <div class="table-responsive solo " border="0">
                                                            <div class="flex flex-row" style="justify-content:flex-end; padding:15px 0">
                                                                <button type="button" class="btn btn-main height-30 btn-tree-check" data-bind="click: $root.ShowPop_ChoseNhanVien">
                                                                    <i class="fa fa-list-alt"></i>
                                                                </button>
                                                                <div class="op-search">
                                                                    <input type="text" class="form-control" placeholder="Tìm kiếm nhân viên"
                                                                           data-bind="value: $root.searchNVien_ChietKhau_HangHoa, valueUpdate:'afterkeydown'" />
                                                                    <i class="fa fa-search op-search-icon" aria-hidden="true"></i>
                                                                </div>
                                                            </div>
                                                            <table style="width :100%">
                                                                <thead>
                                                                    <tr>
                                                                        <th>
                                                                            Mã Nhân viên
                                                                        </th>
                                                                        <th>
                                                                            Tên nhân viên
                                                                        </th>
                                                                        <th>
                                                                            Hoa hồng thực hiện
                                                                        </th>
                                                                        <th class="text-center">
                                                                            Hoa hồng NV hỗ trợ
                                                                        </th>
                                                                        <th>
                                                                            Hoa hồng tư vấn
                                                                        </th>
                                                                        <th>
                                                                            Hoa hồng bán gói dịch vụ
                                                                        </th>
                                                                        <th style="width:50px"></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody data-bind="foreach: $root.PageResult_ChietKhauNV">
                                                                    <tr>
                                                                        <td data-bind="text: MaNhanVien"></td>
                                                                        <td data-bind="text: TenNhanVien"></td>
                                                                        <td>
                                                                            <input type="text" class="form-control text-right price-discount"
                                                                                   data-bind="value: LaPhanTram?ChietKhau +' %': formatNumber3Digit(ChietKhau) + ' đ',
                                                                               click: function(){$root.ShowChietKhau_NhanVien($data, 1)}">
                                                                            <div class="callprice  w415">
                                                                                <div class="flex  flex-between ">
                                                                                    <label>
                                                                                        Hoa hồng thực hiện =
                                                                                    </label>
                                                                                    <div class="flex _js">
                                                                                        <input type="text" class="form-control number-price " onkeypress="return getNumber(event, this)"
                                                                                               data-bind="event:{keyup: $root.EditChietKhau_NhanVien}">
                                                                                        <div class="plus"
                                                                                             data-bind="css: {gb: !LaPhanTram},click: function(){ $root.ClickChietKhau_VND ($data, $parent)}">VNĐ</div>
                                                                                        <div class="plus gb"
                                                                                             data-bind="css: {gb: LaPhanTram},click: function(){ $root.ClickChietKhau_Ptram ($data, $parent)}">%</div>
                                                                                    </div>
                                                                                </div>
                                                                                <p class="floatleft form-check-left">
                                                                                    <input type="checkbox" value="true">
                                                                                    <label class="font-w-400 ft-italic lb-check-note-ck">
                                                                                        Áp dụng công thức cho
                                                                                        <strong data-bind="text: $root.CountNVien_ChietKhau"></strong>
                                                                                        nhân viên?
                                                                                    </label>
                                                                                </p>
                                                                                <div class="pull-right" data-bind="click: function() {$root.AgreeApply_ChietKhau($parent, $data, 1)}">
                                                                                    <a href="javascript:void(0);" class="cantrol">Áp dụng</a>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <input type="text" class="form-control newprice" style="background-color:white"
                                                                                   data-bind="value: LaPhanTram_YeuCau?ChietKhau_YeuCau +' %': formatNumber3Digit(ChietKhau_YeuCau) + ' đ',click: function(){$root.ShowChietKhau_NhanVien($data, 4)}">
                                                                            <div class="callprice  w590">
                                                                                <p class="floatleft form-check-left no-magrin" hidden>
                                                                                    <input type="checkbox" class="_check-change-gia-ban"
                                                                                           data-bind="value: $root.CKYeuCau_ApplyGiaBan, checked: $root.CKYeuCau_ApplyGiaBan()==true, event:{change: $root.CKYeuCau_ChangeLoaiApDung}">
                                                                                    <label class="font-w-400 lb-check-note-ck">Tính theo giá bán</label>
                                                                                </p>
                                                                                <div class="flex  flex-between">
                                                                                    <label class="lblYeuCau"> Hoa hồng NV hỗ trợ </label>
                                                                                    <div class="flex  _js">
                                                                                        <input type="text" class="form-control number-price"
                                                                                               onkeypress="return getNumber(event,this)"
                                                                                               data-bind="event:{keyup: $root.EditChietKhau_NhanVien}">
                                                                                        <div class="plus"
                                                                                             data-bind="css: {gb: !LaPhanTram_YeuCau},click: function(){ $root.ClickChietKhau_VND ($data, $parent)}">VNĐ</div>
                                                                                        <div class="plus gb"
                                                                                             data-bind="css: {gb: LaPhanTram_YeuCau},click: function(){ $root.ClickChietKhau_Ptram ($data, $parent)}">% Giá bán</div>
                                                                                    </div>
                                                                                </div>
                                                                                <p class="floatleft form-check-left">
                                                                                    <input type="checkbox" value="true"> <label class="font-w-400 ft-italic lb-check-note-ck">
                                                                                        Áp dụng công thức cho <strong data-bind="text: $root.CountNVien_ChietKhau"></strong>  nhân viên?
                                                                                    </label>
                                                                                </p>
                                                                                <div class="pull-right" data-bind="click: function() {$root.AgreeApply_ChietKhau($parent, $data, 4)}">
                                                                                    <a href="javascript:void(0);" class="cantrol">Áp dụng</a>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <input type="text" class="form-control text-right price-discount"
                                                                                   data-bind="value: LaPhanTram_TuVan?ChietKhau_TuVan +' %': formatNumber3Digit(ChietKhau_TuVan) +' đ', click: function(){$root.ShowChietKhau_NhanVien($data, 2)}">
                                                                            <div class="callprice  w415">
                                                                                <div class="flex  flex-between">
                                                                                    <label>
                                                                                        Hoa hồng tư vấn =
                                                                                    </label>
                                                                                    <div class="flex  _js">
                                                                                        <input type="text" class="form-control number-price" onkeypress="return getNumber(event, this)"
                                                                                               data-bind="event:{keyup: $root.EditChietKhau_NhanVien}">
                                                                                        <div class="plus"
                                                                                             data-bind="css: {gb: !LaPhanTram_TuVan},click: function(){ $root.ClickChietKhau_VND ($data, $parent)}">VNĐ</div>
                                                                                        <div class="plus gb"
                                                                                             data-bind="css: {gb: LaPhanTram_TuVan},click: function(){ $root.ClickChietKhau_Ptram ($data, $parent)}">%</div>
                                                                                    </div>
                                                                                </div>
                                                                                <p class="floatleft form-check-left">
                                                                                    <input type="checkbox" value="true">
                                                                                    <label class="font-w-400 ft-italic lb-check-note-ck">
                                                                                        Áp dụng công thức cho
                                                                                        <strong data-bind="text: $root.CountNVien_ChietKhau"></strong>
                                                                                        nhân viên?
                                                                                    </label>
                                                                                </p>
                                                                                <div class="pull-right" data-bind="click: function() {$root.AgreeApply_ChietKhau($parent, $data, 2)}">
                                                                                    <a href="javascript:void(0);" class="cantrol">Áp dụng</a>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <input type="text" class="form-control newprice" style="background-color:white"
                                                                                   data-bind="value: LaPhanTram_BanGoi?ChietKhau_BanGoi +' %': formatNumber3Digit(ChietKhau_BanGoi) +' đ', click: function(){$root.ShowChietKhau_NhanVien($data, 3)}">
                                                                            <div class="callprice  w415">
                                                                                <div class="flex  flex-between">
                                                                                    <label>
                                                                                        Hoa hồng bán gói dịch vụ =
                                                                                    </label>
                                                                                    <div class="flex  _js">
                                                                                        <input type="text" class="form-control number-price "
                                                                                               onkeypress="return getNumber(event, this)" data-bind="event:{keyup: $root.EditChietKhau_NhanVien}">
                                                                                        <div class="plus"
                                                                                             data-bind="css: {gb: !LaPhanTram_BanGoi},click: function(){ $root.ClickChietKhau_VND ($data, $parent)}">VNĐ</div>
                                                                                        <div class="plus gb"
                                                                                             data-bind="css: {gb: LaPhanTram_BanGoi},click: function(){ $root.ClickChietKhau_Ptram ($data, $parent)}">%</div>
                                                                                    </div>
                                                                                </div>
                                                                                <p class="floatleft form-check-left">
                                                                                    <input type="checkbox" value="true">
                                                                                    <label class="font-w-400 ft-italic lb-check-note-ck">
                                                                                        Áp dụng công thức cho
                                                                                        <strong data-bind="text: $root.CountNVien_ChietKhau"></strong>
                                                                                        nhân viên?
                                                                                    </label>
                                                                                </p>
                                                                                <div class="pull-right" data-bind="click: function() {$root.AgreeApply_ChietKhau($parent, $data, 3)}">
                                                                                    <a href="javascript:void(0);" class="cantrol">Áp dụng</a>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <a href="javascript:void(0)" style="color:red" data-bind="click: function(){$root.DeleteNhanVien_fromListCK($data,$parent)} ">
                                                                                <i class="fa fa-times" aria-hidden="true"></i>
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>

                                                            </table>
                                                            <div class="bg-warning padding-10 text-center" data-bind="visible: $root.PageResult_ChietKhauNV().length<=0">
                                                                <i>Không có dữ liệu</i>
                                                            </div>
                                                            <div class="page">
                                                                <div class="flex flex-end">
                                                                    <a href="javascript:void(0)" data-bind="click: $root.StartPageListCK, visible: $parent.VisibleStartPageListCK "><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                    <a href="javascript:void(0)" data-bind="click: $root.BackPageListCK, visible:  $parent.VisibleStartPageListCK "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                    <ul data-bind="foreach:  $parent.PageListChietKhauNV">
                                                                        <li>
                                                                            <a href="javascript:void(0)" data-bind="text: pageNumber, click: $root.GoToPageListCK, css: $root.GetClassListCK($data)"></a>
                                                                        </li>
                                                                    </ul>
                                                                    <a href="javascript:void(0)" data-bind="click: $root.GoToNextPageListCK, visible:  $parent.VisibleEndPageListCK"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                    <a href="javascript:void(0)" data-bind="click: $root.EndPageListCK, visible:  $parent.VisibleEndPageListCK"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                    <div class="total-recos">
                                                                        Hiển thị <span data-bind="text:  $parent.fromitemListCK"></span> - <span data-bind="text:  $parent.toitemListCK"></span> trên tổng số
                                                                        <span data-bind="text:  $parent.TotalRecordListCK"></span> bản ghi
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="tab-pane tab-chiet-khau" data-bind="attr:{id:'baoduong_'+ ID}"
                                                     style="width:820px;padding: 15px 72px">
                                                    <div class="flex flex-between" style="margin: 2px 0 6px;">
                                                        <label>
                                                            <input type="checkbox" name="name"
                                                                   data-bind="checkedValue: true,
                                                                             checked: $root.QuanLyBaoDuong" /> Quản lý lịch bảo dưỡng
                                                        </label>
                                                    </div>
                                                    <div class="flex flex-between" style="margin: 2px 0 6px;">
                                                        <label>
                                                            Loại bảo dưỡng
                                                        </label>
                                                        <div class="flex flex-row op-form-group ">
                                                            <div class="dropdown" style="position: relative; width:150px">
                                                                <div class="  floatleft " data-toggle="dropdown" aria-expanded="false">
                                                                    <div class="form-control" style="cursor:pointer" data-bind="text: $root.BaoDuong_TypeText"></div>
                                                                </div>
                                                                <div class="dropdown-menu" style="width:100%; max-height:330px;">
                                                                    <div class=" flex flex-column ">
                                                                        <ul class="group-parent floatleft">
                                                                            <li data-bind="foreach :  $root.BaoDuong_ListType">
                                                                                <div class="group-p1">
                                                                                    <a data-bind="text: Text"></a>
                                                                                    @*<span class="pull-right"
                                                                                        data-bind="visible: LoaiBaoDuong ==  $parent.LoaiBaoDuong"></span>*@
                                                                                </div>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div style="position: relative; border: 1px solid #ccc;">
                                                        <div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th class="text-center width-100" style="border: 1px solid #ccc;">Lần</th>
                                                                        <th class="text-center">Từ</th>
                                                                        <th class="text-center" data-bind="visible: $root.BaoDuong_VisibleColumnRepeater">Lặp lại</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody data-bind="foreach: $root.BaoDuong_ListDetail">
                                                                    <tr>
                                                                        <td class="text-center" data-bind="text: LanBaoDuong"></td>
                                                                        <td>
                                                                            <div style="position: relative;">
                                                                                <input class="form-control text-center" type="text"
                                                                                       onkeypress="keypressNumber_limitNumber(event, this)"
                                                                                       data-bind="value: formatNumber3Digit(GiaTri),
                                              ">
                                                                                <select class="form-control select-add-input"
                                                                                        data-bind="options: $root.BaoDuong_TypeDate_Filter,
                                            optionsText: 'Text', optionsValue: 'ID',
                                            value: $data.LoaiGiaTri,
                                                "></select>

                                                                            </div>
                                                                        </td>
                                                                        <td class="text-center" data-bind="visible: $root.BaoDuong_VisibleColumnRepeater">
                                                                            <input type="checkbox"
                                                                                   data-bind="checkedValue: true, checked: LapDinhKy,
                                                                                   visible: LapDinhKy" />
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>

                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <!--/ko-->
                            </tbody>
                            <tfoot id="tongton">
                                <tr class="border-bottom">
                                    <td class="bg12"></td>
                                    <td class="bg12 mahang bold" data-bind="attr: { colspan: 7 - $root.ColumnsExcel().filter(p=> p < 7).length }">Tổng cộng</td>
                                    <!--ko if: $root.ColumnsExcel().indexOf('7') < 0-->
                                    <td class="bg12  bold text-right">
                                        <span data-bind="text: formatNumber3Digit($root.TongTon())"></span>
                                    </td>
                                    <!--/ko-->
                                    <td class="bg12" data-bind="attr: { colspan: 2 - $root.ColumnsExcel().filter(p=> p > 7).length }"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div class="page">
                        <div class="flex flex-row">
                            <label>Số bản ghi:</label>
                            <select id="SelecttedPage" class="form-control seleted-page width-75" data-bind="value: pageSize,
                                                options: pageSizes, event: {change: ResetCurrentPage}"></select>
                        </div>
                        <div class="flex flex-end">
                            <div class="flex ">
                                <button data-bind="click: $root.StartPage, visible: VisibleStartPage"><i class="fa fa-step-backward" aria-hidden="true"></i></button>
                                <button data-bind="click: $root.BackPage, visible: VisibleStartPage "><i class="fa fa-caret-left" aria-hidden="true"></i></button>
                                <ul data-bind="foreach: PageList_Display">
                                    <li>
                                        <button data-bind="text: pageNumber, click: $root.GoToPageHD, css: $root.GetClassHD($data)"></button>
                                    </li>
                                </ul>
                                <button data-bind="click: $root.GoToNextPage, visible: VisibleEndPage "><i class="fa fa-caret-right" aria-hidden="true"></i></button>
                                <button data-bind="click: $root.EndPage, visible: VisibleEndPage "><i class="fa fa-step-forward" aria-hidden="true"></i></button>
                            </div>
                            <div class="flex page-description" style="align-items:center">
                                <span> Hiển thị </span>
                                <span data-bind="text: fromitem"></span>
                                <span>- </span><span data-bind="text: toitem"></span>
                                <span>trên tổng số</span>
                                <span data-bind="text: TotalRecord"></span>
                                <span>mã hàng hóa.</span>
                            </div>
                        </div>
                    </div>
                </div>
                <script>
                    function opendirectmodal1(ele) {
                        if ($("#MainLayout ").hasClass("width-200")) {
                            $(ele).parent().parent().next(".detail-panel").addClass("width-200")
                        } else {
                            $(ele).parent().parent().next(".detail-panel").removeClass("width-200")
                        };
                        $(ele).parent().parent().next(".detail-panel").find(".1-panel-toggle").show();
                        $(ele).parent().parent().next(".detail-panel").delay(300).animate({
                            left: "0",
                            width: "toggle",
                        });
                        $(".op-header").delay(200).toggleClass("z0");
                    };
                    function hidepanel(ele) {
                        $(ele).parent().parent().parent().animate({
                            left: "-100vw",
                            width: "toggle"
                        })
                        $(".op-header").delay(200).toggleClass("z0");
                    }
                    function showinfor(ele) {
                        $(ele).parent().parent().find(".tab-panel .toggle-panel").hide("fast");
                        $(ele).parent().siblings().find(".toggle-sign").prev().show();
                        $(ele).parent().siblings().find(".toggle-sign").hide();
                        if ($(ele).next().css("display") == ("none")) {
                            $(ele).next().fadeIn("fast");
                            $(ele).find("i").toggle();
                            return;
                        }
                        $(ele).find("i").toggle();
                    }

                </script>
            </div>
        </div>
        <div class="model-images">
            <div class="model-imagesinner" data-bind="foreach: $root.arrAnhAvt">
                <img data-bind="attr: {src: Open24FileManager.hostUrl + URLAnh}" />
            </div>
            <a href="javascript:void(0)" class="deletelistimg" data-bind="click: $root.closeAnh"><i class="fa fa-close"></i></a>
        </div>
    </div>
</div>
<div class="modal fade" id="modalPopup_NhomHHDV">
    <div class="modal-dialog draggable  ">
        @Html.Action("_Suahanghoa", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class=" modal fade op-js-modal" id="modalPopup_AddNhomHHDV">
    @Html.Action("_themmoicapnhatnhomhanghoa", new { area = "", Controller = "HangHoa" })
</div>

<div class="modal fade" id="modalpopup_deleteHH">
    <div id="modalContainer_delete" class="modal-md modal-dialog">
        <div class="modal-content  ">
            <div class="modal-body">
                <div class="title-delete">
                    <span>Xóa hàng hóa</span>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
                </div>
                Bạn có chắc chắn muốn xóa sản phẩm <span style="font-weight:bold" data-bind="text: deleteMaHangHoa"></span> khỏi danh mục hàng hóa.
                <div class="modal-footer">
                    <button type="button" class="btn btn-main" data-dismiss="modal" data-bind="click: xoaHH"><i class="fa fa-check"></i> Đồng ý</button>
                    <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i>Bỏ qua</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade delete" id="modalpopup_deleteNHH">
    <div id="modalContainer_delete" class="modal-md modal-dialog ">
        <div class="modal-content ">
            <div class="modal-header">
                <span class="op-header-title">Xóa nhóm hàng hóa</span>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn xóa nhóm hàng <span style="font-weight:bold" data-bind="text: newNhomHangHoa().TenNhomHangHoa()"></span> này.
            </div>
            <div class="modal-footer">
                <div class="container-fluid">
                    <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i> Bỏ qua</button>
                    <button type="button" class="btn btn-main" data-dismiss="modal" data-bind="click: xoaNHH"><i class="fa fa-check"></i> Đồng ý</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modalPopuplg_TheKho">
    <div class="modal-dialog draggable modal-lg">
        @Html.Action("_hienthithekho", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class="modal fade" id="modalPopuplg_NhapHang">
    <div class="modal-dialog draggable modal-lg">
        @Html.Action("_showphieunhaphang", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class="modal fade" id="modalpopup_KiemKho">
    <div class="modal-dialog draggable modal-lgmax">
        @Html.Action("_showphieukiemhangct", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class="modal fade" id="modalpopup_PhieuBH">
    <div class="modal-dialog draggable modal-lgmax">
        @Html.Action("_showphieubanhang", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class="modal fade" id="modalpopup_PhieuXH">
    <div class="modal-dialog draggable modal-lg">
        @Html.Action("_showphieuxuathuy", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class="modal fade" id="modalpopup_PhieuTH">
    <div class="modal-dialog draggable modal-lgmax">
        @Html.Action("_showphieutrahang", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class="modal fade" id="modalpopup_PhieuTHN">
    <div class="modal-dialog draggable modal-lgmax">
        @Html.Action("_showphieutrahangnhap", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class="modal fade" id="modalpopup_PhieuDieuChinh">
    <div id="modalContainerlg_PhieuDieuChinh" class="modal-dialog draggable modal-lg">
        @Html.Action("_showphieudieuchinh", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class="modal fade " id="modalThemThuocTinh">
    <div class=" modal-dialog draggable modal-md" role="document">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
                <h4 class="modal-title thuoctinhten">Sửa thuộc tính</h4>
            </div>
            <div class="modal-body">
                <div class="form-group" data-bind="with: newThuocTinh">
                    <div class="col-sm-4 col-md-4 control-label text-left">Tên thuộc tính</div>
                    <div class="col-sm-8 col-md-8">
                        <div class="row">
                            <input type="text" id="txtTenThuocT" autofocus class="form-control" data-bind="value: TenThuocTinh">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="container-fluid">
                    <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i> Bỏ qua</button>
                    <button type="button" class="btn btn-delete" data-dismiss="modal" data-bind="click: $root.modaldeleteTT"><i class="fa fa-trash"></i>Xóa bỏ</button>
                    <button type="button" class="btn btn-save" data-bind="click: $root.AddThuocTinh"><i class="fa fa-save"></i> Lưu</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade " id="modalpopup_deleteThuocTinh">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content ">
            <div class="modal-header">
                <span>Xóa thuộc tính</span>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn <span class="bold red">XÓA</span> thuộc tính này?
            </div>
            <div class="modal-footer ">
                <div class="container-fluid">
                    <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i>Bỏ qua</button>
                    <button type="button" class="btn btn-main" data-dismiss="modal" data-bind="click: deleteThuocTinh"><i class="fa fa-check"></i> Đồng ý</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="myModalprint" aria-labelledby="myModalLabel">
    <div class="modal-dialog draggable modal-md" role="document">
        @Html.Action("_print", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class=" modal fade" id="myModalprintChooseHH" aria-labelledby="myModalLabel">
    <div class="modal-dialog draggable modal-md" role="document">
        @Html.Action("_printchooseHH", new { area = "", Controller = "HangHoa" })
    </div>
</div>
@*print*@
<div class="printpage" id="printtemcuon">
    <div class="inner-print">
        <div class="floatleft">
            <div class="title-print">
                <h4>In mã vạch</h4>
                <button type="button" class="close-print"><span aria-hidden="true">×</span></button>
            </div>
            <div class="control-print floatleft text-center">
                <a href="javascript:void(0)" onclick="javascript:printDiv2('img-print')">
                    <i class="fa fa-print icon-print"></i>
                </a>
            </div>
            <div class="content-print-page floatleft">
                <div class="img-print " id="img-print" data-bind="foreach: {data: $root.arrPrintBarCode, afterRender: initBarcode}">
                    <div style="width: 134px;float:left;text-align:center;height:81.96px;">
                        <div class="floatleft text-center" style="font-size: 10px;max-height:24px;line-height: 10px;">
                            <span data-bind="text: TenHangHoa">
                            </span>
                            <span data-bind="foreach: HangHoa_ThuocTinh">
                                <span data-bind="text:'-' + GiaTri" style="color:#ff6a00"></span>
                            </span>
                            <span data-bind="if: (DonViTinhChuan != '' && DonViTinhChuan != null)">(<span data-bind="text: DonViTinhChuan"></span>)</span>
                        </div>
                        <svg class="barcode" jsbarcode-format="code128" data-bind="attr: {'jsbarcode-value' : MaHangHoa}" jsbarcode-textmargin="0" jsbarcode-fontSize="0" jsbarcode-height="30" jsbarcode-width="1" jsbarcode-marginLeft="5" jsbarcode-marginRight="5" jsbarcode-marginTop="1" jsbarcode-marginBottom="1"></svg>
                        <!-- ko if: $root.CheckInMaHang() == true-->
                        <div data-bind="text: MaHangHoa" class="text-center" style="font-size: 10px;padding:0 !important;" id="mahanghoa"></div>
                        <!--/ko-->
                        <!-- ko if: $root.CheckInBangGia() == true-->
                        <div class="text-center" style="font-size: 13px;font-weight:bold;"><span data-bind="text: formatNumber3Digit(GiaBan)" class="text-center "></span> VNĐ</div>
                        <!--/ko-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="printpage" id="printtemcuon2tem">
    <div class="inner-print">
        <div class="floatleft">
            <div class="title-print">
                <h4>In mã vạch 2 tem</h4>
                <button type="button" class="close-print"><span aria-hidden="true">×</span></button>
            </div>
            <div class="control-print floatleft text-center">
                <a href="javascript:void(0)" onclick="javascript:printDiv2Tem('img-print2tem')">
                    <i class="fa fa-print icon-print"></i>
                </a>
            </div>
            <div class="content-print-page floatleft">
                <div class="img-print " id="img-print2tem" data-bind="foreach: {data: $root.arrPrintBarCode, afterRender: initBarcode}">
                    <div style="width: 134px;float:left;text-align:center;height:81.96px;">
                        <div class="floatleft text-center" style="font-size: 10px;max-height:24px;line-height: 10px;">
                            <span data-bind="text: TenHangHoa">
                            </span>
                            <span data-bind="foreach: HangHoa_ThuocTinh">
                                <span data-bind="text:'-' + GiaTri" style="color:#ff6a00"></span>
                            </span>
                            <span data-bind="if: (DonViTinhChuan != '' && DonViTinhChuan != null)">(<span data-bind="text: DonViTinhChuan"></span>)</span>
                        </div>
                        <svg class="barcode" jsbarcode-format="code128" data-bind="attr: {'jsbarcode-value' : MaHangHoa}" jsbarcode-textmargin="0" jsbarcode-fontSize="0" jsbarcode-height="30" jsbarcode-width="1" jsbarcode-marginLeft="10" jsbarcode-marginRight="10" jsbarcode-marginTop="1" jsbarcode-marginBottom="1"></svg>
                        <!-- ko if: $root.CheckInMaHang() == true-->
                        <div data-bind="text: MaHangHoa" class="text-center" style="font-size: 10px;padding:0 !important;" id="mahanghoa"></div>
                        <!--/ko-->
                        <!-- ko if: $root.CheckInBangGia() == true-->
                        <div class="text-center" style="font-size: 13px;font-weight:bold;"><span data-bind="text: formatNumber3Digit(GiaBan)" class="text-center "></span> VNĐ</div>
                        <!--/ko-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="printpage" id="printtemtomy">
    <div class="inner-print">
        <div class="floatleft">
            <div class="title-print">
                <h4>In mã vạch</h4>
                <button type="button" class="close-print"><span aria-hidden="true">×</span></button>
            </div>
            <div class="control-print floatleft text-center">
                <a href="javascript:void(0)" onclick="javascript:printDivTomy('img-printtomy')">
                    <i class="fa fa-print icon-print"></i>
                </a>
            </div>
            <div class="content-print-page floatleft">
                <div class="img-print " id="img-printtomy" data-bind="foreach: {data: $root.arrPrintBarCode, afterRender: initBarcode}">
                    <div style="width: 37.8mm;float:left;text-align:center;height:20.9mm;padding:1px;">
                        <div class="floatleft text-center" style="font-size: 10px;max-height:24px;line-height: 10px;">
                            <span data-bind="text: TenHangHoa">
                            </span>
                            <span data-bind="foreach: HangHoa_ThuocTinh">
                                <span data-bind="text:'-' + GiaTri" style="color:#ff6a00"></span>
                            </span>
                            <span data-bind="if: (DonViTinhChuan != '' && DonViTinhChuan != null)">(<span data-bind="text: DonViTinhChuan"></span>)</span>
                        </div>
                        <svg class="barcode" jsbarcode-format="code128" data-bind="attr: {'jsbarcode-value' : MaHangHoa}" jsbarcode-textmargin="0" jsbarcode-fontSize="0" jsbarcode-height="30" jsbarcode-width="1" jsbarcode-marginLeft="10" jsbarcode-marginRight="10" jsbarcode-marginTop="1" jsbarcode-marginBottom="1"></svg>
                        <!-- ko if: $root.CheckInMaHang() == true-->
                        <div data-bind="text: MaHangHoa" class="text-center" style="font-size: 10px;padding:0 !important;" id="mahanghoa"></div>
                        <!--/ko-->
                        <!-- ko if: $root.CheckInBangGia() == true-->
                        <div class="text-center" style="font-size: 13px;font-weight:bold;"><span data-bind="text: formatNumber3Digit(GiaBan)" class="text-center "></span> VNĐ</div>
                        <!--/ko-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@*print thuộc tính hàng hóa*@
<div class="printpage-a4" id="viewPrintThuocTinh">
    <div class="inner-print-a4">
        <div class="floatleft">
            <div class="title-print">
                <h4>In tem thuộc tính</h4>
                <button type="button" class="close-print-thuoctinh"><span aria-hidden="true">x</span></button>
            </div>
            <div class="control-print floatleft text-center">
                <a href="javascript:void(0)" onclick="javascript: printDiv2('printareaInTemThuocTinh')">
                    <i class="fa fa-print icon-print"></i>
                </a>
            </div>
            <div class="content-print-page-a4 " id="printareaInTemThuocTinh">
                <div class="a44tem">
                    <div class="portrait">
                        <!-- ko foreach: new Array($root.SoLuongBanIn()) -->
                        <table class="table-res table-tem">
                            <tbody data-bind="foreach: $root.printThuocTinhCuaHH">
                                <!-- ko if: checkboxChecked == true -->
                                <tr>
                                    <td class="tenthuoctinh" data-bind="text: TenThuocTinh"></td>
                                    <td data-bind="text: GiaTri"></td>
                                </tr>
                                <!-- /ko -->
                            </tbody>
                        </table>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@*Thao tác in mã vạch HH*@
<div class="printpageThaoTac" id="printthaotactemcuon">
    <div class="inner-print">
        <div class="floatleft">
            <div class="title-print">
                <h4>In mã vạch</h4>
                <button type="button" class="close-print" data-bind="click: $root.closeBarCode"><span aria-hidden="true">×</span></button>
            </div>
            <div class="control-print floatleft text-center">
                <a href="javascript:void(0)" onclick="javascript:printDiv2('img-print1')">
                    <i class="fa fa-print icon-print"></i>
                </a>
            </div>
            <div class="content-print-page floatleft">
                <div class="img-print" id="img-print1" data-bind="foreach: {data: $root.arrPrintBarCode, afterRender: initBarcode}">
                    <div style="width: 134px;float:left;text-align:center;height:81.96px;">
                        <div class="floatleft text-center" style="font-size: 10px;max-height:24px;line-height: 10px;">
                            <span data-bind="text: TenHangHoa">
                            </span>
                            <span data-bind="foreach: HangHoa_ThuocTinh">
                                <span data-bind="text:'-' + GiaTri" style="color:#ff6a00"></span>
                            </span>
                            <span data-bind="if: (TenDonViTinh != '' && TenDonViTinh != null)">(<span data-bind="text: TenDonViTinh"></span>)</span>
                        </div>
                        <svg class="barcode" jsbarcode-format="code128" data-bind="attr: {'jsbarcode-value' : MaHangHoa}" jsbarcode-textmargin="0" jsbarcode-fontSize="0" jsbarcode-height="30" jsbarcode-width="1" jsbarcode-marginLeft="10" jsbarcode-marginRight="10" jsbarcode-marginTop="1" jsbarcode-marginBottom="1"></svg>
                        <!-- ko if: $root.CheckInMaHang1() == true-->
                        <div data-bind="text: MaHangHoa" class="text-center" style="font-size: 10px;padding:0 !important;" id="mahanghoa"></div>
                        <!--/ko-->
                        <!-- ko if: $root.CheckInBangGia1() == true-->
                        <div class="text-center" style="font-size: 13px;font-weight:bold;"><span data-bind="text: formatNumber3Digit(GiaBan)" class="text-center "></span> VNĐ</div>
                        <!--/ko-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="printpageThaoTac" id="printthaotactemcuon2tem">
    <div class="inner-print">
        <div class="floatleft">
            <div class="title-print">
                <h4>In mã vạch 2 tem</h4>
                <button type="button" class="close-print" data-bind="click: $root.closeBarCode"><span aria-hidden="true">×</span></button>
            </div>
            <div class="control-print floatleft text-center">
                <a href="javascript:void(0)" onclick="javascript:printDiv2Tem('img-print12tem')">
                    <i class="fa fa-print icon-print"></i>
                </a>
            </div>
            <div class="content-print-page floatleft">
                <div class="img-print" id="img-print12tem" data-bind="foreach: {data: $root.arrPrintBarCode, afterRender: initBarcode}">
                    <div style="width: 134px;float:left;text-align:center;height:81px;">
                        <div class="floatleft text-center" style="font-size: 10px;max-height:24px;line-height: 10px;">
                            <span data-bind="text: TenHangHoa">
                            </span>
                            <span data-bind="foreach: HangHoa_ThuocTinh">
                                <span data-bind="text:'-' + GiaTri" style="color:#ff6a00"></span>
                            </span>
                            <span data-bind="if: (TenDonViTinh != '' && TenDonViTinh != null)">(<span data-bind="text: TenDonViTinh"></span>)</span>
                        </div>
                        <svg class="barcode" jsbarcode-format="code128" data-bind="attr: {'jsbarcode-value' : MaHangHoa}" jsbarcode-textmargin="0" jsbarcode-fontSize="0" jsbarcode-height="30" jsbarcode-width="1" jsbarcode-marginLeft="10" jsbarcode-marginRight="10" jsbarcode-marginTop="1" jsbarcode-marginBottom="1"></svg>
                        <!-- ko if: $root.CheckInMaHang1() == true-->
                        <div data-bind="text: MaHangHoa" class="text-center" style="font-size: 10px;padding:0 !important;" id="mahanghoa"></div>
                        <!--/ko-->
                        <!-- ko if: $root.CheckInBangGia1() == true-->
                        <div class="text-center" style="font-size: 13px;font-weight:bold;"><span data-bind="text: formatNumber3Digit(GiaBan)" class="text-center "></span> VNĐ</div>
                        <!--/ko-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="printpageThaoTac" id="printthaotactomy">
    <div class="inner-print">
        <div class="floatleft">
            <div class="title-print">
                <h4>In mã vạch</h4>
                <button type="button" class="close-print" data-bind="click: $root.closeBarCode"><span aria-hidden="true">×</span></button>
            </div>
            <div class="control-print floatleft text-center">
                <a href="javascript:void(0)" onclick="javascript:printDivTomy('img-printtomy1')">
                    <i class="fa fa-print icon-print"></i>
                </a>
            </div>
            <div class="content-print-page floatleft">
                <div class="img-print" id="img-printtomy1" data-bind="foreach: {data: $root.arrPrintBarCode, afterRender: initBarcode}">
                    <div style="width: 37.8mm;float:left;text-align:center;height:20.9mm;padding:1px;">
                        <div class="floatleft text-center" style="font-size: 10px;max-height:24px;line-height: 10px;">
                            <span data-bind="text: TenHangHoa">
                            </span>
                            <span data-bind="foreach: HangHoa_ThuocTinh">
                                <span data-bind="text:'-' + GiaTri" style="color:#ff6a00"></span>
                            </span>
                            <span data-bind="if: (TenDonViTinh != '' && TenDonViTinh != null)">(<span data-bind="text: TenDonViTinh"></span>)</span>
                        </div>
                        <svg class="barcode" jsbarcode-format="code128" data-bind="attr: {'jsbarcode-value' : MaHangHoa}" jsbarcode-textmargin="0" jsbarcode-fontSize="0" jsbarcode-height="30" jsbarcode-width="1" jsbarcode-marginLeft="10" jsbarcode-marginRight="10" jsbarcode-marginTop="1" jsbarcode-marginBottom="1"></svg>
                        <!-- ko if: $root.CheckInMaHang1() == true-->
                        <div data-bind="text: MaHangHoa" class="text-center" style="font-size: 10px;padding:0 !important;" id="mahanghoa"></div>
                        <!--/ko-->
                        <!-- ko if: $root.CheckInBangGia1() == true-->
                        <div class="text-center" style="font-size: 13px;font-weight:bold;"><span data-bind="text: formatNumber3Digit(GiaBan)" class="text-center "></span> VNĐ</div>
                        <!--/ko-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modalpopup_selectImport" style="z-index: 99999;">
    <div id="modalContainer_selectImport" class="modal-dialog modal-md">
        <div class="modal-content  ">
            <div class="modal-header">
                <h4 class="modal-title">Xác nhận phương thức Import dữ liệu từ file Excel</h4>
                <button type="button" class="close" data-bind="click: ingoPhuongThuc"><i class="material-icons">close</i></button>
            </div>
            <div class="modal-body">
                Cách thức nhập dữ liệu này sẽ làm thay đổi tồn kho hiện tại của hàng hóa.
                Bạn có chắc chắc muốn thực hiện việc cập nhật tồn kho?
            </div>
            <div class="modal-footer">
                <div class="container-fluid">
                    <button class="btn btn-cancel" data-bind="click: ingoPhuongThuc"><i class="fa fa-ban"></i> Bỏ qua</button>
                    <button class="btn btn-main" data-bind="click: checkPhuongThuc"><i class="fa fa-check"></i> Đồng ý</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="myModalinport" class="modal fade">
    <div id="modalContainer_importHH" class="modal-dialog draggable modal-lg">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
                <h4 class="modal-title">Nhập hàng hóa từ File dữ liệu</h4>
            </div>
            <div class="modal-body">
                <div>
                    <div class="col-sm-12 printinport">
                        <ul class="chose_kieuImport">
                            <li value="1" class="flex flex-row">
                                <input type="radio" name="" value="1" id="cbCapNhatKhongTonKho" data-bind="checked: check_kieuImport" /><label style="font-weight: normal!important; font-size: 13px; height:unset" for="cbCapNhatKhongTonKho">Cập nhật thông tin hàng hóa không bao gồm Tồn kho</label>
                            </li>
                            <li value="2" class="flex flex-row">
                                <input type="radio" name="" value="2" id="cbCapNhatTonKho" data-bind="checked: check_kieuImport" id="checkRDO2" /><label style="font-weight: normal!important; font-size: 13px; height:unset" for="cbCapNhatTonKho">Cập nhật tất cả Thông tin & Tồn kho hàng hóa</label>
                            </li>
                        </ul>
                        <div class="floatleft excel-file nopadding" id="importNhapHang">
                            <div data-bind="visible: visibleImport ">
                                <h5 class="floatleft">Nhập hàng hóa từ file Excel - <a href="#" class="link-text" style="float:none;"> Hướng dẫn </a></h5>
                                <div class="title-inport "> Tải về File mẫu <span class="blue " data-bind="click: DownloadFileTeamplateXLS"> Excel 2003</span>  hoặc<span class="blue" data-bind="click: DownloadFileTeamplateXLSX"> bản cao hơn</span></div>
                            </div>
                            <div class="choose-file">
                                @*<div class="btn-modal-file">
                                        <div class="pull-right ClickSelectFile ">
                                            <div class="k-button floatleft table_h">
                                            </div>
                                        </div>
                                    </div>*@
                                <span class="btn btn-import btn-file form-control no-magrin " data-bind="visible: visibleImport ">
                                    Chọn file dữ liệu <input type='file' id="imageUploadForm" name="image" data-bind="event:{ change: SelectedFileImport }"
                                                             accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" />
                                </span>
                                <div class="padingbottom">
                                    <div class="list-file flex flex-row">
                                        <ul style="width:calc(100% - 50px)">
                                            <li class="filterFileSelect">
                                                <span data-bind="text: fileNameExcel"></span>
                                                <div class="delete-file" data-bind="click: deleteFileSelect">
                                                    <img src="/Content/images/icon/Iconthemmoi-17.png">
                                                </div>
                                            </li>
                                        </ul>
                                        <button class="btn btn-main" style="border-radius:15px; margin:0 15px" data-bind="visible:notvisibleImport" title="Chọn lại file">
                                            <i class="fa fa-folder">
                                            </i>
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <button class="btn btn-main btnImportExcel" id="saveImageFolder" data-bind="click: insertArticleNews" style="display: none;"><i class="fa fa-floppy-o"></i> Thực hiện</button>
                                </div>
                            </div>
                        </div>
                        <div class="warning-content floatleft NoteImport">
                            <h4 class="title-alert"><i class="fa fa-warning"></i> Lưu ý</h4>
                            <p>Bạn vui lòng không thay đổi định dạng hàng cột theo file Excel mẫu .</p>
                            <p>Hệ thống cho phép nhập tối đa <span data-bind="text:  number_GioiHanSoMatHang() == 0 || number_GioiHanSoMatHang() > 15000? '15000': number_GioiHanSoMatHang"> </span> mặt hàng mỗi lần từ file Excel 2003 hoặc bản cao hơn .</p>
                            <p>Click vào checkbox "đồng ý..." nếu bạn muốn tiếp tục import dữ liệu bằng cách bỏ qua dữ liệu sai.</p>
                        </div>
                    </div>
                </div>
                <div class="BangBaoLoi">
                    <div class="error-data">
                        <h4 class="bold">Bảng thông báo lỗi</h4>
                    </div>
                    <div class="table-reponsive table_price table_error table-frame">
                        <table class="table  table-hover table-wh">
                            <thead>
                                <tr>
                                    <th>Tên trường dữ liệu</th>
                                    <th>Vị trí</th>
                                    <th>Thuộc tính</th>
                                    <th>Diễn giải<span class="pull-right red " data-bind="click: ShowandHide"><i class="fa fa-refresh fa-lg" aria-hidden="true"></i></span></th>
                                </tr>
                            </thead>
                            <tbody data-bind="foreach: loiExcel">
                                <tr>
                                    <td data-bind="text: TenTruongDuLieu"></td>
                                    <td data-bind="text: ViTri"></td>
                                    <td data-bind="text: ThuocTinh"></td>
                                    <td data-bind="text: DienGiai"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer file-all">
                        <div class="flex flex-between">
                            <div class="form-group pull-left continue-hh choseContinue">
                                <label style="width:unset">
                                    <input type="checkbox" data-bind="checked: ContinueImport" value="0" />
                                    <span>  Đồng ý bỏ qua <a data-bind="text: formatNumber3Digit(sumError())"></a> lỗi và tiếp tục</span>
                                </label>
                            </div>
                            <button type="button" class="btn btn-main  startImport" id="btnLuuHangHoa" data-bind="click: ignoreError">
                                <i class="fa fa-save"></i> Tiếp tục
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="myModalinportUpdate" class="modal fade">
    <div id="modalContainer_import" class="modal-dialog modal-md">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
                <h4 class="modal-title">Sửa thông tin hàng hóa</h4>
            </div>
            <div class="modal-body">
                <div class=" printinport">
                    <label style="width:unset">Danh sách hàng hóa trong file trùng mã nhưng khác tên trên hệ thống: </label>
                    <div class="table-reponsive table_price table-frame">
                        <table class="table  table-hover table-wh">
                            <thead>
                                <tr>
                                    <th class="text-left">Mã hàng hóa</th>
                                    <th class="text-left">Tên hàng hóa trên Excel</th>
                                    <th class="text-left">Tên hàng hóa trên hệ thống</th>
                                </tr>
                            </thead>
                            <tbody data-bind="foreach: updateExcel">
                                <tr>
                                    <td data-bind="text: ThuocTinh"></td>
                                    <td data-bind="text: nameHH_excel"></td>
                                    <td data-bind="text: nameHH_sql"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div style="padding-top: 9px; font-weight: bold;" class="magin-top floatleft table_h10">Bạn có chắc chắn muốn thay đổi thông tin hàng hóa không? </div>
                </div>
            </div>
            <div class="modal-footer ">
                <div class="container-fluid">
                    <button class=" btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i> Bỏ qua</button>
                    <button type="button" class=" btn btn-main" data-bind="click: $root.ExportHangHoa_CapNhat"> <i class="fa fa-file-excel-o"></i> Xuất file</button>
                    <button class=" btn btn-main" data-bind="click: updateHangHoa"><i class="fa fa-check"></i> Đồng ý</button>
                </div>
            </div>
        </div>
    </div>
</div>
@*modal danh sách hàng hóa*@
<div class="modal fade in" id="mymodallist">
    <div id="modalContainerlg_HH" class="modal-dialog draggable modal-lg">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
                <h4 class="modal-title">Danh sách hàng hóa được chọn</h4>
            </div>
            <div class="modal-body">
                <div class="table-reponsive list-commodity-show table-frame">
                    <table class='table'>
                        <thead>
                            <tr>
                                <th class="text-center"><i class="fa fa-times txtpink" data-bind="click: xoaAllChooseHH"></i></th>
                                <th>Mã hàng hóa</th>
                                <th>Tên hàng hóa</th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: ListChooseHH">
                            <tr>
                                <td class="text-center"><i class="fa fa-times txtpink" data-bind="click: $parent.xoaChooseHH"></i></td>
                                <td data-bind="text: MaHangHoa"></td>
                                <td>
                                    <span data-bind="text: TenHangHoa"></span>
                                    <span data-bind="foreach: HangHoa_ThuocTinh">
                                        <span data-bind="text:'-' + GiaTri" style="color:#ff6a00"></span>
                                    </span>
                                    <span data-bind="if: (TenDonViTinh != '' && TenDonViTinh != null)">(<span data-bind="text: TenDonViTinh"></span>)</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
@*modal chuyển nhóm hàng hóa*@
<div class="modal fade in" id="mymodalshipping">
    <div class="modal-dialog draggable modal-md">
        <div class="modal-content  draggable">
            <div class="modal-header">
                <button class="close close-modal" type="button" data-dismiss="modal">×</button>
                <h4 class="modal-title">Chuyển nhóm hàng</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="">Nhóm hàng </label>
                    <div class="form-news">
                        <div class="input-group">
                            <div class="outselect">
                                <div class="  floatleft " data-toggle="dropdown" aria-expanded="false">
                                    <div class="form-control" id="choose_TenNHHChuyenNhom" style="cursor:pointer">---Chọn nhóm---</div>
                                </div>
                                <div class="selec-person dropdown-menu floatleft ">
                                    <div class="seach-nhomhang">
                                        <i class="fa fa-search" style="display:inline-block"></i>
                                        <input type="text" class="seach-nhomhang" data-bind="value: filterNHH, valueUpdate: 'afterkeydown'" style="display:inline-block; width:calc(100% - 50px)">
                                    </div>
                                    <ul id="lstNhomHangChuyenNhom" class="group-parent">
                                        <li data-bind="click : clickFistChonChuyenNhom" class="p-left10">
                                            <a href="javascript:void(0)">---Chọn nhóm---</a>
                                        </li>
                                        <li data-bind="foreach : arrFilterNhomHH_ChuyenNhomHH">
                                            <div class="group-p1" data-bind="click : $root.selectIDNHHChuyenNhom">
                                                <a data-bind="text: TenNhomHangHoa, attr:{id: ID}"></a>
                                                <span data-bind="attr:{id: 'spanCheckNhomChuyenNhom_'+ ID}" class="pull-right"></span>
                                            </div>
                                            <ul class="floatleft" data-bind="foreach: Childs">
                                                <li>
                                                    <div class="group-p2" data-bind="click : $root.selectIDNHHChuyenNhom">
                                                        <a href="javascript:void(0)" data-bind="text: TenNhomHangHoa, attr:{id: ID}"></a>
                                                        <span data-bind="attr:{id: 'spanCheckNhomChuyenNhom_'+ ID}" class="pull-right"></span>
                                                    </div>
                                                    <ul class="floatleft" data-bind="foreach: Child2s">
                                                        <li>
                                                            <div class="group-p3" data-bind="click : $root.selectIDNHHChuyenNhom">
                                                                <a href="javascript:void(0)" data-bind="text: TenNhomHangHoa, attr:{id: ID}"></a>
                                                                <span data-bind="attr:{id: 'spanCheckNhomChuyenNhom_'+ ID}" class="pull-right"></span>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="input-group-btn">
                                <a class="btn btn-default op-js-themmoinhomhang" id="mymodaladd" href="javascript:void(0)"><i class="fa fa-plus"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="container-fluid">
                    <button type="button" data-dismiss="modal" class="btn btn-cancel"><i class="fa fa-ban"></i> Bỏ qua</button>
                    <button type="button" class="btn btn-main" data-bind="click: ChuyenNHH">
                        <i class="fa fa-save"></i>
                        Xong
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
@*im mã vạch*@
<div class="modal fade in " id="mymodaltableprint">
    <div id="modalContainerlg_HH" class="modal-dialog draggable modal-lg">
        <div class="modal-content  ">
            <div class="modal-header">
                <button class="close " type="button" data-dismiss="modal"><i class="material-icons">close</i></button>
                <h4 class="modal-title">In mã vạch</h4>
            </div>
            <div class="modal-body">
                <div class="table-reponsive list-commodity-show">
                    <table class='table'>
                        <thead>
                            <tr>
                                <th class="text-center"><i class="fa fa-times txtpink" data-bind="click: xoaAllChooseHH"></i></th>
                                <th>Mã hàng hóa</th>
                                <th>Tên hàng hóa</th>
                                <th class="text-right">Số lượng</th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: ListChooseHH">
                            <tr>
                                <td class="text-center"><i class="fa fa-times txtpink" data-bind="click: $parent.xoaChooseHH"></i></td>
                                <td data-bind="text: MaHangHoa"></td>
                                <td>
                                    <span data-bind="text: TenHangHoa"></span>
                                    <span data-bind="foreach: HangHoa_ThuocTinh">
                                        <span data-bind="text:'-' + GiaTri" style="color:#ff6a00"></span>
                                    </span>
                                    <span data-bind="if: (TenDonViTinh != '' && TenDonViTinh != null)">(<span data-bind="text: TenDonViTinh"></span>)</span>
                                </td>
                                <td><input data-bind="attr: {id: 'soluongIMV_'+ ID_DonViQuiDoi}, value: formatNumber3Digit(TonKho)" type="text" class="form-control soluongIMV" onkeypress="return keyPress(event)" /></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="container-fluid">
                    <button type="button" class="btn btn-cancel " data-dismiss="modal"><i class="fa fa-ban"></i>Bỏ qua</button>
                    <button class="btn btn-main " data-bind="click: $root.BarCodeChooseHH"><i class="fa fa-floppy-o"></i> In mã vạch</button>
                </div>
            </div>
        </div>
    </div>
</div>
@*In thuộc tính*@
<div class="modal fade in " id="printThuocTinh">
    <div id="modalContainerlg_HH" class="modal-dialog draggable modal-lg">
        <div class="modal-content  ">
            <div class="modal-header">
                <button class="close " type="button" data-dismiss="modal">×</button>
                <h4 class="modal-title">In tem thuộc tính</h4>
            </div>
            <div class="modal-body">
                <div class="col-md-4 col-xs-12">
                    <div class="form-group ">
                        <label class=" a4" id="checka4">
                            <input type="radio" name="optKhoGiay" checked />
                            <span style="display:inline-block;">A4 - 4 tem</span>
                        </label>
                        <label class=" a4" id="checka8checka8">
                            <input type="radio" name="optKhoGiay" checked />
                            <span style="display:inline-block;">A4 - 8 tem</span>
                        </label>
                    </div>
                    <div class="form-group floatleft ">
                        <label style="width:unset">
                            <input type="checkbox" value="1" /> Đơn vị nhập khẩu
                        </label>
                    </div>
                    <div class="form-group floatleft">
                        <label style="width:unset">
                            <input type="checkbox" value="2" /> Tên hàng hóa
                        </label>
                    </div>
                    <div class="form-group floatleft">
                        <label style="width:unset">
                            <input type="checkbox" value="3" /> Mã hàng hóa
                        </label>
                    </div>
                    <div class="form-group floatleft">
                        <label style="width:unset">
                            <input type="checkbox" value="4" /> Số lượng
                        </label>
                    </div>
                    <div class="form-group floatleft">
                        <label style="width:unset">
                            <input type="checkbox" value="5" /> Màu sắc
                        </label>
                    </div>
                    <div class="form-group floatleft">
                        <label style="width:unset">
                            <input type="checkbox" value="6" /> Chất liệu
                        </label>
                    </div>
                    <div class="form-group floatleft">
                        <label style="width:unset">
                            <input type="checkbox" value="7" /> Đơn vị sản xuất
                        </label>
                    </div>
                    <div class="form-group floatleft">
                        <label style="width:unset">
                            <input type="checkbox" value="8" /> Xuất xứ
                        </label>
                    </div>
                </div>
                <div class="col-md-8 col-xs-12">
                    <div class="thuoctinh">
                        <table class="table-res table-tem">
                            <thead>
                                <tr>
                                    <th>Thuộc tính</th>
                                    <th>Giá trị</th>
                                </tr>
                            </thead>
                            <tbody data-bind="foreach: $root.printThuocTinhCuaHH">
                                <!-- ko if: checkboxChecked == true -->
                                <tr>
                                    <td class="tenthuoctinh"><span data-bind="text: TenThuocTinh"></span></td>
                                    <td data-bind="text: GiaTri"></td>
                                </tr>
                                <!-- /ko -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="container-fluid">
                    <button type="button" class="btn btn-cancel " data-dismiss="modal"><i class="fa fa-ban"></i>Bỏ qua</button>
                    <button class="btn btn-main " data-bind="click: $root.btnInTemThuocTinh" id="btnInThuocTinh"><i class="fa fa-floppy-o"></i> In</button>
                </div>
            </div>
        </div>
    </div>
</div>
@*thao tác xóa hàng hóa*@
<div class="modal fade" id="modalpopup_deleteTTHH">
    <div class="modal-dialog modal-md">
        <div id="modalContainer_delete">
            <div class="modal-content ">
                <div class="modal-body">
                    <div class="title-delete">
                        Xóa hàng hóa
                    </div>
                    Bạn có chắc chắn muốn tất cả hàng hóa được chọn khỏi danh mục hàng hóa?
                </div>
                <div class="modal-footer ">
                    <div class="container-fluid">
                        <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i>Bỏ qua</button>
                        <button type="button" class="btn btn-main" data-dismiss="modal" data-bind="click: XoaHHTT"><i class="fa fa-check"></i> Đồng ý</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@*Ngừng kinh doanh*@
<div class="modal fade" id="modalpopup_NgungKinhDoanh">
    <div id="modalContainer_delete" class="modal-md modal-dialog">
        <div class="modal-content ">
            <div class="modal-header">
                <h4 class="modal-title">Xác nhận</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn Ngừng kinh doanh danh sách hàng hóa đã chọn? Lưu ý thông tin tồn kho và giao dịch lịch sử vẫn được giữ.
            </div>
            <div class="modal-footer ">
                <div class="container-fluid">
                    <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i>Bỏ qua</button>
                    <button type="button" class="btn btn-main" data-dismiss="modal" data-bind="click: NgungKDChoose"><i class="fa fa-check"></i> Đồng ý</button>
                </div>
            </div>
        </div>
    </div>
</div>
@*Cho phép KD*@
<div class="modal fade" id="modalpopup_ChoKinhDoanh">
    <div id="modalContainer_delete" class="modal-md modal-dialog">
        <div class="modal-content ">
            <div class="modal-header">
                <h4 class="modal-title"> Xác nhận</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn kinh doanh trở lại danh sách hàng hóa này?
            </div>
            <div class="modal-footer ">
                <div class="container-fluid">
                    <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i>Bỏ qua</button>
                    <button type="button" class="btn btn-main" data-dismiss="modal" data-bind="click: ChoKDChoose"><i class="fa fa-check"></i> Đồng ý</button>
                </div>
            </div>
        </div>
    </div>
</div>
@*Xóa Ảnh*@
<div class="modal fade" id="modalpopup_XoaAnh">
    <div id="modalContainer_delete" class="modal-dialog modal-md">
        <div class="modal-content ">
            <div class="modal-header">
                <h4 class="modal-title">Xác nhận</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
            </div>
            <div class="modal-body">
                Bạn có muốn xóa ảnh này không?
            </div>
            <div class="modal-footer">
                <div class="container-fluid">
                    <button type="button" class="btn btn-main" data-dismiss="modal" data-bind="click: deleteAnh"><i class="fa fa-check"></i> Đồng ý</button>
                    <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i>Bỏ qua</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade in " id="modalViTriKho">
    <div class="modal-dialog draggable modal-md">
        <div class="modal-content  ">
            <div class="modal-header">
                <button class="close close-modal" type="button" data-dismiss="modal"><i class="material-icons">close</i></button>
                <h4 class="modal-title">Thêm vị trí kho</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="css-form-label"> Vị trí<span class="red">(*)</span></label>
                    <div class="css-form-detail">
                        <input type="text" class="form-control" id="txtTenViTriHH" />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="container-fluid">
                    <button type="button" class="btn btn-cancel" data-dismiss="modal"><i class="fa fa-ban"></i>Bỏ qua</button>
                    <button type="button" class="btn btn-save" id="btnLuuNhomHangHoa" data-dismiss="modal" data-bind="click: $root.AddNewViTri"><i class="fa fa-save"></i> Lưu</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade op-js-modal1" id="myModalprint" aria-labelledby="myModalLabel">
    <div class="modal-dialog draggable modal-md" role="document">
        @Html.Action("_print", new { area = "", Controller = "HangHoa" })
    </div>
</div>
<div class="modal fade" id="modalPopuplgDelete">
    <div class="modal-dialog draggable modal-md ">
        @Html.Action("_modalDelete", new { area = "", Controller = "GiaoDich" })
    </div>
</div>
<script src="~/Scripts/Components/Input.js"></script>
@Html.Partial("~/Views/Component/_vmImportExcel.cshtml")
@Html.Partial("~/Views/HangHoa/_vmApplyGroupProduct.cshtml")
@Html.Partial("~/Views/Gara/QuanLySuaChua/_ThemMoiXe.cshtml")
@Html.Partial("~/Views/HangHoa/vmThemNhomHang_NangCao.cshtml")
@Html.Partial("~/Views/HangHoa/_vmDSHangHoa_thuocNhomHoTro.cshtml")
@Html.Partial("~/Views/HangHoa/_vmChuyenNhomHang.cshtml")

<script type="text/javascript">
    $("#treeviewnhomhang li").hover(function () {
        $("#tatcanhh a").css("display", "none");
    });
    var TeamplateMauIn = '@commonEnum.MauInTeamPlates.MaVach';
    var w = $(window).width();
    var checkopenhide = 4;
    var heigth = 0;
    var heightold = 0;
    var setTop = 0;
    function LoadGetHeight() {
        sleep(100).then(() => { setHeight(1); });
    };
    function loadHeightParent() {
        sleep(100).then(() => { setHeight(2); });
    }
    function setHeight(check) {
        if (check === 1) {
            heigth = heigth - heightold;
            $('#myTable tr').each(function () {
                if ($(this).hasClass('ac')) {
                    heightold = $(this).height();
                }
            });
            heigth += heightold;
            $('.line-right').css("margin-top", setTop + "px").height(heigth);
        }
        else {
            heigth1 = heigth1 - heightold1;
            $('#myTable tr').each(function () {
                if ($(this).hasClass('ac')) {
                    heightold1 = $(this).height();
                }
            });
            heigth1 += heightold1;
            $('.line-right').css("margin-top", setTop + "px").height(heigth1);
        }
    }
    function SetHeightShowDetail($this, pageSize) {
        setTop = $('#table-reponsive thead').height() + (parseInt($this.parent('tr').height() * (($this.parent().index() - 1) / 2)));
        if ($('#myTable tbody .tr-show').css('display') !== 'none') {
            setTop += $('#myTable tbody .tr-show').height();
        }
        var t = $this.parent(".prev-tr-hide").next(".op-js-tr-hide").css("display");
        if (t !== "none") {
            heightold = $this.parent(".prev-tr-hide").next(".op-js-tr-hide").height();
            heigth = parseInt($this.parent('tr').height()) + heightold;
            $('.line-right').height(heigth).css("margin-top", setTop + "px");
        }
    };
    function LoadShowGeneral($this) {
        setTop = $('#table-reponsive thead').height() + (parseInt($this.parent('tr').height() * (($this.parent().index() - 1) / 2)));
        if ($('#myTable tbody .tr-show').css('display') !== 'none') {
            setTop += $('#myTable tbody .tr-show').height();
        }
        $(".prev-tr-hide td").not($this.parent("tr").find("td")).removeClass("bg-gray");
        $this.parent("tr").find("td").toggleClass("bg-gray");
        $(".hideCheck").not($this.parent("tr").find(".hideCheck")).removeClass("bor-right");
        $this.parent("tr").find(".hideCheck").toggleClass("bor-right");
        var t = $this.parent(".prev-tr-hide").next(".op-js-tr-hide").css("display");
        if (t == "none") {
            $('#table-reponsive').addClass("table_re");
            if (parseInt($('#SelecttedPage').val()) >= 20) {
                $(".table-reponsive").removeClass('height470');
            }
            checkopenhide = 1;
            $(".op-js-tr-hide").removeClass("ac");
            $this.parent(".prev-tr-hide").next(".op-js-tr-hide").addClass("ac");
            heightold = $this.parent(".prev-tr-hide").next(".op-js-tr-hide").height();
            heigth = parseInt($this.parent('tr').height()) + heightold;
            $('.line-right').height(heigth).css("margin-top", setTop + "px");
        }
        else if (t == "block") {
            $('#table-reponsive').removeClass("table_re");
            if (parseInt($('#SelecttedPage').val()) >= 20) {
                $(".table-reponsive").addClass('height470');
            }
            checkopenhide = 2;
            $this.parent(".prev-tr-hide").next(".op-js-tr-hide").removeClass("ac");
            heightold = $this.parent(".prev-tr-hide").next(".op-js-tr-hide").height();
            heigth = parseInt($this.parent('tr').height()) + heightold;
            $('.line-right').height(heigth).css("margin-top", setTop + "px");
        }
        else {
            $('#table-reponsive').removeClass("table_re");
            if (parseInt($('#SelecttedPage').val()) >= 20) {
                $(".table-reponsive").addClass('height470');
            }
            checkopenhide = 3;
            $(".op-js-tr-hide").removeClass("ac");
            $('.line-right').height(0).css("margin-top", "0px");
        }
    }
    $('#myTable').on('click', '.ch', function (e) {
        if ($(e.target).hasClass("notshow") === false) {
            LoadShowGeneral($(this));
        }
    });
    $('#myTable').on('click', '.solo-show', function (e) {
        var t = $(this).next(".tr-hide-detailsolo").css("display");
        if (t == "none") {
            $(".tr-hide-detailsolo").removeClass("ac");
            $(this).next(".tr-hide-detailsolo").addClass("ac");
        }
        else if (t == "block") {
            $(this).next(".tr-hide-detailsolo").removeClass("ac");
        }
        else {
            $(".tr-hide-detailsolo").removeClass("ac");
        }
    });
    var heigth1 = 0;
    var heightold1 = 0;
    function loadshowdetail($this) {
        var t = $this.parent("tr").next($this).css("display");
        if (t == "none") {
            $(".op-js-tr-hide1").removeClass("ac");
            $this.parent("tr").next().addClass("ac");
            heightold1 = $this.parent("tr").next(".op-js-tr-hide1").height();
            heigth1 = heigth + heightold1;
            $('.line-right').height(heigth1).css("margin-top", setTop + "px");
        }
        else if (t == "block") {
            $this.parent("tr").next().removeClass("ac");
            $('.line-right').height(heigth).css("margin-top", setTop + "px");
        }
        else {
            $(".op-js-tr-hide1").removeClass("ac");
            $('.line-right').parent("tr").height(heigth).css("margin-top", setTop + "px");
        }
    }
    $(document).on('click', '.proDropdown ul li ', function () {
        var munber = $(this).parent(".dropdown-menu").prev("button").find("span a").html();
        var unit = $(this).html();
        $(this).parents(".proDropdown").find("button span").html(unit);
    });
    $(document).on('click', '#btnInThuocTinh', function () {
        $(".modal-ontop").show();
        $("#viewPrintThuocTinh").show();
    });
    $(document).on('click', '.click-price-not', function () {
        $(".price-public").hide();
    });
    $(".cke_2_contents").css("height", "100px");
    $(".close-modal,.save-modal").click(function () {
        $(".modal-ontop").hide();
        $(".op-js-modal").modal('hide');
        $(".op-js-modallnhomhh").modal('hide');
    });
    $(".modal-ontop").click(function () {
        $(this).hide();
        $(".op-js-modal").modal('hide');
        $(".op-js-modallnhomhh").modal('hide');
    });
</script>
<script language="javascript" type="text/javascript">
    function printDiv(divID) {
        $('.printpage').hide();
        $(".modal-ontop").hide();
        $('.printpageThaoTac').hide();
        var divElements = document.getElementById(divID).innerHTML;
        var oldPage = document.body.innerHTML;
        document.body.innerHTML =
            "<html><head><title></title><link href=\"/Content/style.css\" rel=\"stylesheet\"></head><body>" +
            divElements + "</body>";
        window.print();
        document.body.innerHTML = oldPage;
        document.close();
        location.reload();
    }
    function printDiv2(divID) {
        var innerContents = document.getElementById(divID).innerHTML;
        var frame1 = $('<iframe />');
        frame1[0].name = "frame1";
        frame1.css({ "position": "absolute", "top": "-100000px" });
        $("body").append(frame1);
        var frameDoc = frame1[0].contentWindow ? frame1[0].contentWindow : frame1[0].contentDocument.document ? frame1[0].contentDocument.document : frame1[0].contentDocument;
        frameDoc.document.open();
        //Create a new HTML document.
        frameDoc.document.write('<html><head>');
        //Append the external CSS file.
        frameDoc.document.write('<link href="/Content/bootstrap.css" rel="stylesheet" type="text/css" />');
        frameDoc.document.write('<link href="/Content/style.css" rel="stylesheet" type="text/css" />');
        frameDoc.document.write('</head><body style="padding-left:10px;padding-top:2px;">');
        //frameDoc.document.write('</head><body style="padding-top:7px;">');
        //Append the DIV contents.
        frameDoc.document.write(innerContents);
        frameDoc.document.write('</body></html>');
        frameDoc.document.close();
        setTimeout(function () {
            window.frames["frame1"].focus();
            window.frames["frame1"].print();
            frame1.remove();
        }, 500);
    };
    function printDiv2Tem(divID) {
        var innerContents = document.getElementById(divID).innerHTML;
        var frame1 = $('<iframe />');
        frame1[0].name = "frame1";
        frame1.css({ "position": "absolute", "top": "-100000px" });
        $("body").append(frame1);
        var frameDoc = frame1[0].contentWindow ? frame1[0].contentWindow : frame1[0].contentDocument.document ? frame1[0].contentDocument.document : frame1[0].contentDocument;
        frameDoc.document.open();
        //Create a new HTML document.
        frameDoc.document.write('<html><head>');
        //Append the external CSS file.
        frameDoc.document.write('<link href="/Content/bootstrap.css" rel="stylesheet" type="text/css" />');
        frameDoc.document.write('<link href="/Content/style.css" rel="stylesheet" type="text/css" />');
        frameDoc.document.write('</head><body style="padding-left:0px;padding-top:2px;">');
        //frameDoc.document.write('</head><body style="padding-top:7px;">');
        //Append the DIV contents.
        frameDoc.document.write(innerContents);
        frameDoc.document.write('</body></html>');
        frameDoc.document.close();
        setTimeout(function () {
            window.frames["frame1"].focus();
            window.frames["frame1"].print();
            frame1.remove();
        }, 500);
    };
    function printDivTomy(divID) {
        var innerContents = document.getElementById(divID).innerHTML;
        var frame1 = $('<iframe />');
        frame1[0].name = "frame1";
        frame1.css({ "position": "absolute", "top": "-100000px" });
        $("body").append(frame1);
        var frameDoc = frame1[0].contentWindow ? frame1[0].contentWindow : frame1[0].contentDocument.document ? frame1[0].contentDocument.document : frame1[0].contentDocument;
        frameDoc.document.open();
        //Create a new HTML document.
        frameDoc.document.write('<html><head>');
        //Append the external CSS file.
        frameDoc.document.write('<link href="/Content/bootstrap.css" rel="stylesheet" type="text/css" />');
        frameDoc.document.write('<link href="/Content/style.css" rel="stylesheet" type="text/css" />');
        //frameDoc.document.write('</head><body style="padding-left:10px;padding-top:10px;">');
        frameDoc.document.write('</head><body style="padding-top:7px;">');
        //Append the DIV contents.
        frameDoc.document.write(innerContents);
        frameDoc.document.write('</body></html>');
        frameDoc.document.close();
        setTimeout(function () {
            window.frames["frame1"].focus();
            window.frames["frame1"].print();
            frame1.remove();
        }, 500);
    };
    $('#modalPopuplg_HH').on('shown.bs.modal', function (e) {
        var sum1 = 0;
        $('.clThanhTien').each(function () {
            var valThis = $(this).text();
            var ivalThis = formatNumberToInt(valThis);
            if (!isNaN(ivalThis) && ivalThis != '') {
                sum1 += ivalThis;
            }
            $('#lblTongTien').html(formatNumber3Digit(sum1));
        })
    });
    $(".c-goods").click(function () {
        $(this).prev(".add-goods").show();
        $(this).hide();
        $(this).parent(".close-goods").prev("ul,.op-filter-container").removeClass("scoll-r")
    });
    $(".add-goods").click(function () {
        $(this).next(".c-goods").show();
        $(this).hide();
        $(this).parent(".close-goods").prev("ul,.op-filter-container").addClass("scoll-r")
    });
    function ShowNhom($this) {
        $this.next("ul").toggleClass("open");
    };
    function openUl(obj) {
        $(obj).parent().next("ul").toggleClass("open");
    }
    var lc_CTQuyen = JSON.parse(localStorage.getItem('lc_CTQuyen'));
    if ($.inArray('HangHoa_Xoa', lc_CTQuyen) > -1) {
        $('.xoaHH').show();
    }
    $(".kv1").click(function () {
        var display = $(this).next(".list-kv").css('display');
        $(".list-kv").each(function () {
            $(this).hide();
        });
        if (display === 'none') {
            $(this).next(".list-kv").show();
        }
        $(".list-kv").mouseup(function () {
            return false
        });
        $(".kv1").mouseup(function () {
            return false
        });
        $(document).mouseup(function () {
            $(".list-kv").hide();
        });
    });
    $('#mymodaltableprint').on('shown.bs.modal', function () {
        $("td input[id ^='soluongIMV_']").click(function () {
            $(this).select();
        })
    })
    $('#modalPopuplg_HH').on('shown.bs.modal', function () {
        $(document).ready(function () {
            $('.bxslider').bxSlider({
                slideWidth: 255,
                minSlides: 1,
                maxSlides: 1,
                slideMargin: 4
            });
        });
    });
    $('.modal-ontop').click(function () {
        $('.model-images').hide();
    })
    var t = $(".barcode-pname").height();
    function initBarcode() {
        JsBarcode(".barcode").init();
    };
    function keyPress(e) {
        var keypressed = null;
        if (window.event) {
            keypressed = window.event.keyCode; //IE
        }
        else {
            keypressed = e.which; //NON-IE, Standard
        }
        if (keypressed < 48 || keypressed > 57) {
            if (keypressed == 8 || keypressed == 127) {
                return;
            }
            return false;
        }
    }
</script>
<script>
    $(".imgUploadClick").click(function () {
        $("#imageUploadForm").click();
    });
    $('#myTable').on('click', '.js-thongtinkhicothanhphan .tab-chiet-khau .price-discount', function () {
        if ($(this).next('.callprice').css('display') === 'none') {
            $('#myTable .js-thongtinkhicothanhphan .tab-chiet-khau .callprice').each(function () {
                $(this).hide();
            });
        }
        $(this).next('.callprice').toggle();
        $('.callprice').mouseup(function () {
            return false;
        });
    });
    $(document).mouseup(function () {
        $(".callprice").hide();
    });
    $('#table-reponsive tbody').on('click', 'tr td .newprice', function () {
        var css = $(this).next('.callprice').css('display');
        $('.callprice').hide();
        if (css === 'none') {
            $(this).next('.callprice').toggle();
        }
        $('.remove-popup').mouseup(function () {
            $('.callprice').hide();
        });
        $('.callprice').mouseup(function () {
            return false
        });
        $(".newprice").mouseup(function () {
            return false
        });
        $(document).mouseup(function () {
            $('.callprice').hide();
        });
    });
</script>
@Html.Partial("_ChonNhanVienPartial")
<script src="@Scripts.Url("~/bundles/AppDanhMuc/HangHoaList")" type="text/javascript"></script>
<script>
    function mauin2() {
        InMaVach('706C689D-0F1C-4C44-B15F-9848434B3012', $('#txtmauintem').val(), $('#txtmauin').val(), "Giá 180.000 đ", 3, 5);
    }
    function mauin3() {
        InMaVach('2C030753-6498-4AF3-9CB3-947FAF77A718', "Bánh kem", "SP000001", "Giá 180.000 đ", 3, 2);
    }
</script>
<script>
    expand_sts = window.localStorage;
    $("#shownhapxuat").click(function () {
        if ($((".btnExport")).hasClass("forcehide")) {
            expand_import();
        } else {
            hide_import();
        }
    });
    if (localStorage.getItem("expand_sts") == "open") {
        expand_import();
    } else {
        hide_import();
    }
    function expand_import() {
        if ($("html").width() > 425) {
            $(".btnImport").removeClass("forcehide");
            $((".btnExport")).removeClass("forcehide");
            localStorage.setItem("expand_sts", "open");
        }
    };
    function hide_import() {
        if ($("html").width() > 425) {
            $(".btnImport").addClass("forcehide");
            $((".btnExport")).addClass("forcehide");
            localStorage.setItem("expand_sts", "close");
        }
    };
</script>
<script>
    //draggable modal- jquery-ui
    $(document).ready(function () {
        $('.modal-dialog').draggable({
            handle: ".modal-header"
        });
    })
</script>

<script>
    var filterNhomHoTro = new Vue({
        el: '#filterNhomHoTro',
        components: {
            'treeview-nhomhang': cmpTreeView
        },
        created: function () {
        },
        data: {
            listNhomHang: [],
            arrIDChosed: [],
        },
        methods: {
            ChoseItem: function (item) {
                let self = this;
                if (item === null) {
                    self.arrIDChosed = [];
                }
                else {
                    self.arrIDChosed = [item.id];
                }
                modelHangHoa.ResetCurrentPage();
            },
            EditItem: function (item) {
                let self = this;
                let obj = {
                    ID: item.id,
                    TenNhomHangHoa: item.text,
                }
                modelHangHoa.editNhomHangHoa(obj);
            },
        }
    })
</script>