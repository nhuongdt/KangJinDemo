@using System.Web.Optimization;
@using banhang24.Hellper;
@using banhang24.AppCache
@{
    Layout = null;
    ViewBag.Title = "Open24.vn - Nhập hàng";
}
<link href="~/Content/Dathang.css" rel="stylesheet" />
<style>
    ul.dropdown-menu.dropdown-menu-news li a {
        color: white
    }
</style>
@Html.Hidden("shopCookies", (string)ViewBag.ShopCookies, new { id = "shopCookies" })
@Html.Hidden("txtLoaiHoaDon", (string)ViewBag.LoaiHoaDon, new { id = "txtLoaiHoaDon" })
<div class="op-container">
    <div class="container-fluid nopadding">
        <div class="col-left">
            <div class="op-filter">
                <section class="op-filter-body">
                    <!--ko if: ChiNhanhs().length > 1 -->
                    <article class="boxLeft ">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="/Content/images/icon/loaithuchi.png">  Chi nhánh
                        </h3>
                        <aside class="op-filter-container">
                            <div class="outselect">
                                <div class="outselect outselectDV">
                                    <div class="choose-person floatleft " data-toggle="dropdown" id="choose_TenDonVi">
                                        <ul data-bind="foreach: MangNhomDV">
                                            <li class="li-input-span">
                                                <span data-bind="text: TenDonVi">
                                                </span>
                                                <span data-bind="click: $parent.CloseDV">
                                                    <i class="fa fa-times"></i>
                                                </span>
                                            </li>
                                        </ul>
                                        <input type="text" id="dllChiNhanh" readonly="readonly" class="dropdown" placeholder="Chọn chi nhánh" />
                                    </div>
                                    <div class="selec-person dropdown-menu floatleft" id="selec-all-DV">
                                        <ul data-bind="foreach: ChiNhanhs ">
                                            <li data-bind="attr:{id: ID}, click: $parent.selectedCN">
                                                <span data-bind="text: TenDonVi"></span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </article>
                    <!--/ko-->
                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/thoigian.png" />       Thời gian
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuCheckbox">
                                <div class="form-group floatleft">
                                    <div class="radio-menu">
                                        <input type="radio" data-bind="checked: filterNgayLapHD" value="0" />
                                    </div>
                                    <div class="conten-choose">
                                        <div class=" choose-date ">
                                            <div data-toggle="dropdown" aria-expanded="true">
                                                <input autocomplete="off" type="text" class="dropdown form-control choose-date-show" placeholder="Tháng này" id="txtNgayTao">
                                            </div>
                                            <div class="dropdown-menu choseNgayTao">
                                                <div class="col-md-4 col-sm-4">
                                                    <h3>Theo ngày và tuần</h3>
                                                    <ul>
                                                        <li value="1"><a href="javascript:void(0);">Hôm nay</a></li>
                                                        <li value="2"><a href="javascript:void(0);">Hôm qua</a></li>
                                                        <li value="3"><a href="javascript:void(0);">Tuần này</a></li>
                                                        <li value="4"><a href="javascript:void(0);">Tuần trước</a></li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-4 col-sm-4">
                                                    <h3>Theo tháng và quý</h3>
                                                    <ul>
                                                        <li value="6"><a href="javascript:void(0);">Tháng này</a></li>
                                                        <li value="7"><a href="javascript:void(0);">Tháng trước</a></li>
                                                        <li value="10"><a href="javascript:void(0);">Quý này</a></li>
                                                        <li value="11"><a href="javascript:void(0);">Quý trước</a></li>
                                                    </ul>
                                                </div><div class="col-md-4 col-sm-4">
                                                    <h3>Theo năm</h3>
                                                    <ul>
                                                        <li value="12"><a href="javascript:void(0);">Năm này</a></li>
                                                        <li value="13"><a href="javascript:void(0);">Năm trước</a></li>
                                                        <li value="0"><a href="javascript:void(0);">Toàn thời gian</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group floatleft">
                                    <div class="radio-menu">
                                        <input type="radio" data-bind="checked: filterNgayLapHD" value="1" />
                                    </div>
                                    <div class="conten-choose">
                                        <div class="floatleft form-wrap ">
                                            <input type='text' class="form-control daterange" id="txtNgayTaoInput" placeholder="23/12/2017" name="daterange"
                                                   data-bind="value: filterNgayLapHD_Input, enable: filterNgayLapHD()!=='0'" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </article>
                    <article class="boxLeft">
                        <h3 class="op-filter-title" onclick="toggleSubFilter(this)">
                            <img src="~/Content/images/icon/trangthai (1).png" />   Trạng thái
                        </h3>
                        <aside class="op-filter-container">
                            <div class="menuCheckbox">
                                <ul>
                                    <!--ko if: $root.LoaiHoaDonMenu() !== 31-->
                                    <li>
                                        <label><input type="checkbox" value="0" data-bind="checked: TT_TamLuu"> Phiếu tạm</label>
                                    </li>
                                    <li>
                                        <label><input type="checkbox" value="1" data-bind="checked: TT_DaLuu"> Đã nhập hàng</label>
                                    </li>
                                    <li>
                                        <label><input type="checkbox" value="4" data-bind="checked: TT_DaHuy"> Đã hủy</label>
                                    </li>
                                    <!--/ko-->
                                    <!--ko if: $root.LoaiHoaDonMenu() === 31-->
                                    <li>
                                        <label><input type="checkbox" value="0" data-bind="checked: TT_TamLuu"> Phiếu tạm</label>
                                    </li>
                                    <li>
                                        <label><input type="checkbox" value="1" data-bind="checked: $root.TT_DaLuu"> Đã lưu</label>
                                    </li>
                                    <li>
                                        <label><input type="checkbox" value="2" data-bind="checked:  $root.TT_DangXuLy"> Đang xử lý </label>
                                    </li>
                                    <li>
                                        <label><input type="checkbox" value="3" data-bind="checked: TT_HoanThanh">Hoàn thành</label>
                                    </li>
                                    <li>
                                        <label><input type="checkbox" value="4" data-bind="checked: TT_DaHuy"> Đã hủy</label>
                                    </li>
                                    <!--/ko-->
                                </ul>
                            </div>
                        </aside>
                    </article>
                </section>
                <div class="op-filter-footer">
                    <button type="button" class="btn btn-link" style="color:red" onclick="closeFilter()">Hủy</button>
                    <button type="button" class="btn btn-link" onclick="collapseSubFilter(this)">
                        <span>Thu gọn</span>
                    </button>
                    <button type="button" class="btn btn-link" style="display:none" onclick="expandSubFilter(this)">
                        <span>Mở rộng</span>
                    </button>
                    <button type="button" class="btn btn-main kv2Btn" onclick="closeFilter()">Hoàn tất</button>
                </div>
            </div>
        </div>
        <div class="col-right">
            <div class="op-header">
                <div class="op-header-title">
                    <h2 class="pull-left title">
                        @banhang24.Resources.ResourceTexts.Exchange /&nbsp;
                        <!--ko if:$root.LoaiHoaDonMenu() === 4 -->
                        <span>Nhập hàng nhà cung cấp</span>
                        <!--/ko-->
                        <!--ko if:$root.LoaiHoaDonMenu() === 13 -->
                        <span>Nhập kho nội bộ</span>
                        <!--/ko-->
                        <!--ko if:$root.LoaiHoaDonMenu() === 31 -->
                        <span>Đặt hàng nhà cung cấp</span>
                        <!--/ko-->
                        <!--ko if:$root.LoaiHoaDonMenu() === 14 -->
                        <span>Nhập hàng khách thừa</span>
                        <!--/ko-->
                    </h2>
                </div>
                <div class="flex flex-between">
                    <div class="header-button ">
                        <div class=" header-button-left">
                            <!--ko if:$root.roleNhapHang_Insert() -->
                            <button class="btn btn-main" data-bind="click: clickNhapHang" href="javascript:void(0)">
                                <i class="fa fa-plus"></i><font>Thêm mới</font>
                            </button>
                            <!--/ko-->
                            <!--ko if:$root.roleNhapHang_Export() -->
                            <button type="button" class="btn btn-main xuatfile" data-toggle="dropdown" data-bind="click: ExportExcel_PhieuNhapHang">
                                <i class="fa fa-file-excel-o"></i> Xuất file
                            </button>
                            <!--/ko-->
                            <div class="btn-dropdown open ">
                                <button type="button" class="btn btn-main" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" onclick="showCollumnFilter(this)">
                                    <i class="fa fa-angle-double-down"></i>
                                </button>
                                <div class=" dropdown-list dropdown-list-two" id="myList">
                                    <div class="col-md-6 dropdown-left">
                                        <ul data-bind="foreach: ListCheckBox">
                                            <!--ko if: $index() < $root.NumberColum_Div2()-->
                                            <li>
                                                <div class="checkbox">
                                                    <label>
                                                        <input type="checkbox" class="checkbox" checked="checked" data-bind="value: Key">
                                                        <span></span>
                                                        <label class="nopadding" data-bind="text: Value"></label>
                                                    </label>
                                                </div>
                                            </li>
                                            <!--/ko-->
                                        </ul>
                                    </div>
                                    <div class="col-md-6 dropdown-right">
                                        <ul data-bind="foreach: ListCheckBox">
                                            <!--ko if: $index() >= $root.NumberColum_Div2()-->
                                            <li>
                                                <div class="checkbox">
                                                    <label>
                                                        <input type="checkbox" class="checkbox" checked="checked" data-bind="value: Key">
                                                        <span></span>
                                                        <label class="nopadding" data-bind="text: Value"></label>
                                                    </label>
                                                </div>
                                            </li>
                                            <!--/ko-->
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex ">
                        <div class="op-search">
                            <input type="text" class="form-control" id="txtMaHoaDonNH" placeholder="Theo mã hóa đơn, Tên NCC, SĐT"
                                   data-bind="value: filter, valueUpdate: 'afterkeydown'" autocomplete="off">
                            <button type="button" class=" op-search-button" data-bind="click: $root.clickiconSearch">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                        <button class="btn btn-main op-filter-toggle" onclick="showFilter()" title="Hiển thị bộ lọc">
                            <i class="material-icons">sort</i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="content-table content-table" id="myScrollspy" style="top: 48px;position: sticky;">
                <div class="table-reponsive bangchung table-frame">
                    <table class="table-hover table-new" id="tb">
                        <thead class="thead-boder">
                            <!--ko if: $root.LoaiHoaDonMenu() !==13 && $root.LoaiHoaDonMenu() !==14 -->
                            <tr>
                                @foreach (var item in commonEnum.ListColumnPurchaseOrder)
                                {
                                    <th class="@item.Key">
                                        <a href="javascript:void(0)">@item.Value</a>
                                    </th>
                                }
                            </tr>
                            <!--/ko-->
                            <!--ko if: $root.LoaiHoaDonMenu() === 13 -->
                            <tr>
                                @foreach (var item in commonEnum.ListColumnNhapNoiBo)
                                {
                                    <th class="@item.Key">
                                        <a href="javascript:void(0)">@item.Value</a>
                                    </th>
                                }
                            </tr>
                            <!--/ko-->
                            <!--ko if: $root.LoaiHoaDonMenu() === 14 -->
                            <tr>
                                <th>#</th>
                                @foreach (var item in commonEnum.ListColumnNhapHangThua)
                                {
                                    <th class="@item.Key">
                                        <a href="javascript:void(0)">@item.Value</a>
                                    </th>
                                }
                            </tr>
                            <!--/ko-->
                        </thead>
                        <!--ko if: $root.LoaiHoaDonMenu() !==13 && $root.LoaiHoaDonMenu() !==14-->
                        <tbody data-bind="foreach: HoaDons">
                            <tr class="prev-tr-hide" id="table" data-bind="click: $parent.LoadChiTietHD,css:{bggray : $index()%2 == 1}">
                                <td class="@commonEnum.ColumnPurchaseOrder.mahoadon" data-bind="text: MaHoaDon"></td>
                                <td class="@commonEnum.ColumnInvoices.madathang">
                                    <a data-bind="text: MaHoaDonGoc"></a>
                                </td>
                                <td class="@commonEnum.ColumnPurchaseOrder.ngaylaphoadon"><span data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''"></span></td>
                                <td class="@commonEnum.ColumnInvoices.nguoitao" data-bind="text: NguoiTao"></td>
                                <td class="@commonEnum.ColumnPurchaseReturns.makhachhang ">
                                    <a href="=javascript:void(0)" data-bind="text: MaDoiTuong, click: $root.gotoKhachHang"></a>
                                </td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tenkhachhang" data-bind="text: TenDoiTuong"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.sodienthoai" data-bind="text: DienThoai"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.diachi" data-bind="text: DiaChiKhachHang"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tenchinhanh" data-bind="text: TenDonVi"></td>
                                <td class="@commonEnum.ColumnInvoices.thanhtienchuack text-right" data-bind="text: $root.HangHoa_XemGiaVon()? formatNumber3Digit(ThanhTienChuaCK,2):0"></td>
                                <td class="@commonEnum.ColumnInvoices.giamgiact text-right" data-bind="text: $root.HangHoa_XemGiaVon()? formatNumber3Digit(GiamGiaCT,2):0"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tongtienhang text-right" data-bind="text: $root.HangHoa_XemGiaVon()? formatNumber3Digit(TongTienHang,2):0"></td>
                                <td class="@commonEnum.ColumnInvoices.tienthue text-right" data-bind="text: formatNumber3Digit(TongTienThue,2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tonggiamgia text-right" data-bind="text: formatNumber3Digit(TongGiamGia)"></td>
                                <td class="@commonEnum.ColumnInvoices.tongchiphi text-right" data-bind="text: formatNumber3Digit(TongChiPhi)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.cantrakhach text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(TongThanhToan,2):0"></td>
                                <td class="@commonEnum.ColumnInvoices.tienmat text-right" data-bind="text: formatNumber3Digit(TienMat,2)"></td>
                                <td class="@commonEnum.ColumnInvoices.pos text-right" data-bind="text: formatNumber3Digit(TienATM,2)"></td>
                                <td class="@commonEnum.ColumnInvoices.chuyenkhoan text-right" data-bind="text: formatNumber3Digit(ChuyenKhoan,3)"></td>
                                <td class="@commonEnum.ColumnInvoices.tiencoc text-right" data-bind="text: formatNumber3Digit(TienDatCoc,2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.datrakhach text-right" data-bind="text: formatNumber3Digit(KhachDaTra,3)"></td>
                                <td class="@commonEnum.ColumnInvoices.conno text-right" data-bind="text: formatNumber3Digit(ConNo,2), style: { color: (ConNo > 0) ? 'red' : 'black' }"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.ghichu" data-bind="text: DienGiai"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.trangthai" data-bind="text: TrangThaiText"></td>
                            </tr>
                            <tr class="op-js-tr-hide">
                                <td colspan="10">
                                    <div class="op-object-detail ">
                                        <ul class="nav nav-tabs">
                                            <li class="active" onclick="LoadGetHeight()"><a data-bind=" attr: {href: '#home'+ ID}" data-toggle="tab">Thông tin</a></li>
                                            <li onclick="LoadGetHeight()"><a data-bind=" attr: {href: '#infor'+ ID}, visible: ChoThanhToan !== null" data-toggle="tab">Nhật ký thanh toán</a></li>
                                        </ul>
                                        <div class="tab-content">
                                            <div class="tab-pane active" data-bind="attr:{ id: 'home'+ ID}">
                                                <div class="op-object-detail ">
                                                    <div class="op-object-detail-left">
                                                        <div class="form-group floatleft">
                                                            <label class="css-form-label"> Chi nhánh :</label>
                                                            <div class="css-form-detail">
                                                                <span data-bind="text:TenDonVi"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft">
                                                            <label class="css-form-label"> User lập phiếu :</label>
                                                            <div class="css-form-detail">
                                                                <span data-bind="text:NguoiTaoHD"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft ">
                                                            <label class="css-form-label">Mã hóa đơn:</label>
                                                            <div class="css-form-detail">
                                                                <input type="text" class="form-control" disabled="disabled" data-bind="value: MaHoaDon" required="" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft ">
                                                            <label class="css-form-label">Thời gian :</label>
                                                            <div class="css-form-detail">
                                                                <input type="text" class="form-control txtNgayLapHD"
                                                                       data-bind="value: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''
                                                                               ,enable: $root.NhapHang_ThayDoiThoiGian() && $root.Enable_NgayLapHD()" required="" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft">
                                                            <label class="css-form-label">Nhà cung cấp :</label>
                                                            <div class="css-form-detail">
                                                                <span data-bind="text: TenDoiTuong"></span>
                                                            </div>
                                                        </div>

                                                        <div class="form-group floatleft">
                                                            <label class="css-form-label">Trạng thái :</label>
                                                            <div class="css-form-detail">
                                                                <span data-bind="text: TrangThaiText"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft border-end">
                                                            <label class="css-form-label">Ghi chú :</label>
                                                            <div class="css-form-detail">
                                                                <textarea class="floatleft" data-bind="value: DienGiai, enable: $root.Enable_NgayLapHD()" placeholder="Ghi chú..."></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="op-object-detail-right btn-function" style="margin-left:0">
                                                        <div class="table-res loadcthd">
                                                            <table class="table">
                                                                <thead>
                                                                    <tr>
                                                                        <th>
                                                                            <div class="col-md-3 header-title-filter">
                                                                                Mã hàng hóa  <span class="glyphicon glyphicon-search icon-filter"></span>
                                                                            </div>
                                                                            <div class="col-md-8">
                                                                                <div class="right-inner-addon" hidden>
                                                                                    <span class="glyphicon glyphicon-search"></span>
                                                                                    <input type="text" class="form-control" data-bind="event:{keyup:$root.FilterHangHoaChildren}, attr:{id: 'txtSearch' + ID}" placeholder="Tìm kiếm chi tiết hàng hóa">
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-1">
                                                                                <span class="glyphicon glyphicon-chevron-left  icon-filter2" hidden></span>
                                                                            </div>
                                                                        </th>
                                                                        <th>Tên hàng</th>
                                                                        <th>Đvt</th>
                                                                        <th data-bind="visible: $root.checkThietLapLoHang() === true">Lô hàng</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Đơn giá</th>
                                                                        <th>Thành tiền trước CK</th>
                                                                        <th>Giảm giá</th>
                                                                        <th>PT chiết khấu</th>
                                                                        <th class="text-right">Thành tiền</th>
                                                                        <th class="text-right">Thuế</th>
                                                                        <th class="text-right">Thanh toán</th>
                                                                        <th>Ghi chú</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody data-bind="foreach: $parent.BH_HoaDonChiTiets">
                                                                    <tr>
                                                                        <td>
                                                                            <span data-bind="text: commonStatisJs.SubStringContent(MaHangHoa,15), attr:{title: MaHangHoa}"></span>
                                                                            <span data-bind="text: Del" style="color:red"></span>
                                                                        </td>
                                                                        <td>
                                                                            <span data-bind="text: commonStatisJs.SubStringContent(TenHangHoa,30), attr:{title: TenHangHoa}"></span>
                                                                            <span data-bind="text: ThuocTinh_GiaTri" style="color:#ff6a00"></span>
                                                                        </td>
                                                                        <td>
                                                                            <span style="color: #8abb0f" data-bind="visible: TenDonViTinh">
                                                                                <span data-bind="text: TenDonViTinh"></span>
                                                                            </span>
                                                                        </td>
                                                                        <td class="text-center" data-bind="visible: $root.checkThietLapLoHang() === true">
                                                                            <span data-bind="visible: MaLoHang">
                                                                                <a data-bind="click: $root.linkLoHangHoa"><span data-bind="text: MaLoHang" style="color:palevioletred"></span></a>
                                                                            </span>
                                                                        </td>
                                                                        <td data-bind="text: formatNumber3Digit(SoLuong,2)"></td>
                                                                        <td class="text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(DonGia,2):0"></td>
                                                                        <td class="text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(DonGia * SoLuong,2):0"></td>
                                                                        <td class="text-right" data-bind="text: formatNumber3Digit(GiamGia,2)"></td>
                                                                        <td class="text-center" data-bind="text: PTChietKhau"></td>
                                                                        <td class="text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(ThanhTien,2):0"></td>
                                                                        <td class="text-right" data-bind="text: formatNumber3Digit(TienThue,2)"></td>
                                                                        <td class="text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(ThanhToan,2):0"></td>
                                                                        <td data-bind="text: GhiChu"></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <!--ko if: $root.TotalRecordCTNH() > 10-->
                                                            <div class="page">
                                                                <div class="flex flex-end">
                                                                    <a href="#" data-bind="click: $root.StartPageCTNH, visible: $root.VisibleStartPageCTNH"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                    <a href="#" data-bind="click: $root.BackPageCTNH, visible: $root.VisibleStartPageCTNH "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                    <ul data-bind="foreach: $root.PageListCTNH">
                                                                        <li>
                                                                            <a href="javascript:void(0)" data-bind="text: pageNumberCTN, click: $root.GoToPageCTNH, css: $root.GetClassCTNH($data)"></a>
                                                                        </li>
                                                                    </ul>
                                                                    <a href="#" data-bind="click: $root.GoToNextPageCTNH, visible: $root.VisibleEndPageCTNH "><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                    <a href="#" data-bind="click: $root.EndPageCTNH, visible: $root.VisibleEndPageCTNH "><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                    <div class="total-recos">Hiển thị <span data-bind="text: $root.fromitemCTNH"></span> - <span data-bind="text: $root.toitemCTNH"></span> trên tổng số <span data-bind="text: $root.TotalRecordCTNH()"></span> mã hàng.</div>
                                                                </div>
                                                            </div>
                                                            <!--/ko-->
                                                        </div>
                                                        <div class="op-table-summary">
                                                            <div class="col-md-6 col-sm-6 col-xs-6 footer-total-detail pull-right">
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tổng số lượng :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: formatNumber3Digit($root.TongSLuong(),2)">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tổng số mặt hàng :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: $root.BH_HoaDonChiTietsThaoTac().length">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tổng tiền hàng :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: $root.HangHoa_XemGiaVon()? formatNumber3Digit(TongTienHang,2): 0">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tổng thuế
                                                                        <span data-bind="visible: PTThueHoaDon > 0">
                                                                            (<span data-bind="text: PTThueHoaDon"></span> %)
                                                                        </span>:
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: formatNumber3Digit(TongTienThue,2)">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Giảm hóa đơn
                                                                        <span data-bind="visible: TongChietKhau > 0">
                                                                            (<span data-bind="text: TongChietKhau"></span> %)
                                                                        </span>:
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: formatNumber3Digit(TongGiamGia,2)">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tiền cần trả :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row"
                                                                             data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(TongThanhToan,2):0">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Đã trả NCC :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(KhachDaTra,2):0">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex flex-end op-object-detail-function">
                                                        <!--ko if: $root.Show_BtnEdit() && $root.Enable_NgayLapHD() && $root.Role_ChangeInvoice_ifOtherDate()-->
                                                        <button class="btn btn-main" type="button"
                                                                data-bind="visible: ChoThanhToan == false && ConNo === TongThanhToan, click: function(){$root.SaoChep_Edit($data, 2)}">
                                                            <i class="fa fa-share"></i> Sửa đổi
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.Show_BtnUpdate() && $root.Enable_NgayLapHD()-->
                                                        <button class="btn btn-main" data-bind="click: $parent.editHD">
                                                            <i class="fa fa-save"></i> Lưu
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.Show_BtnUpdate() && ChoThanhToan == true && $root.Enable_NgayLapHD()-->
                                                        <button class="btn btn-main" data-bind="click: function(){$root.SaoChep_Edit($data, 1)}">
                                                            <i class="fa fa-share"></i> Mở phiếu
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.LoaiHoaDonMenu() ===31 -->
                                                        <button class="btn btn-main"
                                                                data-bind="visible: YeuCau!='4' && YeuCau!='3' && ChoThanhToan === false,
                                                                click: $root.NhapMua_fromPO">
                                                            <i class="fa fa-share"></i> Nhập mua
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.LoaiHoaDonMenu() !==31 -->
                                                        <div class="dropdown-mauin " style="margin-right:5px" data-bind="visible: ChoThanhToan == false  && $root.Enable_NgayLapHD()">
                                                            <button class="btn btn-main btn-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                                <i class="fa fa-bars"></i>Hoạt động <span class="caret"></span>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li data-bind="click: $parent.ChiTietTraHang, visible: $root.TraHangNhap_ThemMoi()">
                                                                    <a href="javascript:void(0)">Trả hàng </a>
                                                                </li>
                                                                <li data-bind="click: $parent.XuatChuyenHang, visible: $root.ChuyenHang_ThemMoi()">
                                                                    <a href="javascript:void(0)">Điều chuyển</a>
                                                                </li>
                                                                <li data-bind="click: $parent.XuatBanHang, visible: $root.HoaDon_ThemMoi()">
                                                                    <a href="javascript:void(0)">Xuất bán</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <!--/ko-->
                                                        <div class="btn-group dropdown-mauin">
                                                            <button href="javascript:void(0)" class="btn btn-main " data-bind="click: $root.InHoaDon">
                                                                <i class="fa fa-print" aria-hidden="true"></i> In
                                                            </button>
                                                            <button class="btn btn-main  dropdown-toggle dropdown-toggle-split" role="button" data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" data-bind="foreach:$root.ListTypeMauIn " style="padding:0; border:none;right:0; box-shadow:3px 3px 10px rgba(0,0,0,0.15)">
                                                                <li>
                                                                    <a data-bind="text:Value, click:function() { $root.PrintHoaDon($parent,Key) }">123456</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <!--ko if: $root.LoaiHoaDonMenu() !==31 -->
                                                        <button href="javascript: void(0)" class="btn btn-main" data-bind="click: $root.BarCodeChooseHH">
                                                            <i class="fa fa-barcode"></i>In mã vạch
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.Show_BtnExcelDetail()-->
                                                        <button href="javascript: void(0)" class="btn btn-main" data-bind="click: $parent.ExportExcel_ChiTietPhieuNhapHang">
                                                            <i class="fa fa-file-excel-o"></i> Xuất file
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.Role_XoaPhieuNhap_ifOtherDate() && $root.Enable_NgayLapHD() && ChoThanhToan !==null-->
                                                        <button class="btn btn-cancel" data-bind="click: $parent.modalDelete">
                                                            <i class="fa fa-close"></i>Hủy bỏ
                                                        </button>
                                                        <!--/ko-->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane tab-content-next" data-bind=" attr: {id: 'infor'+ ID}">
                                                <div class="table-res">
                                                    <table class='table'>
                                                        <tr>
                                                            <th>Mã phiếu</th>
                                                            <th>Thời gian</th>
                                                            <th>Người tạo</th>
                                                            <th>Phương thức</th>
                                                            <th>Trạng thái</th>
                                                            <th>Tiền chi</th>
                                                        </tr>
                                                        <tbody data-bind="foreach: $root.LichSuThanhToan">
                                                            <tr>
                                                                <td>
                                                                    <a href="javascript:void(0)" data-bind="text: MaHoaDon, click: $root.ShowPopup_InforHD_PhieuThu"></a>
                                                                </td>
                                                                <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''"></td>
                                                                <td data-bind="text: NguoiTao"></td>
                                                                <td data-bind="text: PhuongThucTT"></td>
                                                                <td data-bind="text: TrangThai === false ? 'Đã hủy' : 'Đã thanh toán'"></td>
                                                                <td data-bind="text: formatNumber3Digit(TongTienThu)"></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <!-- ko if: $root.Show_BtnThanhToanCongNo() -->
                                                    <div class=" floatleft text-right padingtop">
                                                        <a href="javascript:void(0)" class="btn btn-main"
                                                           data-bind="click: $parent.showPopThanhToan">
                                                            <i class="fa fa-save"></i> Thanh toán
                                                        </a>
                                                    </div>
                                                    <!--/ko-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot data-bind="visible: HoaDons().length > 0">
                            <tr class="border-bottom bg12 bold">
                                <td class="@commonEnum.ColumnPurchaseOrder.mahoadon">Tổng cộng</td>
                                <td class="@commonEnum.ColumnInvoices.madathang"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.ngaylaphoadon"></td>
                                <td class="@commonEnum.ColumnInvoices.nguoitao"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.makhachhang"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tenkhachhang"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.sodienthoai"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.diachi"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tenchinhanh"></td>
                                <td class="@commonEnum.ColumnInvoices.thanhtienchuack text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit($root.ThanhTienChuaCK(),2):0"></td>
                                <td class="@commonEnum.ColumnInvoices.giamgiact text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit($root.GiamGiaCT(),2):0"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tongtienhang text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(TongTienHang(),2):0"></td>
                                <td class="@commonEnum.ColumnInvoices.tongchiphi text-right" data-bind="text: formatNumber3Digit($root.TongChiPhi(),2)"></td>
                                <td class="@commonEnum.ColumnInvoices.tienthue text-right" data-bind="text: formatNumber3Digit(TongTienThue(),2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tonggiamgia text-right" data-bind="text: formatNumber3Digit(TongGiamGia(),2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.cantrakhach text-right" data-bind="text: formatNumber3Digit(TongPhaiTraKhach(),2)"></td>
                                <td class="@commonEnum.ColumnInvoices.tienmat text-right" data-bind="text: formatNumber3Digit($root.TongTienMat(),2)"></td>
                                <td class="@commonEnum.ColumnInvoices.pos text-right" data-bind="text: formatNumber3Digit($root.TongPOS(),2)"></td>
                                <td class="@commonEnum.ColumnInvoices.chuyenkhoan text-right" data-bind="text: formatNumber3Digit($root.TongChuyenKhoan(),2)"></td>
                                <td class="@commonEnum.ColumnInvoices.tiencoc text-right" data-bind="text: formatNumber3Digit($root.TongTienCoc(),2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.datrakhach text-right" data-bind="text: formatNumber3Digit(TongKhachTra(),2)"></td>
                                <td class="@commonEnum.ColumnInvoices.conno text-right" data-bind="text: formatNumber3Digit(TongKhachNo(),2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.ghichu"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.trangthai"></td>
                            </tr>
                        </tfoot>
                        <!--/ko-->
                        <!--ko if: $root.LoaiHoaDonMenu() ==13 || $root.LoaiHoaDonMenu() ==14 -->
                        <tbody data-bind="foreach: HoaDons">
                            <tr class="prev-tr-hide" id="table" data-bind="click: $parent.LoadChiTietHD,css:{bggray : $index()%2 == 1}">
                                <!--ko if: $root.LoaiHoaDonMenu() ==14 -->
                                <td class="js_tdAction">
                                    <!--ko if: $root.role_XacNhan_NhapHangKhachThua() -->
                                    <a href="javascript:void(0)" class="red"
                                       data-bind="visible: ChoThanhToan == true, click: $root.XacNhan_NhapHangKhachThua">Xác nhận</a>
                                    <span data-bind="visible: ChoThanhToan == false">Đã nhập</span>
                                    <!--/ko-->
                                    <!--ko if: !$root.role_XacNhan_NhapHangKhachThua()-->
                                    <span data-bind="visible: ChoThanhToan == false">Đã nhập</span>
                                    <span data-bind="visible: ChoThanhToan == true">Chưa nhập</span>
                                    <!--/ko-->
                                    <span data-bind="visible: ChoThanhToan == null">Đã hủy</span>
                                </td>
                                <!--/ko-->
                                <td class="@commonEnum.ColumnPurchaseOrder.mahoadon" data-bind="text: MaHoaDon"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.ngaylaphoadon">
                                    <span data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''"></span>
                                </td>
                                <td class="@commonEnum.ColumnInvoices.nguoitao" data-bind="text: NguoiTao"></td>
                                <td class="@commonEnum.ColumnPurchaseReturns.makhachhang ">
                                    <a href="=javascript:void(0)" data-bind="text: MaDoiTuong, click: $root.gotoKhachHang"></a>
                                </td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tenkhachhang" data-bind="text: TenDoiTuong"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tenchinhanh" data-bind="text: TenDonVi"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tongtienhang text-right" data-bind="text: $root.HangHoa_XemGiaVon()? formatNumber3Digit(TongTienHang,2):0"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tonggiamgia text-right" data-bind="text: $root.HangHoa_XemGiaVon()? formatNumber3Digit(TongGiamGia,2):0"></td>
                                <td class="@commonEnum.ColumnInvoices.tongchiphi text-right" data-bind="text: formatNumber3Digit(TongChiPhi,2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.cantrakhach text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(TongThanhToan,2):0"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.datrakhach text-right" data-bind="text: formatNumber3Digit(KhachDaTra,3)"></td>
                                <td class="@commonEnum.ColumnInvoices.conno text-right" data-bind="text: formatNumber3Digit(ConNo,2), style: { color: (ConNo > 0) ? 'red' : 'black' }"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.ghichu" data-bind="text: DienGiai"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.trangthai" data-bind="text: TrangThaiText"></td>
                            </tr>
                            <tr class="op-js-tr-hide">
                                <td colspan="10">
                                    <div class="op-object-detail ">
                                        <ul class="nav nav-tabs">
                                            <li class="active" onclick="LoadGetHeight()"><a data-bind=" attr: {href: '#home'+ ID}" data-toggle="tab">Thông tin</a></li>
                                            <li onclick="LoadGetHeight()"><a data-bind=" attr: {href: '#infor'+ ID}, visible: ChoThanhToan !== null" data-toggle="tab">Nhật ký thanh toán</a></li>
                                        </ul>
                                        <div class="tab-content">
                                            <div class="tab-pane active" data-bind="attr:{ id: 'home'+ ID}">
                                                <div class="op-object-detail ">
                                                    <div class="op-object-detail-left">
                                                        <div class="form-group floatleft">
                                                            <label class="css-form-label"> Chi nhánh :</label>
                                                            <div class="css-form-detail">
                                                                <span data-bind="text:TenDonVi"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft">
                                                            <label class="css-form-label"> User lập phiếu :</label>
                                                            <div class="css-form-detail">
                                                                <span data-bind="text:NguoiTaoHD"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft ">
                                                            <label class="css-form-label">Mã hóa đơn:</label>
                                                            <div class="css-form-detail">
                                                                <input type="text" class="form-control" disabled="disabled" data-bind="value: MaHoaDon" required="" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft ">
                                                            <label class="css-form-label">Thời gian :</label>
                                                            <div class="css-form-detail">
                                                                <input type="text" class="form-control txtNgayLapHD"
                                                                       data-bind="value: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''
                                                                               ,enable: $root.NhapHang_ThayDoiThoiGian() && $root.Enable_NgayLapHD()" required="" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft">
                                                            <label class="css-form-label">Người cung cấp:</label>
                                                            <div class="css-form-detail" data-bind="visible:LoaiDoiTuong !==4">
                                                                <span data-bind="text: TenDoiTuong"></span>
                                                            </div>
                                                            <div class="css-form-detail" data-bind="visible:LoaiDoiTuong ===4">
                                                                <select class="form-control"
                                                                        data-bind="options: $root.NhanViens, optionsText: 'TenNhanVien', optionsValue: 'ID', value: $data.ID_NhanVien,
                                                                                enable: $root.NhapHang_ThayDoiNhanVien() && $root.Enable_NgayLapHD()"></select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft">
                                                            <label class="css-form-label">Trạng thái :</label>
                                                            <div class="css-form-detail">
                                                                <span data-bind="text: TrangThaiText"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group floatleft border-end">
                                                            <label class="css-form-label">Ghi chú :</label>
                                                            <div class="css-form-detail">
                                                                <textarea class="floatleft" data-bind="value: DienGiai, enable: $root.Enable_NgayLapHD()" placeholder="Ghi chú..."></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="op-object-detail-right btn-function" style="margin-left:0">
                                                        <div class="table-res loadcthd">
                                                            <table class="table">
                                                                <thead>
                                                                    <tr>
                                                                        <th>
                                                                            <div class="col-md-3 header-title-filter">
                                                                                Mã hàng hóa  <span class="glyphicon glyphicon-search icon-filter"></span>
                                                                            </div>
                                                                            <div class="col-md-8">
                                                                                <div class="right-inner-addon" hidden>
                                                                                    <span class="glyphicon glyphicon-search"></span>
                                                                                    <input type="text" class="form-control" data-bind="event:{keyup:$root.FilterHangHoaChildren}, attr:{id: 'txtSearch' + ID}" placeholder="Tìm kiếm chi tiết hàng hóa">
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-1">
                                                                                <span class="glyphicon glyphicon-chevron-left  icon-filter2" hidden></span>
                                                                            </div>
                                                                        </th>
                                                                        <th>Tên hàng</th>
                                                                        <th>Đvt</th>
                                                                        <th data-bind="visible: $root.checkThietLapLoHang() === true">Lô hàng</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Đơn giá</th>
                                                                        <th>Chiết khấu</th>
                                                                        <th class="text-right">Thành tiền</th>
                                                                        <th>Ghi chú</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody data-bind="foreach: $parent.BH_HoaDonChiTiets">
                                                                    <tr>
                                                                        <td>
                                                                            <span data-bind="text: commonStatisJs.SubStringContent(MaHangHoa,15), attr:{title: MaHangHoa}"></span>
                                                                            <span data-bind="text: Del" style="color:red"></span>
                                                                        </td>
                                                                        <td>
                                                                            <span data-bind="text: commonStatisJs.SubStringContent(TenHangHoa,30), attr:{title: TenHangHoa}"></span>
                                                                            <span data-bind="text: ThuocTinh_GiaTri" style="color:#ff6a00"></span>
                                                                        </td>
                                                                        <td>
                                                                            <span style="color: #8abb0f" data-bind="visible: TenDonViTinh">
                                                                                <span data-bind="text: TenDonViTinh"></span>
                                                                            </span>
                                                                        </td>
                                                                        <td class="text-center" data-bind="visible: $root.checkThietLapLoHang() === true">
                                                                            <span data-bind="visible: MaLoHang">
                                                                                <a data-bind="click: $root.linkLoHangHoa"><span data-bind="text: MaLoHang" style="color:palevioletred"></span></a>
                                                                            </span>
                                                                        </td>
                                                                        <td class="text-center" data-bind="text: formatNumber3Digit(SoLuong,2)"></td>
                                                                        <td class="text-center" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(DonGia,2):0"></td>
                                                                        <td class="text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(TienChietKhau,2):0"></td>
                                                                        <td class="text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(ThanhTien,2):0"></td>
                                                                        <td data-bind="text: GhiChu"></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <!--ko if: $root.TotalRecordCTNH() > 10-->
                                                            <div class="page">
                                                                <div class="flex flex-end">
                                                                    <a href="#" data-bind="click: $root.StartPageCTNH, visible: $root.VisibleStartPageCTNH"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                                                                    <a href="#" data-bind="click: $root.BackPageCTNH, visible: $root.VisibleStartPageCTNH "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                                                                    <ul data-bind="foreach: $root.PageListCTNH">
                                                                        <li>
                                                                            <a href="javascript:void(0)" data-bind="text: pageNumberCTN, click: $root.GoToPageCTNH, css: $root.GetClassCTNH($data)"></a>
                                                                        </li>
                                                                    </ul>
                                                                    <a href="#" data-bind="click: $root.GoToNextPageCTNH, visible: $root.VisibleEndPageCTNH "><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                                                                    <a href="#" data-bind="click: $root.EndPageCTNH, visible: $root.VisibleEndPageCTNH "><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                                                                    <div class="total-recos">Hiển thị <span data-bind="text: $root.fromitemCTNH"></span> - <span data-bind="text: $root.toitemCTNH"></span> trên tổng số <span data-bind="text: $root.TotalRecordCTNH()"></span> mã hàng.</div>
                                                                </div>
                                                            </div>
                                                            <!--/ko-->
                                                        </div>
                                                        <div class="op-table-summary">
                                                            <div class="col-md-6 col-sm-6 col-xs-6 footer-total-detail pull-right">
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tổng số lượng :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: formatNumber3Digit($root.TongSLuong(),2)">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tổng số mặt hàng :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: $root.BH_HoaDonChiTietsThaoTac().length">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tổng tiền hàng :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: $root.HangHoa_XemGiaVon()? formatNumber3Digit(TongTienHang,2): 0">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tổng giảm giá :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: $root.HangHoa_XemGiaVon()? formatNumber3Digit(TongGiamGia,2): 0">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Tổng chi phí :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: formatNumber3Digit(TongChiPhi,2)">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Phải thanh toán :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: $root.HangHoa_XemGiaVon()? formatNumber3Digit(TongThanhToan,2):0">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="floatleft sum-prduct">
                                                                    <div class="col-xs-5 col-sm-5  col-lg-7 text-right">
                                                                        Đã thanh toán :
                                                                    </div>
                                                                    <div class="col-xs-7 col-sm-7 col-lg-5 text-right">
                                                                        <div class="row" data-bind="text: formatNumber3Digit(KhachDaTra,2)">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex flex-end op-object-detail-function">
                                                        <!--ko if: $root.Show_BtnEdit() && $root.Enable_NgayLapHD()-->
                                                        <button class="btn btn-main" type="button"
                                                                data-bind="visible: ChoThanhToan == false, click: function(){$root.SaoChep_Edit($data, 2)}">
                                                            <i class="fa fa-share"></i> Sửa đổi
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.Show_BtnUpdate() && $root.Enable_NgayLapHD()-->
                                                        <button class="btn btn-main" data-bind="click: $parent.editHD">
                                                            <i class="fa fa-save"></i> Lưu
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.Show_BtnUpdate() && ChoThanhToan == true && $root.Enable_NgayLapHD()-->
                                                        <button class="btn btn-main" data-bind="click: function(){$root.SaoChep_Edit($data, 1)}">
                                                            <i class="fa fa-share"></i> Mở phiếu
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.LoaiHoaDonMenu() ===31 -->
                                                        <button class="btn btn-main" data-bind="click: $root.NhapMua_fromPO">
                                                            <i class="fa fa-share"></i> Nhập mua
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.LoaiHoaDonMenu() !==31 -->
                                                        <div class="dropdown-mauin " style="margin-right:5px" data-bind="visible: ChoThanhToan == false  && $root.Enable_NgayLapHD()">
                                                            <button class="btn btn-main btn-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                                <i class="fa fa-bars"></i>Hoạt động <span class="caret"></span>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li data-bind="click: $parent.ChiTietTraHang, visible: $root.TraHangNhap_ThemMoi()">
                                                                    <a href="javascript:void(0)">Trả hàng </a>
                                                                </li>
                                                                <li data-bind="click: $parent.XuatChuyenHang, visible: $root.ChuyenHang_ThemMoi()">
                                                                    <a href="javascript:void(0)">Điều chuyển</a>
                                                                </li>
                                                                <li data-bind="click: $parent.XuatBanHang, visible: $root.HoaDon_ThemMoi()">
                                                                    <a href="javascript:void(0)">Xuất bán</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <!--/ko-->
                                                        <div class="btn-group dropdown-mauin">
                                                            <button href="javascript:void(0)" class="btn btn-main " data-bind="click: $root.InHoaDon">
                                                                <i class="fa fa-print" aria-hidden="true"></i> In
                                                            </button>
                                                            <button class="btn btn-main  dropdown-toggle dropdown-toggle-split" role="button" data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" data-bind="foreach:$root.ListTypeMauIn " style="padding:0; border:none;right:0; box-shadow:3px 3px 10px rgba(0,0,0,0.15)">
                                                                <li>
                                                                    <a data-bind="text:Value, click:function() { $root.PrintHoaDon($parent,Key) }">123456</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <!--ko if: $root.LoaiHoaDonMenu() !==31 -->
                                                        <button href="javascript: void(0)" class="btn btn-main" data-bind="click: $root.BarCodeChooseHH">
                                                            <i class="fa fa-barcode"></i>In mã vạch
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.Show_BtnExcelDetail()-->
                                                        <button href="javascript: void(0)" class="btn btn-main" data-bind="click: $parent.ExportExcel_ChiTietPhieuNhapHang">
                                                            <i class="fa fa-file-excel-o"></i> Xuất file
                                                        </button>
                                                        <!--/ko-->
                                                        <!--ko if: $root.Role_XoaPhieuNhap_ifOtherDate() && $root.Enable_NgayLapHD() && ChoThanhToan !==null-->
                                                        <button class="btn btn-cancel" data-bind="click: $parent.modalDelete">
                                                            <i class="fa fa-close"></i>Hủy bỏ
                                                        </button>
                                                        <!--/ko-->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane tab-content-next" data-bind=" attr: {id: 'infor'+ ID}">
                                                <div class="table-res">
                                                    <table class='table'>
                                                        <tr>
                                                            <th>Mã phiếu</th>
                                                            <th>Thời gian</th>
                                                            <th>Người tạo</th>
                                                            <th>Phương thức</th>
                                                            <th>Trạng thái</th>
                                                            <th>Tiền chi</th>
                                                        </tr>
                                                        <tbody data-bind="foreach: $root.LichSuThanhToan">
                                                            <tr>
                                                                <td>
                                                                    <a href="javascript:void(0)" data-bind="text: MaHoaDon, click: $root.ShowPopup_InforHD_PhieuThu"></a>
                                                                </td>
                                                                <td data-bind="text: moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm')!='Invalid date'? moment(NgayLapHoaDon).format('DD/MM/YYYY HH:mm'):''"></td>
                                                                <td data-bind="text: NguoiTao"></td>
                                                                <td data-bind="text: PhuongThucTT"></td>
                                                                <td data-bind="text: TrangThai === false ? 'Đã hủy' : 'Đã thanh toán'"></td>
                                                                <td data-bind="text: formatNumber3Digit(TongTienThu)"></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <!-- ko if: $root.Show_BtnThanhToanCongNo() -->
                                                    <div class=" floatleft text-right padingtop">
                                                        <a href="javascript:void(0)" class="btn btn-main"
                                                           data-bind="click: $parent.showPopThanhToan">
                                                            <i class="fa fa-save"></i> Thanh toán
                                                        </a>
                                                    </div>
                                                    <!--/ko-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot data-bind="visible: HoaDons().length > 0">
                            <tr class="border-bottom bg12 bold">
                                <td class="@commonEnum.ColumnPurchaseOrder.mahoadon" data-bind="attr:{colspan: $root.LoaiHoaDonMenu() == 14 ? 2 : 1}">Tổng cộng</td>
                                <td class="@commonEnum.ColumnPurchaseOrder.ngaylaphoadon"></td>
                                <td class="@commonEnum.ColumnInvoices.nguoitao"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.makhachhang"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tenkhachhang"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tenchinhanh"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tongtienhang text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(TongTienHang(),2):0"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.tonggiamgia text-right" data-bind="text: $root.HangHoa_XemGiaVon()?formatNumber3Digit(TongGiamGia(),2):0"></td>
                                <td class="@commonEnum.ColumnInvoices.tongchiphi text-right" data-bind="text: formatNumber3Digit($root.TongChiPhi(),2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.cantrakhach text-right" data-bind="text: formatNumber3Digit(TongPhaiTraKhach(),2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.datrakhach text-right" data-bind="text: formatNumber3Digit(TongKhachTra(),2)"></td>
                                <td class="@commonEnum.ColumnInvoices.conno text-right" data-bind="text: formatNumber3Digit(TongKhachNo(),2)"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.ghichu"></td>
                                <td class="@commonEnum.ColumnPurchaseOrder.trangthai"></td>
                            </tr>
                        </tfoot>
                        <!--/ko-->
                        <tfoot data-bind="visible: HoaDons().length === 0">
                            <tr class="Report_Empty text-center">
                                <td colspan="20">
                                    <i>Không có dữ liệu</i>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="page">
                    <div class="flex flex-row">
                        <label>Số bản ghi:</label>
                        <select class="form-control  seleted-page" data-bind="value: pageSize,
                                                options: pageSizes, event: {change: ResetCurrentPage}"></select>
                    </div>
                    <div class="flex flex-end">
                        <a href="javascript:void(0)" data-bind="click: $root.StartPage, visible: VisibleStartPage"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                        <a href="javascript:void(0)" data-bind="click: $root.BackPage, visible: VisibleStartPage "><i class="fa fa-caret-left" aria-hidden="true"></i></a>
                        <ul data-bind="foreach: PageList_Display">
                            <li>
                                <a href="javascript:void(0)" data-bind="text: pageNumber, click: $root.GoToPageHD, css: $root.GetClassHD($data)"></a>
                            </li>
                        </ul>
                        <a href="javascript:void(0)" data-bind="click: $root.GoToNextPage, visible: VisibleEndPage "><i class="fa fa-caret-right" aria-hidden="true"></i></a>
                        <a href="javascript:void(0)" data-bind="click: $root.EndPage, visible: VisibleEndPage "><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                        <div class="total-recos">Hiển thị <span data-bind="text: fromitem"></span> - <span data-bind="text: toitem"></span> trên tổng số <span data-bind="text: TotalRecord"></span> hóa đơn.</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal" id="myModalprintChooseHH" aria-labelledby="myModalLabel">
            <div class="modal-dialog draggable modal-lg" role="document">
                @Html.Action("_printchooseHH", new { area = "", Controller = "HangHoa" })
            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade">
            <div class="modal-xs">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="material-icons">close</i></button>
                        <h4 class="modal-title">Hóa đơn</h4>
                    </div>
                    <div id="content-print-NhapHang">
                        @Html.Raw(Html.Action("LoadMauIn", "ThietLap", new { id = "NhapHang.txt" }))
                    </div>
                </div>
            </div>
        </div>
        <div class="printpageThaoTac">
            <div class="inner-print">
                <div class="floatleft">
                    <div class="title-print">
                        <h4>In mã vạch</h4>
                        <button type="button" class="close-print"><span aria-hidden="true">×</span></button>
                    </div>
                    <div class="control-print floatleft text-center">
                        <a href="javascript:void(0)" onclick="javascript:printDiv('img-print1')">
                            <i class="fa fa-print icon-print"></i>
                        </a>
                    </div>
                    <div class="content-print-page floatleft">
                        <div class="img-print" id="img-print1" data-bind="foreach: {data: $root.arrPrintBarCode, afterRender: initBarcode}">
                            <div id="printablediv" style="width: 134px;float:left;text-align:center;height:81.96px;">
                                <p class="floatleft text-center" style="font-size: 10px;max-height:24px;line-height: 10px;">
                                    <span data-bind="text: TenHangHoa">
                                    </span>
                                    <span data-bind="text: ThuocTinh_GiaTri" style="color:#ff6a00"></span>
                                    <span data-bind="if: (TenDonViTinh != '' && TenDonViTinh != null)">(<span data-bind="text: TenDonViTinh"></span>)</span>
                                </p>
                                <svg class="barcode" jsbarcode-format="code128" data-bind="attr: {'jsbarcode-value' : MaHangHoa}" jsbarcode-textmargin="0" jsbarcode-fontSize="0" jsbarcode-height="30" jsbarcode-width="1" jsbarcode-marginLeft="10" jsbarcode-marginRight="10" jsbarcode-marginTop="1" jsbarcode-marginBottom="1"></svg>
                                <!-- ko if: $root.CheckInMaHang1() == true-->
                                <div data-bind="text: MaHangHoa" class="text-center" style="font-size: 10px;padding:0 !important;" id="mahanghoa"></div>
                                <!--/ko-->
                                <!-- ko if: $root.CheckInBangGia1() == true-->
                                <div class="text-center" style="font-size: 13px;font-weight:bold;"><span data-bind="text: formatNumber3Digit(GiaBan)" class="text-center "></span> VNĐ</div>
                                <!--/ko-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/Components/Input.js"></script>
<script src="~/Scripts/Components/NhanVien_KhachHang.js"></script>
@Html.Partial("~/Views/Gara/HoaDon/_ThuTienNhapHang.cshtml");
<div class="modal fade" id="modalPopuplgDelete">
    <div class="modal-dialog draggable">
        @Html.Action("_modalDelete", new { area = "", Controller = "GiaoDich" })
    </div>
</div>
<iframe class="ifram-text" id="InputPrint" name="IframeName" data-bind="iframeContent: dataIframe" hidden></iframe>
<script>
    var TeamplateMauIn = '@commonEnum.MauInTeamPlates.NhapHang';
    var funcName = '@RoleKey.NhapHang';
    $(".op-filter-containertop ul li").css("display", "none");
    $(".op-filter-containertop ul li").eq(0).css("display", "block");
    $(".op-filter-containertop ul li").eq(1).css("display", "block");
    $(document).on('click', '.open-li', function () {
        $(".op-filter-containertop ul li").css("display", "block");
        $(this).toggle();
        $(this).next(".close-li").toggle();
    });
    $(document).on('click', '.close-li', function () {
        $(".op-filter-containertop ul li").css("display", "none");
        $(this).toggle();
        $(this).prev(".open-li").toggle();
        $(".op-filter-container ul li").eq(0).css("display", "block");
        $(".op-filter-container ul li").eq(1).css("display", "block");
    });
    function LoadGetHeight() {
        sleep(100).then(() => { setHeight(); });
    };
    function setHeight() {
        heigth = heigth - heightold;
        $('#tb tr').each(function () {
            if ($(this).hasClass('ac')) {
                heightold = $(this).height();
            }
        });
        heigth += heightold;
        $('.line-right').css("margin-top", setTop + "px").height(heigth);
    }
    var heigth = 0;
    var heightold = 0;
    var setTop = 0;
    function SetHeightShowDetail($this) {
        setTop = 35 + parseInt($this.height() * ($this.index() / 2));
        var t = $this.next(".op-js-tr-hide").css("display");
        if (t !== "none") {
            heightold = $this.next().height();
            heigth = parseInt($this.height()) + heightold;
            $('.line-right').height(heigth).css("margin-top", setTop + "px");
        }
    }
    $('#tb').on('click', '.prev-tr-hide', function () {
        setTop = 35 + parseInt($(this).height() * ($(this).index() / 2));
        $(this).parents(".table-reponsive").toggleClass("table_re");
        $(".prev-tr-hide td").not($(this).find("td")).removeClass("bor");
        $(this).find("td").toggleClass("bor");
        $("td").not($(this).find("td")).removeClass("bg-gray");
        $(".prev-tr-hide").not($(this)).removeClass("bor-right");
        $(this).toggleClass("bor-right");
        $(this).find("td").toggleClass("bg-gray");
        var t = $(this).next(".op-js-tr-hide").css("display");
        if (t == "none") {
            if (parseInt($('#SelecttedPage').val()) >= 20) {
                $(".table-reponsive").removeClass('height470');
            }
            $(".op-js-tr-hide").removeClass("ac");
            $(".op-js-tr-hide").removeClass("l");
            $(this).next(".op-js-tr-hide").addClass("ac");
            heightold = $(this).next().height();
            heigth = parseInt($(this).height()) + heightold;
            $('.line-right').height(heigth).css("margin-top", setTop + "px");
        }
        else if (t == "block") {
            if (parseInt($('#SelecttedPage').val()) >= 20) {
                $(".table-reponsive").addClass('height470');
            }
            $(this).next(".op-js-tr-hide").removeClass("ac");
            $('.line-right').height(0).css("margin-top", "0px");
        }
        else {
            if (parseInt($('#SelecttedPage').val()) >= 20) {
                $(".table-reponsive").addClass('height470');
            }
            $(".op-js-tr-hide").removeClass("ac");
            $('.line-right').height(0).css("margin-top", "0px");
        }
    });
    $(function () {
        $('.datetimepicker4').datetimepicker({
            format: 'DD/MM/YYYY'
        });
    });
</script>
<script>
    $('.bgwhite').hide();
    function printDiv(divID) {
        var innerContents = document.getElementById(divID).innerHTML;
        var svgtag = document.getElementsByTagName("svg");
        for (var i = 0, len = svgtag.length; i < len; i++) {
            if (i + 1 == len) {
                var frame1 = $('<iframe />');
                frame1[0].name = "frame1";
                frame1.css({ "position": "absolute", "top": "-100000px" });
                $("body").append(frame1);
                var frameDoc = frame1[0].contentWindow ? frame1[0].contentWindow : frame1[0].contentDocument.document ? frame1[0].contentDocument.document : frame1[0].contentDocument;
                frameDoc.document.open();
                //Create a new HTML document.
                frameDoc.document.write('<html><head>');
                //Append the external CSS file.
                frameDoc.document.write('<link href="/Content/bootstrap.css" rel="stylesheet" type="text/css" />');
                frameDoc.document.write('<link href="/Content/style.css" rel="stylesheet" type="text/css" />');
                frameDoc.document.write('</head><body style="padding-left:10px;padding-top:2px;">');
                //Append the DIV contents.
                frameDoc.document.write(innerContents);
                frameDoc.document.write('</body></html>');
                frameDoc.document.close();
                setTimeout(function () {
                    window.frames["frame1"].focus();
                    window.frames["frame1"].print();
                    frame1.remove();
                }, 500);
            }
        }
    };
    function initBarcode() {
        JsBarcode(".barcode").init();
    };
</script>
<script>
    $('#tb').on('click', '.icon-filter', function () {
        $(this).hide();
        $(this).closest('th').find('.icon-filter2').show();
        $(this).closest('th').next().toggle();
        if ($(window).width() <= 1024) {
            $(this).closest('th').find('.right-inner-addon input').attr("placeholder", "Tìm kiếm hàng hóa");
        }
        else { $(this).closest('th').find('.right-inner-addon input').attr('placeholder', 'Tìm kiếm chi tiết hàng hóa'); }
        if ($(this).closest('th').find('.right-inner-addon').css('display') === 'none') {
            $(this).closest('th').attr('colspan', 2).addClass('actioveFilter');
        }
        else {
            $(this).closest('th').attr('colspan', 1).removeClass('actioveFilter');
        }
        $(this).closest('th').find('.right-inner-addon').toggle();
    });
    $('#tb').on('click', ' .icon-filter2', function () {
        $(this).hide();
        $(this).closest('th').find('.icon-filter').show();
        $(this).closest('th').next().toggle();
        if ($(this).closest('th').find('.right-inner-addon').css('display') === 'none') {
            $(this).closest('th').attr('colspan', 2).addClass('actioveFilter');
        }
        else {
            $(this).closest('th').attr('colspan', 1).removeClass('actioveFilter');
        }
        $(this).closest('th').find('.right-inner-addon').toggle();
    });
</script>
<script src="@Html.WriteRenderFile(Scripts.Url("~/bundles/GiaoDich/NhapHang"))" type="text/javascript"></script>
<script>
    expand_sts = window.localStorage;
    $("#shownhapxuat").click(function () {
        //alert(localStorage.getItem("expand_sts"));
        if ($((".btnExport")).hasClass("forcehide")) {
            expand_import();
        } else {
            hide_import();
        }
    });
    if (localStorage.getItem("expand_sts") == "open") {
        expand_import();
    } else {
        hide_import();
    }
    function expand_import() {
        if ($("html").width() > 425) {
            $(".btnImport").removeClass("forcehide");
            $((".btnExport")).removeClass("forcehide");
            localStorage.setItem("expand_sts", "open");
        }
    };
    function hide_import() {
        if ($("html").width() > 425) {
            $(".btnImport").addClass("forcehide");
            $((".btnExport")).addClass("forcehide");
            localStorage.setItem("expand_sts", "close");
        }
    };
    $(document).ready(function () {
        $('.datepicker_mask').datetimepicker({
            timepicker: true,
            mask: false,
            format: 'd/m/Y H:i',
            maxDate: new Date(),
            scrollMonth: false,
        });
    })
</script>
